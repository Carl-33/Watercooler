{"ast":null,"code":"import _regeneratorRuntime from \"/Users/grantpauljoslyn/Github_Josly025/Watercooler/watercooler/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/Users/grantpauljoslyn/Github_Josly025/Watercooler/watercooler/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/Users/grantpauljoslyn/Github_Josly025/Watercooler/watercooler/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nvar firebaseConfig = {\n  apiKey: \"AIzaSyCql3WejPAHHcghWycqGHEsWZlEZpH6I7k\",\n  authDomain: \"watercooler-be436.firebaseapp.com\",\n  databaseURL: \"https://watercooler-be436-default-rtdb.firebaseio.com\",\n  projectId: \"watercooler-be436\",\n  storageBucket: \"watercooler-be436.appspot.com\",\n  messagingSenderId: \"272854258776\",\n  appId: \"1:272854258776:web:779aeb179160242c53662d\"\n};\nexport var generateUserDocument = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(user, additionalData) {\n    var userRef, snapshot, email, firstName, lastName, company, location;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (user) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            userRef = firestore.doc(\"users/\".concat(user.uid));\n            _context.next = 5;\n            return userRef.get();\n\n          case 5:\n            snapshot = _context.sent;\n\n            if (snapshot.exists) {\n              _context.next = 16;\n              break;\n            }\n\n            email = user.email, firstName = user.firstName, lastName = user.lastName, company = user.company, location = user.location;\n            _context.prev = 8;\n            _context.next = 11;\n            return userRef.set(_objectSpread({\n              firstName,\n              lastName,\n              email,\n              company,\n              location\n            }, additionalData));\n\n          case 11:\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](8);\n            console.error(\"uh oh, there was an error in creating a user docuemnt\", _context.t0);\n\n          case 16:\n            return _context.abrupt(\"return\", getUserDocument(user.uid));\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[8, 13]]);\n  }));\n\n  return function generateUserDocument(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar getUserDocument = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(uid) {\n    var userDocument;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (uid) {\n              _context2.next = 2;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", null);\n\n          case 2:\n            _context2.prev = 2;\n            _context2.next = 5;\n            return firestore.doc(\"users/\".concat(uid)).get();\n\n          case 5:\n            userDocument = _context2.sent;\n            return _context2.abrupt(\"return\", _objectSpread({\n              uid\n            }, userDocument.data()));\n\n          case 9:\n            _context2.prev = 9;\n            _context2.t0 = _context2[\"catch\"](2);\n            console.error(\"whoops couldn't fetch the user\", _context2.t0);\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[2, 9]]);\n  }));\n\n  return function getUserDocument(_x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nfirebase.initializeApp(firebaseConfig);\nexport var auth = firebase.auth();\nexport var firestore = firebase.firestore();","map":{"version":3,"sources":["/Users/grantpauljoslyn/Github_Josly025/Watercooler/watercooler/client/src/firebase.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","generateUserDocument","user","additionalData","userRef","firestore","doc","uid","get","snapshot","exists","email","firstName","lastName","company","location","set","console","error","getUserDocument","userDocument","data","initializeApp","auth"],"mappings":";;;AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP;AACA,OAAO,oBAAP;AAEA,IAAIC,cAAc,GAAG;AACnBC,EAAAA,MAAM,EAAE,yCADW;AAEnBC,EAAAA,UAAU,EAAE,mCAFO;AAGnBC,EAAAA,WAAW,EAAE,uDAHM;AAInBC,EAAAA,SAAS,EAAE,mBAJQ;AAKnBC,EAAAA,aAAa,EAAE,+BALI;AAMnBC,EAAAA,iBAAiB,EAAE,cANA;AAOnBC,EAAAA,KAAK,EAAE;AAPY,CAArB;AAUA,OAAO,IAAMC,oBAAoB;AAAA,sEAAG,iBAAOC,IAAP,EAAaC,cAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAC7BD,IAD6B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAE5BE,YAAAA,OAF4B,GAElBC,SAAS,CAACC,GAAV,iBAAuBJ,IAAI,CAACK,GAA5B,EAFkB;AAAA;AAAA,mBAGXH,OAAO,CAACI,GAAR,EAHW;;AAAA;AAG5BC,YAAAA,QAH4B;;AAAA,gBAI7BA,QAAQ,CAACC,MAJoB;AAAA;AAAA;AAAA;;AAKxBC,YAAAA,KALwB,GAK0BT,IAL1B,CAKxBS,KALwB,EAKjBC,SALiB,GAK0BV,IAL1B,CAKjBU,SALiB,EAKNC,QALM,GAK0BX,IAL1B,CAKNW,QALM,EAKIC,OALJ,GAK0BZ,IAL1B,CAKIY,OALJ,EAKaC,QALb,GAK0Bb,IAL1B,CAKaa,QALb;AAAA;AAAA;AAAA,mBAOxBX,OAAO,CAACY,GAAR;AACJJ,cAAAA,SADI;AAEJC,cAAAA,QAFI;AAGJF,cAAAA,KAHI;AAIJG,cAAAA,OAJI;AAKJC,cAAAA;AALI,eAMDZ,cANC,EAPwB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAgB9Bc,YAAAA,OAAO,CAACC,KAAR,CACE,uDADF;;AAhB8B;AAAA,6CAsB3BC,eAAe,CAACjB,IAAI,CAACK,GAAN,CAtBY;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAApBN,oBAAoB;AAAA;AAAA;AAAA,GAA1B;;AAwBP,IAAMkB,eAAe;AAAA,uEAAG,kBAAOZ,GAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACjBA,GADiB;AAAA;AAAA;AAAA;;AAAA,8CACL,IADK;;AAAA;AAAA;AAAA;AAAA,mBAGOF,SAAS,CAACC,GAAV,iBAAuBC,GAAvB,GAA8BC,GAA9B,EAHP;;AAAA;AAGdY,YAAAA,YAHc;AAAA;AAKlBb,cAAAA;AALkB,eAMfa,YAAY,CAACC,IAAb,EANe;;AAAA;AAAA;AAAA;AASpBJ,YAAAA,OAAO,CAACC,KAAR,CAAc,gCAAd;;AAToB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAfC,eAAe;AAAA;AAAA;AAAA,GAArB;;AAaA3B,QAAQ,CAAC8B,aAAT,CAAuB7B,cAAvB;AACA,OAAO,IAAM8B,IAAI,GAAG/B,QAAQ,CAAC+B,IAAT,EAAb;AACP,OAAO,IAAMlB,SAAS,GAAGb,QAAQ,CAACa,SAAT,EAAlB","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\nvar firebaseConfig = {\n  apiKey: \"AIzaSyCql3WejPAHHcghWycqGHEsWZlEZpH6I7k\",\n  authDomain: \"watercooler-be436.firebaseapp.com\",\n  databaseURL: \"https://watercooler-be436-default-rtdb.firebaseio.com\",\n  projectId: \"watercooler-be436\",\n  storageBucket: \"watercooler-be436.appspot.com\",\n  messagingSenderId: \"272854258776\",\n  appId: \"1:272854258776:web:779aeb179160242c53662d\",\n};\n\nexport const generateUserDocument = async (user, additionalData) => {\n  if (!user) return;\n  const userRef = firestore.doc(`users/${user.uid}`);\n  const snapshot = await userRef.get();\n  if (!snapshot.exists) {\n    const { email, firstName, lastName, company, location } = user;\n    try {\n      await userRef.set({\n        firstName,\n        lastName,\n        email,\n        company,\n        location,\n        ...additionalData, //additional data vs. company for Dashboard t-function\n      });\n    } catch (error) {\n      console.error(\n        \"uh oh, there was an error in creating a user docuemnt\",\n        error\n      );\n    }\n  }\n  return getUserDocument(user.uid);\n};\nconst getUserDocument = async (uid) => {\n  if (!uid) return null;\n  try {\n    const userDocument = await firestore.doc(`users/${uid}`).get();\n    return {\n      uid,\n      ...userDocument.data(),\n    };\n  } catch (error) {\n    console.error(\"whoops couldn't fetch the user\", error);\n  }\n};\n\nfirebase.initializeApp(firebaseConfig);\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();\n"]},"metadata":{},"sourceType":"module"}