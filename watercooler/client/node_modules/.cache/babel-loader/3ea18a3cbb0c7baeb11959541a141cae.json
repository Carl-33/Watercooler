{"ast":null,"code":"import _regeneratorRuntime from\"/Users/grantpauljoslyn/Github_Josly025/Watercooler/watercooler/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/Users/grantpauljoslyn/Github_Josly025/Watercooler/watercooler/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _toConsumableArray from\"/Users/grantpauljoslyn/Github_Josly025/Watercooler/watercooler/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"/Users/grantpauljoslyn/Github_Josly025/Watercooler/watercooler/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useRef,useState,useEffect,useContext}from\"react\";import{Redirect}from\"react-router-dom\";import Paper from\"@material-ui/core/Paper\";import{makeStyles}from\"@material-ui/core/styles\";import Grid from\"@material-ui/core/Grid\";import Typography from\"@material-ui/core/Typography\";import Button from\"@material-ui/core/Button\";import TextField from\"@material-ui/core/TextField\";import Card from\"@material-ui/core/Card\";import CardActionArea from\"@material-ui/core/CardActionArea\";import CardActions from\"@material-ui/core/CardActions\";import CardContent from\"@material-ui/core/CardContent\";import CardMedia from\"@material-ui/core/CardMedia\";import Wally from\"../images/wally3.png\";import Cuppy from\"../images/justcuppy.png\";import List from\"@material-ui/core/List\";import ListItem from\"@material-ui/core/ListItem\";import Divider from\"@material-ui/core/Divider\";import ListItemText from\"@material-ui/core/ListItemText\";import MessageIcon from\"@material-ui/icons/Message\";import API from\"../../utils/API\";import Comment from\"../Comment\";import{UserContext}from\"../../providers/UserProvider\";import{Link}from\"react-router-dom\";// import axios from \"axios\";\nvar useStyles=makeStyles(function(theme){return{root:{flexGrow:1,overflow:\"hidden\",padding:theme.spacing(0,3),\"& .MuiTextField-root\":{margin:theme.spacing(1),color:\"white\",width:\"45ch\"}},media:{height:200},paper:{maxWidth:600,margin:\"\".concat(theme.spacing(5),\"px auto\"),padding:theme.spacing(2)},inline:{display:\"inline\"}};});//Forum Default\nvar Forum=function Forum(props){var redirected=!!props.from?props.from:false;var userData=useContext(UserContext);var _useState=useState([]),_useState2=_slicedToArray(_useState,2),comments=_useState2[0],setComments=_useState2[1];// setting userData to state when logged in\nvar authorName=userData.user===null?\"John Smith\":userData.user.user.firstName+\"\"+userData.user.user.lastName;//Set state for inputs\nvar _useState3=useState(authorName),_useState4=_slicedToArray(_useState3,2),author=_useState4[0],setAuthor=_useState4[1];var _useState5=useState(\"\"),_useState6=_slicedToArray(_useState5,2),title=_useState6[0],setTitle=_useState6[1];var _useState7=useState(\"\"),_useState8=_slicedToArray(_useState7,2),body=_useState8[0],setBody=_useState8[1];var _useState9=useState(company),_useState10=_slicedToArray(_useState9,2),company=_useState10[0],setCompany=_useState10[1];var _useState11=useState(location),_useState12=_slicedToArray(_useState11,2),location=_useState12[0],setLocation=_useState12[1];//input Ref to DB!\nvar classes=useStyles();var authorRef=useRef();var titleRef=useRef();var bodyRef=useRef();var companyRef=useRef();var locationRef=useRef();var savePost=function savePost(e){e.preventDefault();// console.log(\"hi!\");\nAPI.createComment({author:authorRef.current.value,title:titleRef.current.value,body:bodyRef.current.value,company:companyRef.current.value,location:locationRef.current.value});setComments([].concat(_toConsumableArray(comments),[{author:authorRef.current.value,title:titleRef.current.value,body:bodyRef.current.value,company:companyRef.current.value,location:locationRef.current.value}]));authorRef.current.value=\"\";titleRef.current.value=\"\";bodyRef.current.value=\"\";companyRef.current.value=\"\";locationRef.current.value=\"\";};// const renderComments = () => {\n//   // API reqeuest for the DB\n//   const render = () => {\n//     let dbData = API.getComments();\n//     let newComments = dbData.then((data) => data.data);\n//     // let finalComments = newComments.then((data) => JSON.stringify(data));\n//     return newComments;\n//   };\n//   render().then((newComments) => setComment(newComments));\n//   //this works\n//   // console.log(\"this is new comments\" + setComment(newComments));\n//   // console.log(\"just 77\" + dbData.then((data) => console.log(data)));\n//   // console.log(\"just 78\" + comments.then((data) => console.log(data)));\n//   console.log(\"just comments 79\" + comments);\n// };\nvar handleNewComments=function handleNewComments(){console.log(author,title,body);var inputs={author,title,body};// setComments([...comments, inputs]);\nconsole.log(\"line 102\",[].concat(_toConsumableArray(comments),[inputs]));};useEffect(function(){_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var dbData,companyComments,locationComments;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return API.getComments();case 2:dbData=_context.sent;if(redirected===\"company\"&&userData.user){companyComments=dbData.data.filter(function(comment){return comment.company===userData.user.user.company;});setComments(companyComments);}else if(redirected===\"location\"&&userData.user){locationComments=dbData.data.filter(function(comment){return comment.location===userData.user.user.location;});setComments(locationComments);}else{setComments(dbData.data);}authorRef.current.value=userData.user===null?\"John Smith\":userData.user.user.firstName+\" \"+userData.user.user.lastName;companyRef.current.value=userData.user===null?\"Corporate, inc\":userData.user.user.company;locationRef.current.value=userData.user===null?\"Profits Dept.\":userData.user.user.location;case 7:case\"end\":return _context.stop();}}},_callee);}))();},[userData]);return/*#__PURE__*/React.createElement(\"div\",{className:classes.root},/*#__PURE__*/React.createElement(\"br\",null),/*#__PURE__*/React.createElement(Grid,{container:true,direction:\"row\",justify:\"center\",alignItems:\"stretch\",spacing:5},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Card,{className:classes.root},/*#__PURE__*/React.createElement(CardActionArea,null,/*#__PURE__*/React.createElement(CardContent,null,/*#__PURE__*/React.createElement(Typography,{gutterBottom:true,align:\"center\",variant:\"h5\",component:\"h2\"},\"| Watercooler Forum |\"),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(CardMedia,{className:classes.media,image:Wally,title:\"Wally\"}),/*#__PURE__*/React.createElement(Divider,null),/*#__PURE__*/React.createElement(Typography,{variant:\"body2\",color:\"textSecondary\",component:\"p\"},\"Connect with your fellow co-workers here by creating a post!\"))),/*#__PURE__*/React.createElement(CardActions,null,/*#__PURE__*/React.createElement(Button,{size:\"small\",onClick:function onClick(){return\"window.location.href='https://dashboard.heroku.com/apps/sheltered-cliffs-91068'\";},color:\"primary\"},\"Share\"))))),/*#__PURE__*/React.createElement(Paper,{className:classes.paper},console.log(comments,\"comment\"),comments!==undefined?comments.map(function(comments,i){return/*#__PURE__*/React.createElement(Comment,{key:i,comments:comments,classes:classes});}):/*#__PURE__*/React.createElement(React.Fragment,null)),/*#__PURE__*/React.createElement(Paper,{className:classes.paper},/*#__PURE__*/React.createElement(Grid,{container:true,wrap:\"nowrap\",spacing:2},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Button,{variant:\"outlined\",color:\"primary\",onClick:savePost},/*#__PURE__*/React.createElement(MessageIcon,{style:{margin:\"3\"}}),\"Submit Post\")),/*#__PURE__*/React.createElement(Grid,{item:true,xs:true},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",fullWidth:true,id:\"Name\",label:\"Name\",required:true,name:\"Name\",defaultValue:author,onChange:function onChange(e){setAuthor(e.target.value);console.log(e.target.value);},inputRef:authorRef,autoComplete:\"lname\"})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6},/*#__PURE__*/React.createElement(TextField,{variant:\"outlined\",fullWidth:true,id:\"title\",label:\"Title\",name:\"title\",required:true,defaultValue:title,onChange:function onChange(e){setTitle(e.target.value);console.log(e.target.value);},inputRef:titleRef,autoComplete:\"lname\"})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:true},/*#__PURE__*/React.createElement(TextField,{id:\"outlined-multiline-static\",label:\"Comment\",multiline:true,rows:6,required:true,defaultValue:body,onChange:function onChange(e){setBody(e.target.value);console.log(e.target.value);},inputRef:bodyRef,variant:\"outlined\"})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6},/*#__PURE__*/React.createElement(TextField,{id:\"outlined-multiline-static\",label:\"Company\",rows:6,required:true,defaultValue:\"Company\",onChange:function onChange(e){setCompany(e.target.value);console.log(e.target.value);},inputRef:companyRef,variant:\"outlined\"})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6},/*#__PURE__*/React.createElement(TextField,{id:\"outlined-multiline-static\",label:\"Location\",rows:6,required:true,defaultValue:\"location\",onChange:function onChange(e){setLocation(e.target.value);console.log(e.target.value);},inputRef:locationRef,variant:\"outlined\"}))))));};export default Forum;","map":{"version":3,"sources":["/Users/grantpauljoslyn/Github_Josly025/Watercooler/watercooler/client/src/components/Pages/Forum.js"],"names":["React","useRef","useState","useEffect","useContext","Redirect","Paper","makeStyles","Grid","Typography","Button","TextField","Card","CardActionArea","CardActions","CardContent","CardMedia","Wally","Cuppy","List","ListItem","Divider","ListItemText","MessageIcon","API","Comment","UserContext","Link","useStyles","theme","root","flexGrow","overflow","padding","spacing","margin","color","width","media","height","paper","maxWidth","inline","display","Forum","props","redirected","from","userData","comments","setComments","authorName","user","firstName","lastName","author","setAuthor","title","setTitle","body","setBody","company","setCompany","location","setLocation","classes","authorRef","titleRef","bodyRef","companyRef","locationRef","savePost","e","preventDefault","createComment","current","value","handleNewComments","console","log","inputs","getComments","dbData","companyComments","data","filter","comment","locationComments","undefined","map","i","target"],"mappings":"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","sourcesContent":["import React, { useRef, useState, useEffect, useContext } from \"react\";\nimport { Redirect } from \"react-router-dom\";\nimport Paper from \"@material-ui/core/Paper\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport Button from \"@material-ui/core/Button\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActionArea from \"@material-ui/core/CardActionArea\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport CardMedia from \"@material-ui/core/CardMedia\";\nimport Wally from \"../images/wally3.png\";\nimport Cuppy from \"../images/justcuppy.png\";\nimport List from \"@material-ui/core/List\";\nimport ListItem from \"@material-ui/core/ListItem\";\nimport Divider from \"@material-ui/core/Divider\";\nimport ListItemText from \"@material-ui/core/ListItemText\";\nimport MessageIcon from \"@material-ui/icons/Message\";\nimport API from \"../../utils/API\";\nimport Comment from \"../Comment\";\nimport { UserContext } from \"../../providers/UserProvider\";\nimport { Link } from \"react-router-dom\";\n// import axios from \"axios\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    flexGrow: 1,\n    overflow: \"hidden\",\n    padding: theme.spacing(0, 3),\n    \"& .MuiTextField-root\": {\n      margin: theme.spacing(1),\n      color: \"white\",\n      width: \"45ch\",\n    },\n  },\n  media: {\n    height: 200,\n  },\n  paper: {\n    maxWidth: 600,\n    margin: `${theme.spacing(5)}px auto`,\n    padding: theme.spacing(2),\n  },\n  inline: {\n    display: \"inline\",\n  },\n}));\n\n//Forum Default\nconst Forum = (props) => {\n  let redirected = !!props.from ? props.from : false;\n  const userData = useContext(UserContext);\n\n  const [comments, setComments] = useState([]);\n  // setting userData to state when logged in\n  let authorName =\n    userData.user === null\n      ? \"John Smith\"\n      : userData.user.user.firstName + \"\" + userData.user.user.lastName;\n  //Set state for inputs\n  const [author, setAuthor] = useState(authorName);\n  const [title, setTitle] = useState(\"\");\n  const [body, setBody] = useState(\"\");\n  const [company, setCompany] = useState(company);\n  const [location, setLocation] = useState(location);\n  //input Ref to DB!\n  const classes = useStyles();\n  const authorRef = useRef();\n  const titleRef = useRef();\n  const bodyRef = useRef();\n  const companyRef = useRef();\n  const locationRef = useRef();\n\n  const savePost = (e) => {\n    e.preventDefault();\n    // console.log(\"hi!\");\n    API.createComment({\n      author: authorRef.current.value,\n      title: titleRef.current.value,\n      body: bodyRef.current.value,\n      company: companyRef.current.value,\n      location: locationRef.current.value,\n    });\n    setComments([\n      ...comments,\n      {\n        author: authorRef.current.value,\n        title: titleRef.current.value,\n        body: bodyRef.current.value,\n        company: companyRef.current.value,\n        location: locationRef.current.value,\n      },\n    ]);\n    authorRef.current.value = \"\";\n    titleRef.current.value = \"\";\n    bodyRef.current.value = \"\";\n    companyRef.current.value = \"\";\n    locationRef.current.value = \"\";\n  };\n\n  // const renderComments = () => {\n  //   // API reqeuest for the DB\n  //   const render = () => {\n  //     let dbData = API.getComments();\n  //     let newComments = dbData.then((data) => data.data);\n  //     // let finalComments = newComments.then((data) => JSON.stringify(data));\n  //     return newComments;\n  //   };\n\n  //   render().then((newComments) => setComment(newComments));\n  //   //this works\n  //   // console.log(\"this is new comments\" + setComment(newComments));\n  //   // console.log(\"just 77\" + dbData.then((data) => console.log(data)));\n  //   // console.log(\"just 78\" + comments.then((data) => console.log(data)));\n  //   console.log(\"just comments 79\" + comments);\n  // };\n\n  const handleNewComments = () => {\n    console.log(author, title, body);\n    const inputs = { author, title, body };\n    // setComments([...comments, inputs]);\n    console.log(\"line 102\", [...comments, inputs]);\n  };\n\n  useEffect(() => {\n    (async () => {\n      let dbData = await API.getComments();\n      if (redirected === \"company\" && userData.user) {\n        let companyComments = dbData.data.filter(\n          (comment) => comment.company === userData.user.user.company\n        );\n        setComments(companyComments);\n      } else if (redirected === \"location\" && userData.user) {\n        let locationComments = dbData.data.filter(\n          (comment) => comment.location === userData.user.user.location\n        );\n        setComments(locationComments);\n      } else {\n        setComments(dbData.data);\n      }\n      authorRef.current.value =\n        userData.user === null\n          ? \"John Smith\"\n          : userData.user.user.firstName + \" \" + userData.user.user.lastName;\n      companyRef.current.value =\n        userData.user === null ? \"Corporate, inc\" : userData.user.user.company;\n      locationRef.current.value =\n        userData.user === null ? \"Profits Dept.\" : userData.user.user.location;\n    })();\n  }, [userData]);\n\n  return (\n    <div className={classes.root}>\n      <br />\n      <Grid\n        container\n        direction=\"row\"\n        justify=\"center\"\n        alignItems=\"stretch\"\n        spacing={5}\n      >\n        <Grid item>\n          <Card className={classes.root}>\n            <CardActionArea>\n              <CardContent>\n                <Typography\n                  gutterBottom\n                  align=\"center\"\n                  variant=\"h5\"\n                  component=\"h2\"\n                >\n                  | Watercooler Forum |\n                </Typography>\n                <Divider />\n                <CardMedia\n                  className={classes.media}\n                  image={Wally}\n                  title=\"Wally\"\n                />\n                <Divider />\n                <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\">\n                  Connect with your fellow co-workers here by creating a post!\n                </Typography>\n              </CardContent>\n            </CardActionArea>\n            <CardActions>\n              <Button\n                size=\"small\"\n                onClick={() =>\n                  \"window.location.href='https://dashboard.heroku.com/apps/sheltered-cliffs-91068'\"\n                }\n                color=\"primary\"\n              >\n                Share\n              </Button>\n            </CardActions>\n          </Card>\n        </Grid>\n      </Grid>\n      <Paper className={classes.paper}>\n        {/* Render comment component*/}\n        {console.log(comments, \"comment\")}\n        {comments !== undefined ? (\n          comments.map((comments, i) => (\n            <Comment key={i} comments={comments} classes={classes} />\n          ))\n        ) : (\n          <React.Fragment />\n        )}\n      </Paper>\n      <Paper className={classes.paper}>\n        <Grid container wrap=\"nowrap\" spacing={2}>\n          <Grid item>\n            <Button variant=\"outlined\" color=\"primary\" onClick={savePost}>\n              <MessageIcon style={{ margin: \"3\" }} />\n              Submit Post\n            </Button>\n          </Grid>\n          <Grid item xs>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                variant=\"outlined\"\n                fullWidth\n                id=\"Name\"\n                label=\"Name\"\n                required\n                name=\"Name\"\n                defaultValue={author}\n                onChange={(e) => {\n                  setAuthor(e.target.value);\n                  console.log(e.target.value);\n                }}\n                inputRef={authorRef}\n                autoComplete=\"lname\"\n              />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                variant=\"outlined\"\n                fullWidth\n                id=\"title\"\n                label=\"Title\"\n                name=\"title\"\n                required\n                defaultValue={title}\n                onChange={(e) => {\n                  setTitle(e.target.value);\n                  console.log(e.target.value);\n                }}\n                inputRef={titleRef}\n                autoComplete=\"lname\"\n              />\n            </Grid>\n            <Grid item xs>\n              <TextField\n                id=\"outlined-multiline-static\"\n                label=\"Comment\"\n                multiline\n                rows={6}\n                required\n                defaultValue={body}\n                onChange={(e) => {\n                  setBody(e.target.value);\n                  console.log(e.target.value);\n                }}\n                inputRef={bodyRef}\n                variant=\"outlined\"\n              />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                id=\"outlined-multiline-static\"\n                label=\"Company\"\n                rows={6}\n                required\n                defaultValue=\"Company\"\n                onChange={(e) => {\n                  setCompany(e.target.value);\n                  console.log(e.target.value);\n                }}\n                inputRef={companyRef}\n                variant=\"outlined\"\n              />\n            </Grid>\n            <Grid item xs={12} sm={6}>\n              <TextField\n                id=\"outlined-multiline-static\"\n                label=\"Location\"\n                rows={6}\n                required\n                defaultValue=\"location\"\n                onChange={(e) => {\n                  setLocation(e.target.value);\n                  console.log(e.target.value);\n                }}\n                inputRef={locationRef}\n                variant=\"outlined\"\n              />\n            </Grid>\n          </Grid>\n        </Grid>\n      </Paper>\n    </div>\n  );\n};\n\nexport default Forum;\n"]},"metadata":{},"sourceType":"module"}