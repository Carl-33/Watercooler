{"ast":null,"code":"import _regeneratorRuntime from \"/Users/grantpauljoslyn/Github_Josly025/Watercooler/watercooler/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _objectSpread from \"/Users/grantpauljoslyn/Github_Josly025/Watercooler/watercooler/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";\nimport _asyncToGenerator from \"/Users/grantpauljoslyn/Github_Josly025/Watercooler/watercooler/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\nvar firebaseConfig = {\n  apiKey: \"AIzaSyCql3WejPAHHcghWycqGHEsWZlEZpH6I7k\",\n  authDomain: \"watercooler-be436.firebaseapp.com\",\n  databaseURL: \"https://watercooler-be436-default-rtdb.firebaseio.com\",\n  projectId: \"watercooler-be436\",\n  storageBucket: \"watercooler-be436.appspot.com\",\n  messagingSenderId: \"272854258776\",\n  appId: \"1:272854258776:web:779aeb179160242c53662d\"\n};\nexport var generateUserDocument = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(user, additionalData) {\n    var userRef, snapshot, email, firstName, lastName;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            if (user) {\n              _context.next = 2;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 2:\n            userRef = firestore.doc(\"users/\".concat(user.uid));\n            _context.next = 5;\n            return userRef.get();\n\n          case 5:\n            snapshot = _context.sent;\n\n            if (snapshot.exists) {\n              _context.next = 16;\n              break;\n            }\n\n            email = user.email, firstName = user.firstName, lastName = user.lastName;\n            _context.prev = 8;\n            _context.next = 11;\n            return userRef.set(_objectSpread({\n              firstName,\n              lastName,\n              email\n            }, additionalData));\n\n          case 11:\n            _context.next = 16;\n            break;\n\n          case 13:\n            _context.prev = 13;\n            _context.t0 = _context[\"catch\"](8);\n            console.error(\"uh oh, there was an error in creating a user docuemnt\", _context.t0);\n\n          case 16:\n            return _context.abrupt(\"return\", getUserDocument(user.uid));\n\n          case 17:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[8, 13]]);\n  }));\n\n  return function generateUserDocument(_x, _x2) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar getUserDocument = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(uid) {\n    var userDocument;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            if (uid) {\n              _context2.next = 2;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", null);\n\n          case 2:\n            _context2.prev = 2;\n            _context2.next = 5;\n            return firestore.doc(\"users/\".concat(uid)).get();\n\n          case 5:\n            userDocument = _context2.sent;\n            return _context2.abrupt(\"return\", _objectSpread({\n              uid\n            }, userDocument.data()));\n\n          case 9:\n            _context2.prev = 9;\n            _context2.t0 = _context2[\"catch\"](2);\n            console.error(\"whoops couldn't fetch the user\", _context2.t0);\n\n          case 12:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[2, 9]]);\n  }));\n\n  return function getUserDocument(_x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nfirebase.initializeApp(firebaseConfig);\nexport var auth = firebase.auth();\nexport var firestore = firebase.firestore();","map":{"version":3,"sources":["/Users/grantpauljoslyn/Github_Josly025/Watercooler/watercooler/client/src/firebase.js"],"names":["firebase","firebaseConfig","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","generateUserDocument","user","additionalData","userRef","firestore","doc","uid","get","snapshot","exists","email","firstName","lastName","set","console","error","getUserDocument","userDocument","data","initializeApp","auth"],"mappings":";;;AAAA,OAAOA,QAAP,MAAqB,cAArB;AACA,OAAO,eAAP;AACA,OAAO,oBAAP;AAIA,IAAIC,cAAc,GAAG;AACjBC,EAAAA,MAAM,EAAE,yCADS;AAEjBC,EAAAA,UAAU,EAAE,mCAFK;AAGjBC,EAAAA,WAAW,EAAE,uDAHI;AAIjBC,EAAAA,SAAS,EAAE,mBAJM;AAKjBC,EAAAA,aAAa,EAAE,+BALE;AAMjBC,EAAAA,iBAAiB,EAAE,cANF;AAOjBC,EAAAA,KAAK,EAAE;AAPU,CAArB;AAUA,OAAO,IAAMC,oBAAoB;AAAA,sEAAG,iBAAOC,IAAP,EAAaC,cAAb;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBAC5BD,IAD4B;AAAA;AAAA;AAAA;;AAAA;;AAAA;AAE1BE,YAAAA,OAF0B,GAEhBC,SAAS,CAACC,GAAV,iBAAuBJ,IAAI,CAACK,GAA5B,EAFgB;AAAA;AAAA,mBAGTH,OAAO,CAACI,GAAR,EAHS;;AAAA;AAG1BC,YAAAA,QAH0B;;AAAA,gBAI5BA,QAAQ,CAACC,MAJmB;AAAA;AAAA;AAAA;;AAKpBC,YAAAA,KALoB,GAKUT,IALV,CAKpBS,KALoB,EAKbC,SALa,GAKUV,IALV,CAKbU,SALa,EAKFC,QALE,GAKUX,IALV,CAKFW,QALE;AAAA;AAAA;AAAA,mBAOlBT,OAAO,CAACU,GAAR;AACFF,cAAAA,SADE;AAEFC,cAAAA,QAFE;AAGFF,cAAAA;AAHE,eAICR,cAJD,EAPkB;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AAcxBY,YAAAA,OAAO,CAACC,KAAR,CAAc,uDAAd;;AAdwB;AAAA,6CAiBzBC,eAAe,CAACf,IAAI,CAACK,GAAN,CAjBU;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAApBN,oBAAoB;AAAA;AAAA;AAAA,GAA1B;;AAmBP,IAAMgB,eAAe;AAAA,uEAAG,kBAAMV,GAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBACfA,GADe;AAAA;AAAA;AAAA;;AAAA,8CACH,IADG;;AAAA;AAAA;AAAA;AAAA,mBAGWF,SAAS,CAACC,GAAV,iBAAuBC,GAAvB,GAA8BC,GAA9B,EAHX;;AAAA;AAGVU,YAAAA,YAHU;AAAA;AAKZX,cAAAA;AALY,eAMTW,YAAY,CAACC,IAAb,EANS;;AAAA;AAAA;AAAA;AAShBJ,YAAAA,OAAO,CAACC,KAAR,CAAc,gCAAd;;AATgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,GAAH;;AAAA,kBAAfC,eAAe;AAAA;AAAA;AAAA,GAArB;;AAaAzB,QAAQ,CAAC4B,aAAT,CAAuB3B,cAAvB;AACA,OAAO,IAAM4B,IAAI,GAAG7B,QAAQ,CAAC6B,IAAT,EAAb;AACP,OAAO,IAAMhB,SAAS,GAAGb,QAAQ,CAACa,SAAT,EAAlB","sourcesContent":["import firebase from \"firebase/app\";\nimport \"firebase/auth\";\nimport \"firebase/firestore\";\n\n\n\nvar firebaseConfig = {\n    apiKey: \"AIzaSyCql3WejPAHHcghWycqGHEsWZlEZpH6I7k\",\n    authDomain: \"watercooler-be436.firebaseapp.com\",\n    databaseURL: \"https://watercooler-be436-default-rtdb.firebaseio.com\",\n    projectId: \"watercooler-be436\",\n    storageBucket: \"watercooler-be436.appspot.com\",\n    messagingSenderId: \"272854258776\",\n    appId: \"1:272854258776:web:779aeb179160242c53662d\"\n  };\n\nexport const generateUserDocument = async (user, additionalData) => {\n    if(!user) return;\n    const userRef = firestore.doc(`users/${user.uid}`);\n    const snapshot = await userRef.get();\n    if(!snapshot.exists) {\n        const { email, firstName, lastName} = user;\n        try { \n            await userRef.set({\n                firstName,\n                lastName, \n                email, \n                ...additionalData\n            });\n        } catch (error) {\n            console.error(\"uh oh, there was an error in creating a user docuemnt\", error);\n        }\n    }\n    return getUserDocument(user.uid);\n};\nconst getUserDocument = async uid => {\n    if (!uid) return null;\n    try {\n        const userDocument = await firestore.doc(`users/${uid}`).get();\n        return {\n            uid, \n            ...userDocument.data()\n        };\n    } catch (error) {\n        console.error(\"whoops couldn't fetch the user\", error);\n    }\n};\n\nfirebase.initializeApp(firebaseConfig);\nexport const auth = firebase.auth();\nexport const firestore = firebase.firestore();"]},"metadata":{},"sourceType":"module"}