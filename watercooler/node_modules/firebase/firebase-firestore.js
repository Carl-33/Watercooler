!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(require("@firebase/app")):"function"==typeof define&&define.amd?define(["@firebase/app"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).firebase)}(this,function(sg){"use strict";try{(function(){function t(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var l,e=t(sg),r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function n(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function y(t,s,u,a){return new(u=u||Promise)(function(n,e){function r(t){try{o(a.next(t))}catch(t){e(t)}}function i(t){try{o(a.throw(t))}catch(t){e(t)}}function o(t){var e;t.done?n(t.value):((e=t.value)instanceof u?e:new u(function(t){t(e)})).then(r,i)}o((a=a.apply(t,s||[])).next())})}function v(n,r){var i,o,s,u={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},t={next:e(0),throw:e(1),return:e(2)};return"function"==typeof Symbol&&(t[Symbol.iterator]=function(){return this}),t;function e(e){return function(t){return function(e){if(i)throw new TypeError("Generator is already executing.");for(;u;)try{if(i=1,o&&(s=2&e[0]?o.return:e[0]?o.throw||((s=o.return)&&s.call(o),0):o.next)&&!(s=s.call(o,e[1])).done)return s;switch(o=0,s&&(e=[2&e[0],s.value]),e[0]){case 0:case 1:s=e;break;case 4:return u.label++,{value:e[1],done:!1};case 5:u.label++,o=e[1],e=[0];continue;case 7:e=u.ops.pop(),u.trys.pop();continue;default:if(!(s=0<(s=u.trys).length&&s[s.length-1])&&(6===e[0]||2===e[0])){u=0;continue}if(3===e[0]&&(!s||e[1]>s[0]&&e[1]<s[3])){u.label=e[1];break}if(6===e[0]&&u.label<s[1]){u.label=s[1],s=e;break}if(s&&u.label<s[2]){u.label=s[2],u.ops.push(e);break}s[2]&&u.ops.pop(),u.trys.pop();continue}e=r.call(n,u)}catch(t){e=[6,t],o=0}finally{i=s=0}if(5&e[0])throw e[1];return{value:e[0]?e[1]:void 0,done:!0}}([e,t])}}}function s(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}function u(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;for(var r=Array(t),i=0,e=0;e<n;e++)for(var o=arguments[e],s=0,u=o.length;s<u;s++,i++)r[i]=o[s];return r}(Ie=l=l||{})[Ie.DEBUG=0]="DEBUG",Ie[Ie.VERBOSE=1]="VERBOSE",Ie[Ie.INFO=2]="INFO",Ie[Ie.WARN=3]="WARN",Ie[Ie.ERROR=4]="ERROR",Ie[Ie.SILENT=5]="SILENT";function i(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(!(e<t.logLevel)){var i=(new Date).toISOString(),o=c[e];if(!o)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[o].apply(console,u(["["+i+"]  "+t.name+":"],n))}}var o={debug:l.DEBUG,verbose:l.VERBOSE,info:l.INFO,warn:l.WARN,error:l.ERROR,silent:l.SILENT},a=l.INFO,c=((Ee={})[l.DEBUG]="log",Ee[l.VERBOSE]="log",Ee[l.INFO]="info",Ee[l.WARN]="warn",Ee[l.ERROR]="error",Ee),h=(Object.defineProperty(f.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in l))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),f.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?o[t]:t},Object.defineProperty(f.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(f.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),f.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,u([this,l.DEBUG],t)),this._logHandler.apply(this,u([this,l.DEBUG],t))},f.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,u([this,l.VERBOSE],t)),this._logHandler.apply(this,u([this,l.VERBOSE],t))},f.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,u([this,l.INFO],t)),this._logHandler.apply(this,u([this,l.INFO],t))},f.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,u([this,l.WARN],t)),this._logHandler.apply(this,u([this,l.WARN],t))},f.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,u([this,l.ERROR],t)),this._logHandler.apply(this,u([this,l.ERROR],t))},f);function f(t){this.name=t,this._logLevel=a,this._logHandler=i,this._userLogHandler=null}function p(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}var d,g="FirebaseError",m=(n(w,d=Error),w);function w(t,e,n){e=d.call(this,e)||this;return e.code=t,e.customData=n,e.name=g,Object.setPrototypeOf(e,w.prototype),Error.captureStackTrace&&Error.captureStackTrace(e,b.prototype.create),e}var b=(_.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r,i=e[0]||{},o=this.service+"/"+t,t=this.errors[t],t=t?(r=i,t.replace(I,function(t,e){var n=r[e];return null!=n?String(n):"<"+e+"?>"})):"Error",t=this.serviceName+": "+t+" ("+o+").";return new m(o,t,i)},_);function _(t,e,n){this.service=t,this.serviceName=e,this.errors=n}var I=/\{\$([^}]+)}/g,E=function(t,e){return(E=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function T(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var A,N="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},D={},S=N||self;function O(){}function x(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function k(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var P="closure_uid_"+(1e9*Math.random()>>>0),R=0;function L(t,e,n){return t.call.apply(t.bind,arguments)}function C(e,n,t){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var t=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(t,r),e.apply(n,t)}}return function(){return e.apply(n,arguments)}}function M(t,e,n){return(M=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?L:C).apply(null,arguments)}function V(e){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function U(){return Date.now()}function q(t,o){function e(){}e.prototype=o.prototype,t.X=o.prototype,t.prototype=new e,(t.prototype.constructor=t).Kb=function(t,e,n){for(var r=Array(arguments.length-2),i=2;i<arguments.length;i++)r[i-2]=arguments[i];return o.prototype[e].apply(t,r)}}function j(){this.j=this.j,this.i=this.i}j.prototype.j=!1,j.prototype.ja=function(){var t;!this.j&&(this.j=!0,this.G(),0)&&(t=this,Object.prototype.hasOwnProperty.call(t,P)&&t[P]||(t[P]=++R))},j.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var F=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},B=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function z(){return Array.prototype.concat.apply([],arguments)}function G(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function K(t){return/^[\s\xa0]*$/.test(t)}var W,H=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Q(t,e){return-1!=t.indexOf(e)}function $(t,e){return t<e?-1:e<t?1:0}t:{var Y=S.navigator;if(Y){Y=Y.userAgent;if(Y){W=Y;break t}}W=""}function X(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function J(t){var e,n={};for(e in t)n[e]=t[e];return n}var Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function tt(t){for(var e,n,r=1;r<arguments.length;r++){for(e in n=arguments[r])t[e]=n[e];for(var i=0;i<Z.length;i++)e=Z[i],Object.prototype.hasOwnProperty.call(n,e)&&(t[e]=n[e])}}function et(t){return et[" "](t),t}et[" "]=O;var nt,rt=Q(W,"Opera"),it=Q(W,"Trident")||Q(W,"MSIE"),ot=Q(W,"Edge"),st=ot||it,ut=Q(W,"Gecko")&&!(Q(W.toLowerCase(),"webkit")&&!Q(W,"Edge"))&&!(Q(W,"Trident")||Q(W,"MSIE"))&&!Q(W,"Edge"),at=Q(W.toLowerCase(),"webkit")&&!Q(W,"Edge");function ct(){var t=S.document;return t?t.documentMode:void 0}t:{var ht="",ft=(ft=W,ut?/rv:([^\);]+)(\)|;)/.exec(ft):ot?/Edge\/([\d\.]+)/.exec(ft):it?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(ft):at?/WebKit\/(\S+)/.exec(ft):rt?/(?:Version)[ \/]?(\S+)/.exec(ft):void 0);if(ft&&(ht=ft?ft[1]:""),it){ft=ct();if(null!=ft&&ft>parseFloat(ht)){nt=String(ft);break t}}nt=ht}var lt={};function pt(u){return t=u,e=function(){for(var t=0,e=H(String(nt)).split("."),n=H(String(u)).split("."),r=Math.max(e.length,n.length),i=0;0==t&&i<r;i++){var o=e[i]||"",s=n[i]||"";do{if(o=/(\d*)(\D*)(.*)/.exec(o)||["","","",""],s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],0==o[0].length&&0==s[0].length)break;t=$(0==o[1].length?0:parseInt(o[1],10),0==s[1].length?0:parseInt(s[1],10))||$(0==o[2].length,0==s[2].length)||$(o[2],s[2]),o=o[3],s=s[3]}while(0==t)}return 0<=t},n=lt,Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t);var t,e,n}var dt=S.document&&it?ct()||(parseInt(nt,10)||void 0):void 0,yt=!it||9<=Number(dt),vt=it&&!pt("9"),gt=function(){if(!S.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{S.addEventListener("test",O,e),S.removeEventListener("test",O,e)}catch(t){}return t}();function mt(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function wt(t,e){if(mt.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(ut){t:{try{et(e.nodeName);var i=!0;break t}catch(t){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:bt[t.pointerType]||"",(this.c=t).defaultPrevented&&this.b()}}mt.prototype.b=function(){this.defaultPrevented=!0},q(wt,mt);var bt={2:"touch",3:"pen",4:"mouse"};wt.prototype.b=function(){wt.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,vt)try{(t.ctrlKey||112<=t.keyCode&&t.keyCode<=123)&&(t.keyCode=-1)}catch(t){}};var _t="closure_listenable_"+(1e6*Math.random()|0),It=0;function Et(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++It,this.Y=this.Z=!1}function Tt(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function At(t){this.src=t,this.a={},this.b=0}function Nt(t,e){var n,r,i,o=e.type;o in t.a&&(n=t.a[o],(i=0<=(r=F(n,e)))&&Array.prototype.splice.call(n,r,1),i&&(Tt(e),0==t.a[o].length&&(delete t.a[o],t.b--)))}function Dt(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}At.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=Dt(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new Et(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var St="closure_lm_"+(1e6*Math.random()|0),Ot={};function xt(t,e,n,r,i){if(r&&r.once)return function t(e,n,r,i,o){if(Array.isArray(n)){for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);return null}r=Ut(r);return e&&e[_t]?e.wa(n,r,k(i)?!!i.capture:!!i,o):kt(e,n,r,!0,i,o)}(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)xt(t,e[o],n,r,i);return null}return n=Ut(n),t&&t[_t]?t.va(e,n,k(r)?!!r.capture:!!r,i):kt(t,e,n,!1,r,i)}function kt(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=k(i)?!!i.capture:!!i;if(s&&!yt)return null;var u,a,c=Mt(t);if(c||(t[St]=c=new At(t)),(n=c.add(e,n,r,s,o)).proxy)return n;if(u=Ct,r=a=yt?function(t){return u.call(a.src,a.listener,t)}:function(t){if(!(t=u.call(a.src,a.listener,t)))return t},(n.proxy=r).src=t,r.listener=n,t.addEventListener)gt||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Rt(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Pt(t){var e,n,r;"number"!=typeof t&&t&&!t.Y&&((e=t.src)&&e[_t]?Nt(e.c,t):(n=t.type,r=t.proxy,e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Rt(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Mt(e))?(Nt(n,t),0==n.b&&(n.src=null,e[St]=null)):Tt(t)))}function Rt(t){return t in Ot?Ot[t]:Ot[t]="on"+t}function Lt(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Pt(t),n.call(r,e)}function Ct(t,e){if(t.Y)return!0;if(yt)return Lt(t,new wt(e,this));if(!e)t:{e=["window","event"];for(var n=S,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return Lt(t,e=new wt(e,this))}function Mt(t){return(t=t[St])instanceof At?t:null}var Vt="__closure_events_fn_"+(1e9*Math.random()>>>0);function Ut(e){return"function"==typeof e?e:(e[Vt]||(e[Vt]=function(t){return e.handleEvent(t)}),e[Vt])}function qt(){j.call(this),this.c=new At(this),(this.J=this).C=null}function jt(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e?e=new mt(e,t):e instanceof mt?e.target=e.target||t:(s=e,tt(e=new mt(r,t),s)),s=!0,n)for(var i=n.length-1;0<=i;i--)var o=e.a=n[i],s=Ft(o,r,!0,e)&&s;if(s=Ft(o=e.a=t,r,!0,e)&&s,s=Ft(o,r,!1,e)&&s,n)for(i=0;i<n.length;i++)s=Ft(o=e.a=n[i],r,!1,e)&&s}function Ft(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s,u,a=e[o];a&&!a.Y&&a.capture==n&&(s=a.listener,u=a.ca||a.src,a.Z&&Nt(t.c,a),i=!1!==s.call(u,r)&&i)}return i&&!r.defaultPrevented}q(qt,j),qt.prototype[_t]=!0,(A=qt.prototype).addEventListener=function(t,e,n,r){xt(this,t,e,n,r)},A.removeEventListener=function(t,e,n,r){!function t(e,n,r,i,o){if(Array.isArray(n))for(var s=0;s<n.length;s++)t(e,n[s],r,i,o);else i=k(i)?!!i.capture:!!i,r=Ut(r),e&&e[_t]?(e=e.c,(n=String(n).toString())in e.a&&-1<(r=Dt(s=e.a[n],r,i,o))&&(Tt(s[r]),Array.prototype.splice.call(s,r,1),0==s.length&&(delete e.a[n],e.b--))):(e=e&&Mt(e))&&(n=e.a[n.toString()],e=-1,n&&(e=Dt(n,r,i,o)),(r=-1<e?n[e]:null)&&Pt(r))}(this,t,e,n,r)},A.G=function(){if(qt.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Tt(n[r]);delete e.a[t],e.b--}}this.C=null},A.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},A.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Bt=S.JSON.stringify;function zt(){this.b=this.a=null}var Gt,Kt=(Wt.prototype.get=function(){var t;return 0<this.b?(this.b--,t=this.a,this.a=t.next,t.next=null):t=this.c(),t},new Wt(function(){return new Ht},function(t){t.reset()}));function Wt(t,e){this.c=t,this.f=e,this.b=0,this.a=null}function Ht(){this.next=this.b=this.a=null}function Qt(t,e){var n;Gt||(n=S.Promise.resolve(void 0),Gt=function(){n.then(Xt)}),$t||(Gt(),$t=!0),Yt.add(t,e)}zt.prototype.add=function(t,e){var n=Kt.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},Ht.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null};var $t=!(Ht.prototype.reset=function(){this.next=this.b=this.a=null}),Yt=new zt;function Xt(){for(var t,e;n=e=void 0,n=null,(e=Yt).a&&(n=e.a,e.a=e.a.next,e.a||(e.b=null),n.next=null),t=n;){try{t.a.call(t.b)}catch(t){!function(t){S.setTimeout(function(){throw t},0)}(t)}var n=Kt;n.f(t),n.b<100&&(n.b++,t.next=n.a,n.a=t)}$t=!1}function Jt(t,e){qt.call(this),this.b=t||1,this.a=e||S,this.f=M(this.Za,this),this.g=U()}function Zt(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function te(t,e,n){if("function"==typeof t)n&&(t=M(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=M(t.handleEvent,t)}return 2147483647<Number(e)?-1:S.setTimeout(t,e||0)}q(Jt,qt),(A=Jt.prototype).aa=!1,A.M=null,A.Za=function(){var t;this.aa&&(0<(t=U()-this.g)&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),jt(this,"tick"),this.aa&&(Zt(this),this.start())))},A.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=U())},A.G=function(){Jt.X.G.call(this),Zt(this),delete this.a};var ee,ne,re,ie=(E(ne=se,re=ee=j),ne.prototype=null===re?Object.create(re):(oe.prototype=re.prototype,new oe),se.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:function t(e){e.a=te(function(){e.a=null,e.c&&(e.c=!1,t(e))},e.h);var n=e.b;e.b=null,e.g.apply(null,n)}(this)},se.prototype.G=function(){ee.prototype.G.call(this),this.a&&(S.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},se);function oe(){this.constructor=ne}function se(t,e){var n=ee.call(this)||this;return n.g=t,n.h=e,n.b=null,n.c=!1,n.a=null,n}function ue(t){j.call(this),this.b=t,this.a={}}q(ue,j);var ae=[];function ce(t,e,n,r){Array.isArray(n)||(n&&(ae[0]=n.toString()),n=ae);for(var i=0;i<n.length;i++){var o=xt(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function he(t){X(t.a,function(t,e){this.a.hasOwnProperty(e)&&Pt(t)},t),t.a={}}function fe(){this.a=!0}function le(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(r.length<2)){var i=r[1];if(Array.isArray(i)&&!(i.length<1)){r=i[0];if("noop"!=r&&"stop"!=r&&"close"!=r)for(var o=1;o<i.length;o++)i[o]=""}}}return Bt(n)}catch(t){return e}}(t,n)+(r?" "+r:"")})}ue.prototype.G=function(){ue.X.G.call(this),he(this)},ue.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},fe.prototype.info=function(){};var pe={},de=null;function ye(){return de=de||new qt}function ve(t){mt.call(this,pe.Fa,t)}function ge(t){var e=ye();jt(e,new ve(e))}function me(t,e){mt.call(this,pe.STAT_EVENT,t),this.stat=e}function we(t){var e=ye();jt(e,new me(e,t))}function be(t){mt.call(this,pe.Ga,t)}function _e(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return S.setTimeout(function(){t()},e)}pe.Fa="serverreachability",q(ve,mt),pe.STAT_EVENT="statevent",q(me,mt),pe.Ga="timingevent",q(be,mt);var Ie={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Ee={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function Te(){}function Ae(t){var e;return(e=t.a)||(e=t.a={}),e}function Ne(){}Te.prototype.a=null;var De,N={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Se(){mt.call(this,"d")}function Oe(){mt.call(this,"c")}function xe(){}function ke(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new ue(this),this.P=Pe,t=st?125:void 0,this.R=new Jt(t),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}q(Se,mt),q(Oe,mt),q(xe,Te),De=new xe;var Pe=45e3,Re={},Le={};function Ce(t,e,n){t.H=1,t.i=nn(Ye(e)),t.j=n,t.I=!0,Me(t,null)}function Me(t,e){t.u=U(),Ue(t),t.l=Ye(t.i);var s,u,a,c,h,f,n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),vn(n.b,"t",r),t.D=0,t.a=cr(t.g,t.g.C?e:null),0<t.O&&(t.F=new ie(M(t.Ca,t,t.a),t.O)),ce(t.J,t.a,"readystatechange",t.Xa),e=t.B?J(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),ge(1),s=t.c,u=t.m,a=t.l,c=t.f,h=t.S,f=t.j,s.info(function(){if(s.a)if(f)for(var t="",e=f.split("&"),n=0;n<e.length;n++){var r,i,o=e[n].split("=");1<o.length&&(r=o[0],o=o[1],t=2<=(i=r.split("_")).length&&"type"==i[1]?t+(r+"=")+o+"&":t+(r+"=redacted&"))}else t=null;else t=f;return"XMLHTTP REQ ("+c+") [attempt "+h+"]: "+u+"\n"+a+"\n"+t})}function Ve(t,e,n){for(var r,i,o,s=!0;!t.A&&t.D<n.length;){var u=(u=n,o=i=void 0,i=(r=t).D,-1==(o=u.indexOf("\n",i))?Le:(i=Number(u.substring(i,o)),isNaN(i)?Re:(o+=1)+i>u.length?Le:(u=u.substr(o,i),r.D=o+i,u)));if(u==Le){4==e&&(t.h=4,we(14),s=!1),le(t.c,t.f,null,"[Incomplete Response]");break}if(u==Re){t.h=4,we(15),le(t.c,t.f,n,"[Invalid Chunk]"),s=!1;break}le(t.c,t.f,u,null),ze(t,u)}4==e&&0==n.length&&(t.h=1,we(16),s=!1),t.b=t.b&&s,s?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),er(e),e.F=!0,we(11))):(le(t.c,t.f,n,"[Invalid Chunked Response]"),Be(t),Fe(t))}function Ue(t){t.T=U()+t.P,qe(t,t.P)}function qe(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=_e(M(t.Va,t),e)}function je(t){t.o&&(S.clearTimeout(t.o),t.o=null)}function Fe(t){0==t.g.v||t.A||ir(t.g,t)}function Be(t){je(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,Zt(t.R),he(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function ze(t,e){try{var n,r,i,o,s,u=t.g;if(0!=u.v&&(u.a==t||En(u.b,t)))if(u.I=t.N,!t.C&&En(u.b,t)&&3==u.v){try{var a=u.ka.a.parse(e)}catch(t){a=null}if(Array.isArray(a)&&3==a.length){var c=a;if(0==c[0]){t:if(!u.j){if(u.a){if(!(u.a.u+3e3<t.u))break t;rr(u),Wn(u)}tr(u),we(18)}}else u.oa=c[1],0<u.oa-u.P&&c[2]<37500&&u.H&&0==u.o&&!u.m&&(u.m=_e(M(u.Sa,u),6e3));if(In(u.b)<=1&&u.ea){try{u.ea()}catch(t){}u.ea=void 0}}else sr(u,11)}else if(!t.C&&u.a!=t||rr(u),!K(e))for(e=a=u.ka.a.parse(e),a=0;a<e.length;a++){c=e[a],u.P=c[0],c=c[1],2==u.v?"c"==c[0]?(u.J=c[1],u.ga=c[2],null!=(r=c[3])&&(u.ha=r,u.c.info("VER="+u.ha)),null!=(o=c[4])&&(u.pa=o,u.c.info("SVER="+u.pa)),null!=(r=c[5])&&"number"==typeof r&&0<r&&(n=1.5*r,u.D=n,u.c.info("backChannelRequestTimeoutMs_="+n)),n=u,(o=t.a)&&(!(r=o.a?o.a.getResponseHeader("X-Client-Wire-Protocol"):null)||!(i=n.b).a&&(Q(r,"spdy")||Q(r,"quic")||Q(r,"h2"))&&(i.f=i.g,i.a=new Set,i.b&&(Tn(i,i.b),i.b=null)),!n.A||(s=o.a?o.a.getResponseHeader("X-HTTP-Session-Id"):null)&&(n.na=s,en(n.B,n.A,s))),u.v=3,u.f&&u.f.ta(),u.U&&(u.N=U()-t.u,u.c.info("Handshake RTT: "+u.N+"ms")),i=t,(n=u).la=ar(n,n.C?n.ga:null,n.fa),i.C?(An(n.b,i),o=i,(s=n.D)&&o.setTimeout(s),o.o&&(je(o),Ue(o)),n.a=i):Zn(n),0<u.g.length&&$n(u)):"stop"!=c[0]&&"close"!=c[0]||sr(u,7):3==u.v&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?sr(u,7):Kn(u):"noop"!=c[0]&&u.f&&u.f.sa(c),u.o=0)}ge(4)}catch(t){}}function Ge(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(x(t)||"string"==typeof t)B(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(x(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(x(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Ke(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Ke)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function We(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];He(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){for(var i={},n=e=0;e<t.a.length;)He(i,r=t.a[e])||(i[t.a[n++]=r]=1),e++;t.a.length=n}}function He(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(A=ke.prototype).setTimeout=function(t){this.P=t},A.Xa=function(t){t=t.target;var e=this.F;e&&3==Fn(t)?e.f():this.Ca(t)},A.Ca=function(t){try{if(t==this.a)t:{var e=Fn(this.a),n=this.a.ua(),r=this.a.W();if(!(e<3||3==e&&!st&&!this.a.$())){this.A||4!=e||7==n||ge(8==n||r<=0?3:2),je(this);var i=this.a.W();this.N=i;n=this.a.$();if(this.b=200==i,r=this.c,u=this.m,a=this.l,c=this.f,h=this.S,f=e,l=i,r.info(function(){return"XMLHTTP RESP ("+c+") [ attempt "+h+"]: "+u+"\n"+a+"\n"+f+" "+l}),this.b){if(this.U&&!this.C){e:{if(this.a){var o=this.a;if((o=o.a?o.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!K(o)){var s=o;break e}}s=null}if(!s){this.b=!1,this.h=3,we(12),Be(this),Fe(this);break t}le(this.c,this.f,s,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,ze(this,s)}this.I?(Ve(this,e,n),st&&this.b&&3==e&&(ce(this.J,this.R,"tick",this.Wa),this.R.start())):(le(this.c,this.f,n,null),ze(this,n)),4==e&&Be(this),this.b&&!this.A&&(4==e?ir(this.g,this):(this.b=!1,Ue(this)))}else 400==i&&0<n.indexOf("Unknown SID")?(this.h=3,we(12)):(this.h=0,we(13)),Be(this),Fe(this)}}}catch(t){}var u,a,c,h,f,l},A.Wa=function(){var t,e;this.a&&(t=Fn(this.a),e=this.a.$(),this.D<e.length&&(je(this),Ve(this,t,e),this.b&&4!=t&&Ue(this)))},A.cancel=function(){this.A=!0,Be(this)},A.Va=function(){this.o=null;var t,e,n=U();0<=n-this.T?(t=this.c,e=this.l,t.info(function(){return"TIMEOUT: "+e}),2!=this.H&&(ge(3),we(17)),Be(this),this.h=2,Fe(this)):qe(this,this.T-n)},(A=Ke.prototype).K=function(){We(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},A.L=function(){return We(this),this.a.concat()},A.get=function(t,e){return He(this.b,t)?this.b[t]:e},A.set=function(t,e){He(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},A.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Qe=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function $e(t,e){var n;this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof $e?(this.a=void 0!==e?e:t.a,Xe(this,t.f),this.j=t.j,Je(this,t.c),Ze(this,t.h),this.g=t.g,e=t.b,(n=new ln).c=e.c,e.a&&(n.a=new Ke(e.a),n.b=e.b),tn(this,n),this.i=t.i):t&&(n=String(t).match(Qe))?(this.a=!!e,Xe(this,n[1]||"",!0),this.j=rn(n[2]||""),Je(this,n[3]||"",!0),Ze(this,n[4]),this.g=rn(n[5]||"",!0),tn(this,n[6]||"",!0),this.i=rn(n[7]||"")):(this.a=!!e,this.b=new ln(null,this.a))}function Ye(t){return new $e(t)}function Xe(t,e,n){t.f=n?rn(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function Je(t,e,n){t.c=n?rn(e,!0):e}function Ze(t,e){if(e){if(e=Number(e),isNaN(e)||e<0)throw Error("Bad port number "+e);t.h=e}else t.h=null}function tn(t,e,n){var r,i;e instanceof ln?(t.b=e,r=t.b,(i=t.a)&&!r.f&&(pn(r),r.c=null,r.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(dn(this,e),vn(this,n,t))},r)),r.f=i):(n||(e=on(e,hn)),t.b=new ln(e,t.a))}function en(t,e,n){t.b.set(e,n)}function nn(t){return en(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^U()).toString(36)),t}function rn(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function on(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,sn),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function sn(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}$e.prototype.toString=function(){var t=[],e=this.f;e&&t.push(on(e,un,!0),":");var n=this.c;return!n&&"file"!=e||(t.push("//"),(e=this.j)&&t.push(on(e,un,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(on(n,"/"==n.charAt(0)?cn:an,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",on(n,fn)),t.join("")};var un=/[#\/\?@]/g,an=/[#\?:]/g,cn=/[#\?]/g,hn=/[#\?@]/g,fn=/#/g;function ln(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function pn(n){n.a||(n.a=new Ke,n.b=0,n.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r,i=t[n].indexOf("="),o=null;0<=i?(r=t[n].substring(0,i),o=t[n].substring(i+1)):r=t[n],e(r,o?decodeURIComponent(o.replace(/\+/g," ")):"")}}}(n.c,function(t,e){n.add(decodeURIComponent(t.replace(/\+/g," ")),e)}))}function dn(t,e){pn(t),e=gn(t,e),He(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,He((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&We(t)))}function yn(t,e){return pn(t),e=gn(t,e),He(t.a.b,e)}function vn(t,e,n){dn(t,e),0<n.length&&(t.c=null,t.a.set(gn(t,e),G(n)),t.b+=n.length)}function gn(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(A=ln.prototype).add=function(t,e){pn(this),this.c=null,t=gn(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},A.forEach=function(n,r){pn(this),this.a.forEach(function(t,e){B(t,function(t){n.call(r,t,e,this)},this)},this)},A.L=function(){pn(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},A.K=function(t){pn(this);var e=[];if("string"==typeof t)yn(this,t)&&(e=z(e,this.a.get(gn(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=z(e,t[n])}return e},A.set=function(t,e){return pn(this),this.c=null,yn(this,t=gn(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},A.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},A.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++)for(var r=e[n],i=encodeURIComponent(String(r)),r=this.K(r),o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}return this.c=t.join("&")};var mn=function(t,e){this.b=t,this.a=e};function wn(t){this.g=t||bn,t=S.PerformanceNavigationTiming?0<(t=S.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(S.ia&&S.ia.ya&&S.ia.ya()&&S.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var bn=10;function _n(t){return t.b||t.a&&t.a.size>=t.f}function In(t){return t.b?1:t.a?t.a.size:0}function En(t,e){return t.b?t.b==e:t.a&&t.a.has(e)}function Tn(t,e){t.a?t.a.add(e):t.b=e}function An(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function Nn(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null==t.a||0===t.a.size)return G(t.c);var r=t.c;try{for(var i=T(t.a.values()),o=i.next();!o.done;o=i.next())var s=o.value,r=r.concat(s.s)}catch(t){e={error:t}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}function Dn(){}function Sn(){this.a=new Dn}function On(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(t){}}wn.prototype.cancel=function(){var e,t;if(this.c=Nn(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=T(this.a.values()),r=n.next();!r.done;r=n.next()){r.value.cancel()}}catch(t){e={error:t}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(e)throw e.error}}this.a.clear()}},Dn.prototype.stringify=function(t){return S.JSON.stringify(t,void 0)},Dn.prototype.parse=function(t){return S.JSON.parse(t,void 0)};var xn=S.JSON.parse;function kn(t){qt.call(this),this.headers=new Ke,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Pn,this.D=this.F=!1}q(kn,qt);var Pn="",Rn=/^https?$/i,Ln=["POST","PUT"];function Cn(t){return"content-type"==t.toLowerCase()}function Mn(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Vn(t),qn(t)}function Vn(t){t.u||(t.u=!0,jt(t,"complete"),jt(t,"error"))}function Un(t){if(t.b&&void 0!==D&&(!t.s[1]||4!=Fn(t)||2!=t.W()))if(t.l&&4==Fn(t))te(t.za,0,t);else if(jt(t,"readystatechange"),4==Fn(t)){t.b=!1;try{var e,n,r,i,o=t.W();t:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var s=!0;break t;default:s=!1}(e=s)||((n=0===o)&&(!(i=String(t.B).match(Qe)[1]||null)&&S.self&&S.self.location&&(i=(r=S.self.location.protocol).substr(0,r.length-1)),n=!Rn.test(i?i.toLowerCase():"")),e=n);if(e)jt(t,"complete"),jt(t,"success");else{t.h=6;try{var u=2<Fn(t)?t.a.statusText:""}catch(o){u=""}t.f=u+" ["+t.W()+"]",Vn(t)}}finally{qn(t)}}}function qn(t,e){if(t.a){jn(t);var n=t.a,r=t.s[0]?O:null;t.a=null,t.s=null,e||jt(t,"ready");try{n.onreadystatechange=r}catch(t){}}}function jn(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(S.clearTimeout(t.m),t.m=null)}function Fn(t){return t.a?t.a.readyState:0}function Bn(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}var i;r||(i="",X(n,function(t,e){i+=e,i+=":",i+=t,i+="\r\n"}),n=i,"string"==typeof t?null!=n&&encodeURIComponent(String(n)):en(t,e,n))}function zn(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Gn(t){this.pa=0,this.g=[],this.c=new fe,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=zn("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=zn("baseRetryDelayMs",5e3,t),this.Ra=zn("retryDelaySeedMs",1e4,t),this.Ma=zn("forwardChannelMaxRetries",2,t),this.ma=zn("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new wn(t&&t.concurrentRequestLimit),this.ka=new Sn,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Kn(t){var e,n;Hn(t),3==t.v&&(e=t.R++,en(n=Ye(t.B),"SID",t.J),en(n,"RID",e),en(n,"TYPE","terminate"),Xn(t,n),(e=new ke(t,t.c,e,void 0)).H=2,e.i=nn(Ye(n)),n=!1,S.navigator&&S.navigator.sendBeacon&&(n=S.navigator.sendBeacon(e.i.toString(),"")),!n&&S.Image&&((new Image).src=e.i,n=!0),n||(e.a=cr(e.g,null),e.a.ba(e.i)),e.u=U(),Ue(e)),ur(t)}function Wn(t){t.a&&(er(t),t.a.cancel(),t.a=null)}function Hn(t){Wn(t),t.j&&(S.clearTimeout(t.j),t.j=null),rr(t),t.b.cancel(),t.h&&("number"==typeof t.h&&S.clearTimeout(t.h),t.h=null)}function Qn(t,e){t.g.push(new mn(t.Oa++,e)),3==t.v&&$n(t)}function $n(t){_n(t.b)||t.h||(t.h=!0,Qt(t.Ba,t),t.u=0)}function Yn(t,e){var n=e?e.f:t.R++,r=Ye(t.B);en(r,"SID",t.J),en(r,"RID",n),en(r,"AID",t.P),Xn(t,r),t.i&&t.l&&Bn(r,t.i,t.l),n=new ke(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=Jn(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),Tn(t.b,n),Ce(n,r,e)}function Xn(t,n){t.f&&Ge({},function(t,e){en(n,e,t)})}function Jn(t,e,n){n=Math.min(t.g.length,n);var r=t.f?M(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?(o=i[0].b,s.push("ofs="+o)):o=0:s.push("ofs="+o);for(var u=!0,a=0;a<n;a++){var c=i[a].b,h=i[a].a;if((c-=o)<0)o=Math.max(0,i[a].b-100),u=!1;else try{!function(t,r,e){var i=e||"";try{Ge(t,function(t,e){var n=t;k(t)&&(n=Bt(t)),r.push(i+e+"="+encodeURIComponent(n))})}catch(t){throw r.push(i+"type="+encodeURIComponent("_badmap")),t}}(h,s,"req"+c+"_")}catch(t){r&&r(h)}}if(u){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function Zn(t){t.a||t.j||(t.T=1,Qt(t.Aa,t),t.o=0)}function tr(t){return!(t.a||t.j||3<=t.o)&&(t.T++,t.j=_e(M(t.Aa,t),or(t,t.o)),t.o++,1)}function er(t){null!=t.s&&(S.clearTimeout(t.s),t.s=null)}function nr(t){t.a=new ke(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=Ye(t.la);en(e,"RID","rpc"),en(e,"SID",t.J),en(e,"CI",t.H?"0":"1"),en(e,"AID",t.P),Xn(t,e),en(e,"TYPE","xmlhttp"),t.i&&t.l&&Bn(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=nn(Ye(e)),n.j=null,n.I=!0,Me(n,t)}function rr(t){null!=t.m&&(S.clearTimeout(t.m),t.m=null)}function ir(t,e){var n,r=null;if(t.a==e){rr(t),er(t),t.a=null;var i=2}else{if(!En(t.b,e))return;r=e.s,An(t.b,e),i=1}if(t.I=e.N,0!=t.v)if(e.b){1==i?(r=e.j?e.j.length:0,e=U()-e.u,n=t.u,jt(i=ye(),new be(i)),$n(t)):Zn(t)}else if(3==(n=e.h)||0==n&&0<t.I||!(1==i&&function(t,e){if(!(In(t.b)>=t.b.f-(t.h?1:0))){if(t.h)return t.g=e.s.concat(t.g),1;if(!(1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)))return t.h=_e(M(t.Ba,t,e),or(t,t.u)),t.u++,1}}(t,e)||2==i&&tr(t)))switch(r&&0<r.length&&(e=t.b,e.c=e.c.concat(r)),n){case 1:sr(t,5);break;case 4:sr(t,10);break;case 3:sr(t,6);break;default:sr(t,2)}}function or(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function sr(t,e){var n,r,i,o;t.c.info("Error code "+e),2==e?(r=null,t.f&&(r=null),o=M(t.Ya,t),r||(r=new $e("//www.google.com/images/cleardot.gif"),S.location&&"http"==S.location.protocol||Xe(r,"https"),nn(r)),n=r.toString(),r=o,o=new fe,S.Image?((i=new Image).onload=V(On,o,i,"TestLoadImage: loaded",!0,r),i.onerror=V(On,o,i,"TestLoadImage: error",!1,r),i.onabort=V(On,o,i,"TestLoadImage: abort",!1,r),i.ontimeout=V(On,o,i,"TestLoadImage: timeout",!1,r),S.setTimeout(function(){i.ontimeout&&i.ontimeout()},1e4),i.src=n):r(!1)):we(2),t.v=0,t.f&&t.f.ra(e),ur(t),Hn(t)}function ur(t){t.v=0,t.I=-1,t.f&&(0==Nn(t.b).length&&0==t.g.length||(t.b.c.length=0,G(t.g),t.g.length=0),t.f.qa())}function ar(t,e,n){var r,i,o,s,u,a=(s=n)instanceof $e?Ye(s):new $e(s,void 0);return""!=a.c?(e&&Je(a,e+"."+a.c),Ze(a,a.h)):(u=S.location,r=u.protocol,i=e?e+"."+u.hostname:u.hostname,o=+u.port,s=n,u=new $e(null,void 0),r&&Xe(u,r),i&&Je(u,i),o&&Ze(u,o),s&&(u.g=s),a=u),t.V&&X(t.V,function(t,e){en(a,e,t)}),e=t.A,n=t.na,e&&n&&en(a,e,n),en(a,"VER",t.ha),Xn(t,a),a}function cr(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new kn(t.Na)).F=t.C,e}function hr(){}function fr(){if(it&&!(10<=Number(dt)))throw Error("Environmental error: no available transport.")}function lr(t,e){qt.call(this),this.a=new Gn(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!K(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!K(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&(e in(t=this.b)&&delete t[e])),this.f=new yr(this)}function pr(t){Se.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function dr(){Oe.call(this),this.status=1}function yr(t){this.a=t}(A=kn.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=this.H?Ae(this.H):Ae(De),this.a.onreadystatechange=M(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(t){return void Mn(this,t)}t=n||"";var i,o=new Ke(this.headers);r&&Ge(r,function(t,e){o.set(e,t)}),r=function(t){t:{for(var e=Cn,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return e<0?null:"string"==typeof t?t.charAt(e):t[e]}(o.L()),n=S.FormData&&t instanceof S.FormData,0<=F(Ln,e)&&!r&&!n&&o.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),o.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{jn(this),0<this.o&&((this.D=(i=this.a,it&&pt(9)&&"number"==typeof i.timeout&&void 0!==i.ontimeout))?(this.a.timeout=this.o,this.a.ontimeout=M(this.xa,this)):this.m=te(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(t){Mn(this,t)}},A.xa=function(){void 0!==D&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,jt(this,"timeout"),this.abort(8))},A.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,jt(this,"complete"),jt(this,"abort"),qn(this))},A.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),qn(this,!0)),kn.X.G.call(this)},A.za=function(){this.j||(this.A||this.l||this.g?Un(this):this.Ua())},A.Ua=function(){Un(this)},A.W=function(){try{return 2<Fn(this)?this.a.status:-1}catch(t){return-1}},A.$=function(){try{return this.a?this.a.responseText:""}catch(t){return""}},A.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),xn(e)}},A.ua=function(){return this.h},A.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(A=Gn.prototype).ha=8,A.v=1,A.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new ke(this,this.c,t,void 0),r=this.l;if(this.O&&(r?tt(r=J(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if("__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o=o.length:o=void 0,void 0===o)break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=Jn(this,n,e),en(i=Ye(this.B),"RID",t),en(i,"CVER",22),this.A&&en(i,"X-HTTP-Session-Id",this.A),Xn(this,i),this.i&&r&&Bn(i,this.i,r),Tn(this.b,n),this.Ia&&en(i,"TYPE","init"),this.da?(en(i,"$req",e),en(i,"SID","null"),n.U=!0,Ce(n,i,null)):Ce(n,i,e),this.v=2}}else 3==this.v&&(t?Yn(this,t):0==this.g.length||_n(this.b)||Yn(this))},A.Aa=function(){var t;this.j=null,nr(this),this.U&&!(this.F||null==this.a||this.N<=0)&&(t=2*this.N,this.c.info("BP detection timer enabled: "+t),this.s=_e(M(this.Ta,this),t))},A.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,we(10),Wn(this),nr(this))},A.Sa=function(){null!=this.m&&(this.m=null,Wn(this),tr(this),we(19))},A.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),we(2)):(this.c.info("Failed to ping google.com"),we(1))},(A=hr.prototype).ta=function(){},A.sa=function(){},A.ra=function(){},A.qa=function(){},A.Ja=function(){},fr.prototype.a=function(t,e){return new lr(t,e)},q(lr,qt),lr.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;we(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=ar(t,null,t.fa),$n(t)},lr.prototype.close=function(){Kn(this.a)},lr.prototype.h=function(t){var e;"string"==typeof t?((e={}).__data__=t,Qn(this.a,e)):this.l?((e={}).__data__=Bt(t),Qn(this.a,e)):Qn(this.a,t)},lr.prototype.G=function(){this.a.f=null,delete this.f,Kn(this.a),delete this.a,lr.X.G.call(this)},q(pr,Se),q(dr,Oe),q(yr,hr),yr.prototype.ta=function(){jt(this.a,"a")},yr.prototype.sa=function(t){jt(this.a,new pr(t))},yr.prototype.ra=function(t){jt(this.a,new dr)},yr.prototype.qa=function(){jt(this.a,"b")},fr.prototype.createWebChannel=fr.prototype.a,lr.prototype.send=lr.prototype.h,lr.prototype.open=lr.prototype.g,Ie.NO_ERROR=0,Ie.TIMEOUT=8,Ie.HTTP_ERROR=6,Ee.COMPLETE="complete",(Ne.EventType=N).OPEN="a",N.CLOSE="b",N.ERROR="c",N.MESSAGE="d",qt.prototype.listen=qt.prototype.va,kn.prototype.listenOnce=kn.prototype.wa,kn.prototype.getLastError=kn.prototype.Qa,kn.prototype.getLastErrorCode=kn.prototype.ua,kn.prototype.getStatus=kn.prototype.W,kn.prototype.getResponseJson=kn.prototype.Pa,kn.prototype.getResponseText=kn.prototype.$,kn.prototype.send=kn.prototype.ba;var vr=ye,gr=Ie,mr=Ee,wr=pe,br=10,_r=11,Ir=Ne,Er=kn,Tr=(Ar.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},Ar.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},Ar.prototype.setServiceProps=function(t){return this.serviceProps=t,this},Ar);function Ar(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}var Nr=function(t,e,n,r,i,o){this.t=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.i=o},Dr=(Object.defineProperty(xr.prototype,"o",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),xr.prototype.isEqual=function(t){return t instanceof xr&&t.projectId===this.projectId&&t.database===this.database},xr),Sr=(Or.prototype.u=function(){return null!=this.uid},Or.prototype.h=function(){return this.u()?"uid:"+this.uid:"anonymous-user"},Or.prototype.isEqual=function(t){return t.uid===this.uid},Or);function Or(t){this.uid=t}function xr(t,e){this.projectId=t,this.database=e||"(default)"}Sr.UNAUTHENTICATED=new Sr(null),Sr.l=new Sr("google-credentials-uid"),Sr._=new Sr("first-party-uid");var kr=new h("@firebase/firestore");function Pr(){return kr.logLevel}function Rr(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];kr.logLevel<=l.DEBUG&&(e=n.map(Mr),kr.debug.apply(kr,s(["Firestore (8.1.2): "+t],e)))}function Lr(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];kr.logLevel<=l.ERROR&&(e=n.map(Mr),kr.error.apply(kr,s(["Firestore (8.1.2): "+t],e)))}function Cr(t){for(var e,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];kr.logLevel<=l.WARN&&(e=n.map(Mr),kr.warn.apply(kr,s(["Firestore (8.1.2): "+t],e)))}function Mr(e){if("string"==typeof e)return e;try{return JSON.stringify(e)}catch(t){return e}}function Vr(t){void 0===t&&(t="Unexpected state");t="FIRESTORE (8.1.2) INTERNAL ASSERTION FAILED: "+t;throw Lr(t),new Error(t)}function Ur(t){t||Vr()}function qr(t,e){this.user=e,this.type="OAuth",this.T={},this.T.Authorization="Bearer "+t}var jr,Fr={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Br=(n(Xr,jr=Error),Xr),zr=(Yr.prototype.getToken=function(){return Promise.resolve(null)},Yr.prototype.m=function(){},Yr.prototype.A=function(t){(this.I=t)(Sr.UNAUTHENTICATED)},Yr.prototype.R=function(){this.I=null},Yr),Gr=($r.prototype.getToken=function(){var e=this,n=this.V,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(function(t){return e.V!==n?(Rr("FirebaseCredentialsProvider","getToken aborted due to token change."),e.getToken()):t?(Ur("string"==typeof t.accessToken),new qr(t.accessToken,e.currentUser)):null}):Promise.resolve(null)},$r.prototype.m=function(){this.forceRefresh=!0},$r.prototype.A=function(t){this.I=t,this.g&&t(this.currentUser)},$r.prototype.R=function(){this.auth&&this.auth.removeAuthTokenListener(this.P),this.P=null,this.I=null},$r.prototype.p=function(){var t=this.auth&&this.auth.getUid();return Ur(null===t||"string"==typeof t),new Sr(t)},$r),Kr=(Object.defineProperty(Qr.prototype,"T",{get:function(){var t={"X-Goog-AuthUser":this.S},e=this.v.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),Qr),Wr=(Hr.prototype.getToken=function(){return Promise.resolve(new Kr(this.v,this.S))},Hr.prototype.A=function(t){t(Sr._)},Hr.prototype.R=function(){},Hr.prototype.m=function(){},Hr);function Hr(t,e){this.v=t,this.S=e}function Qr(t,e){this.v=t,this.S=e,this.type="FirstParty",this.user=Sr._}function $r(t){var e=this;this.P=null,this.currentUser=Sr.UNAUTHENTICATED,this.g=!1,this.V=0,this.I=null,this.forceRefresh=!1,this.P=function(){e.V++,e.currentUser=e.p(),e.g=!0,e.I&&e.I(e.currentUser)},this.V=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.P):(this.P(null),t.get().then(function(t){e.auth=t,e.P&&e.auth.addAuthTokenListener(e.P)},function(){}))}function Yr(){this.I=null}function Xr(t,e){var n=this;return(n=jr.call(this,e)||this).code=t,n.message=e,n.name="FirebaseError",n.toString=function(){return n.name+": [code="+n.code+"]: "+n.message},n}var Jr=(Zr.D=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=function(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},Zr);function Zr(){}function ti(t,e){return t<e?-1:e<t?1:0}function ei(t,n,r){return t.length===n.length&&t.every(function(t,e){return r(t,n[e])})}function ni(t){return t+"\0"}var ri,ii,oi=(vi.now=function(){return vi.fromMillis(Date.now())},vi.fromDate=function(t){return vi.fromMillis(t.getTime())},vi.fromMillis=function(t){var e=Math.floor(t/1e3);return new vi(e,1e6*(t-1e3*e))},vi.prototype.toDate=function(){return new Date(this.toMillis())},vi.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},vi.prototype.C=function(t){return this.seconds===t.seconds?ti(this.nanoseconds,t.nanoseconds):ti(this.seconds,t.seconds)},vi.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},vi.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},vi.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},vi.prototype.valueOf=function(){var t=this.seconds- -62135596800;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},vi),si=(yi.N=function(t){return new yi(t)},yi.min=function(){return new yi(new oi(0,0))},yi.prototype.F=function(t){return this.timestamp.C(t.timestamp)},yi.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},yi.prototype.O=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},yi.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},yi.prototype.M=function(){return this.timestamp},yi),Ie=(Object.defineProperty(di.prototype,"length",{get:function(){return this.k},enumerable:!1,configurable:!0}),di.prototype.isEqual=function(t){return 0===di.$(this,t)},di.prototype.child=function(t){var e=this.segments.slice(this.offset,this.limit());return t instanceof di?t.forEach(function(t){e.push(t)}):e.push(t),this.L(e)},di.prototype.limit=function(){return this.offset+this.length},di.prototype.B=function(t){return t=void 0===t?1:t,this.L(this.segments,this.offset+t,this.length-t)},di.prototype.q=function(){return this.L(this.segments,this.offset,this.length-1)},di.prototype.U=function(){return this.segments[this.offset]},di.prototype.K=function(){return this.get(this.length-1)},di.prototype.get=function(t){return this.segments[this.offset+t]},di.prototype.W=function(){return 0===this.length},di.prototype.j=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},di.prototype.G=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},di.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},di.prototype.H=function(){return this.segments.slice(this.offset,this.limit())},di.$=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(o<i)return 1}return t.length<e.length?-1:t.length>e.length?1:0},di),ui=(n(pi,ii=Ie),pi.prototype.L=function(t,e,n){return new pi(t,e,n)},pi.prototype.J=function(){return this.H().join("/")},pi.prototype.toString=function(){return this.J()},pi.Y=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=[],r=0,i=t;r<i.length;r++){var o=i[r];if(0<=o.indexOf("//"))throw new Br(Fr.INVALID_ARGUMENT,"Invalid segment ("+o+"). Paths must not contain // in them.");n.push.apply(n,o.split("/").filter(function(t){return 0<t.length}))}return new pi(n)},pi.X=function(){return new pi([])},pi),ai=/^[_a-zA-Z][_a-zA-Z0-9]*$/,ci=(n(li,ri=Ie),li.prototype.L=function(t,e,n){return new li(t,e,n)},li.Z=function(t){return ai.test(t)},li.prototype.J=function(){return this.H().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),li.Z(t)||(t="`"+t+"`"),t}).join(".")},li.prototype.toString=function(){return this.J()},li.prototype.tt=function(){return 1===this.length&&"__name__"===this.get(0)},li.et=function(){return new li(["__name__"])},li.nt=function(t){for(var e=[],n="",r=0,i=function(){if(0===n.length)throw new Br(Fr.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");e.push(n),n=""},o=!1;r<t.length;){var s=t[r];if("\\"===s){if(r+1===t.length)throw new Br(Fr.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[r+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Br(Fr.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=u,r+=2}else"`"===s?o=!o:"."!==s||o?n+=s:i(),r++}if(i(),o)throw new Br(Fr.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new li(e)},li.X=function(){return new li([])},li),hi=(fi.st=function(t){return new fi(ui.Y(t))},fi.it=function(t){return new fi(ui.Y(t).B(5))},fi.prototype.rt=function(t){return 2<=this.path.length&&this.path.get(this.path.length-2)===t},fi.prototype.isEqual=function(t){return null!==t&&0===ui.$(this.path,t.path)},fi.prototype.toString=function(){return this.path.toString()},fi.$=function(t,e){return ui.$(t.path,e.path)},fi.ot=function(t){return t.length%2==0},fi.ct=function(t){return new fi(new ui(t.slice()))},fi);function fi(t){this.path=t}function li(){return null!==ri&&ri.apply(this,arguments)||this}function pi(){return null!==ii&&ii.apply(this,arguments)||this}function di(t,e,n){void 0===e?e=0:e>t.length&&Vr(),void 0===n?n=t.length-e:n>t.length-e&&Vr(),this.segments=t,this.offset=e,this.k=n}function yi(t){this.timestamp=t}function vi(t,e){if(this.seconds=t,(this.nanoseconds=e)<0)throw new Br(Fr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(1e9<=e)throw new Br(Fr.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Br(Fr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(253402300800<=t)throw new Br(Fr.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}function gi(t){return null==t}function mi(t){return 0===t&&1/t==-1/0}function wi(t){return"number"==typeof t&&Number.isInteger(t)&&!mi(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var bi=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.ut=null};function _i(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new bi(t,e,n,r,i,o,s)}function Ii(t){var e=t;return null===e.ut&&(t=e.path.J(),null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(function(t){return(t=t).field.J()+t.op.toString()+Do(t.value)}).join(","),t+="|ob:",t+=e.orderBy.map(function(t){return(t=t).field.J()+t.dir}).join(","),gi(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=ia(e.startAt)),e.endAt&&(t+="|ub:",t+=ia(e.endAt)),e.ut=t),e.ut}function Ei(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n,r,i=0;i<t.orderBy.length;i++)if(n=t.orderBy[i],r=e.orderBy[i],n.dir!==r.dir||!n.field.isEqual(r.field))return!1;if(t.filters.length!==e.filters.length)return!1;for(var o,s,u=0;u<t.filters.length;u++)if(o=t.filters[u],s=e.filters[u],o.op!==s.op||!o.field.isEqual(s.field)||!Eo(o.value,s.value))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!sa(t.startAt,e.startAt)&&sa(t.endAt,e.endAt)}function Ti(t){return hi.ot(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Ai=(Ni.fromBase64String=function(t){return new Ni(atob(t))},Ni.fromUint8Array=function(t){return new Ni(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(t))},Ni.prototype.toBase64=function(){return t=this.at,btoa(t);var t},Ni.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.at)},Ni.prototype.ht=function(){return 2*this.at.length},Ni.prototype.F=function(t){return ti(this.at,t.at)},Ni.prototype.isEqual=function(t){return this.at===t.at},Ni);function Ni(t){this.at=t}Ai.lt=new Ai("");function Di(t){this.count=t}var Si,Oi=(xi.prototype.dt=function(t){return new xi(this.target,this.targetId,this._t,t,this.ft,this.lastLimboFreeSnapshotVersion,this.resumeToken)},xi.prototype.wt=function(t,e){return new xi(this.target,this.targetId,this._t,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t)},xi.prototype.Et=function(t){return new xi(this.target,this.targetId,this._t,this.sequenceNumber,this.ft,t,this.resumeToken)},xi);function xi(t,e,n,r,i,o,s){void 0===i&&(i=si.min()),void 0===o&&(o=si.min()),void 0===s&&(s=Ai.lt),this.target=t,this.targetId=e,this._t=n,this.sequenceNumber=r,this.ft=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}function ki(t){switch(t){case Fr.OK:return Vr(),0;case Fr.CANCELLED:case Fr.UNKNOWN:case Fr.DEADLINE_EXCEEDED:case Fr.RESOURCE_EXHAUSTED:case Fr.INTERNAL:case Fr.UNAVAILABLE:case Fr.UNAUTHENTICATED:return;case Fr.INVALID_ARGUMENT:case Fr.NOT_FOUND:case Fr.ALREADY_EXISTS:case Fr.PERMISSION_DENIED:case Fr.FAILED_PRECONDITION:case Fr.ABORTED:case Fr.OUT_OF_RANGE:case Fr.UNIMPLEMENTED:case Fr.DATA_LOSS:return 1;default:return Vr(),0}}function Pi(t){if(void 0===t)return Lr("GRPC error has no .code"),Fr.UNKNOWN;switch(t){case Si.OK:return Fr.OK;case Si.CANCELLED:return Fr.CANCELLED;case Si.UNKNOWN:return Fr.UNKNOWN;case Si.DEADLINE_EXCEEDED:return Fr.DEADLINE_EXCEEDED;case Si.RESOURCE_EXHAUSTED:return Fr.RESOURCE_EXHAUSTED;case Si.INTERNAL:return Fr.INTERNAL;case Si.UNAVAILABLE:return Fr.UNAVAILABLE;case Si.UNAUTHENTICATED:return Fr.UNAUTHENTICATED;case Si.INVALID_ARGUMENT:return Fr.INVALID_ARGUMENT;case Si.NOT_FOUND:return Fr.NOT_FOUND;case Si.ALREADY_EXISTS:return Fr.ALREADY_EXISTS;case Si.PERMISSION_DENIED:return Fr.PERMISSION_DENIED;case Si.FAILED_PRECONDITION:return Fr.FAILED_PRECONDITION;case Si.ABORTED:return Fr.ABORTED;case Si.OUT_OF_RANGE:return Fr.OUT_OF_RANGE;case Si.UNIMPLEMENTED:return Fr.UNIMPLEMENTED;case Si.DATA_LOSS:return Fr.DATA_LOSS;default:return Vr()}}(Ee=Si=Si||{})[Ee.OK=0]="OK",Ee[Ee.CANCELLED=1]="CANCELLED",Ee[Ee.UNKNOWN=2]="UNKNOWN",Ee[Ee.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Ee[Ee.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Ee[Ee.NOT_FOUND=5]="NOT_FOUND",Ee[Ee.ALREADY_EXISTS=6]="ALREADY_EXISTS",Ee[Ee.PERMISSION_DENIED=7]="PERMISSION_DENIED",Ee[Ee.UNAUTHENTICATED=16]="UNAUTHENTICATED",Ee[Ee.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Ee[Ee.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Ee[Ee.ABORTED=10]="ABORTED",Ee[Ee.OUT_OF_RANGE=11]="OUT_OF_RANGE",Ee[Ee.UNIMPLEMENTED=12]="UNIMPLEMENTED",Ee[Ee.INTERNAL=13]="INTERNAL",Ee[Ee.UNAVAILABLE=14]="UNAVAILABLE",Ee[Ee.DATA_LOSS=15]="DATA_LOSS";var Ri=(Ui.prototype.Tt=function(t,e){return new Ui(this.$,this.root.Tt(t,e,this.$).copy(null,null,Ci.It,null,null))},Ui.prototype.remove=function(t){return new Ui(this.$,this.root.remove(t,this.$).copy(null,null,Ci.It,null,null))},Ui.prototype.get=function(t){for(var e=this.root;!e.W();){var n=this.$(t,e.key);if(0===n)return e.value;n<0?e=e.left:0<n&&(e=e.right)}return null},Ui.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.W();){var r=this.$(t,n.key);if(0===r)return e+n.left.size;n=r<0?n.left:(e+=n.left.size+1,n.right)}return-1},Ui.prototype.W=function(){return this.root.W()},Object.defineProperty(Ui.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),Ui.prototype.At=function(){return this.root.At()},Ui.prototype.Rt=function(){return this.root.Rt()},Ui.prototype.Pt=function(t){return this.root.Pt(t)},Ui.prototype.forEach=function(n){this.Pt(function(t,e){return n(t,e),!1})},Ui.prototype.toString=function(){var n=[];return this.Pt(function(t,e){return n.push(t+":"+e),!1}),"{"+n.join(", ")+"}"},Ui.prototype.gt=function(t){return this.root.gt(t)},Ui.prototype.yt=function(){return new Li(this.root,null,this.$,!1)},Ui.prototype.Vt=function(t){return new Li(this.root,t,this.$,!1)},Ui.prototype.vt=function(){return new Li(this.root,null,this.$,!0)},Ui.prototype.bt=function(t){return new Li(this.root,t,this.$,!0)},Ui),Li=(Vi.prototype.Ct=function(){var t=this.Dt.pop(),e={key:t.key,value:t.value};if(this.St)for(t=t.left;!t.W();)this.Dt.push(t),t=t.right;else for(t=t.right;!t.W();)this.Dt.push(t),t=t.left;return e},Vi.prototype.Nt=function(){return 0<this.Dt.length},Vi.prototype.xt=function(){if(0===this.Dt.length)return null;var t=this.Dt[this.Dt.length-1];return{key:t.key,value:t.value}},Vi),Ci=(Mi.prototype.copy=function(t,e,n,r,i){return new Mi(null!=t?t:this.key,null!=e?e:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)},Mi.prototype.W=function(){return!1},Mi.prototype.Pt=function(t){return this.left.Pt(t)||t(this.key,this.value)||this.right.Pt(t)},Mi.prototype.gt=function(t){return this.right.gt(t)||t(this.key,this.value)||this.left.gt(t)},Mi.prototype.min=function(){return this.left.W()?this:this.left.min()},Mi.prototype.At=function(){return this.min().key},Mi.prototype.Rt=function(){return this.right.W()?this.key:this.right.Rt()},Mi.prototype.Tt=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.Tt(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.Tt(t,e,n))).Ft()},Mi.prototype.Ot=function(){if(this.left.W())return Mi.EMPTY;var t=this;return t.left.Mt()||t.left.left.Mt()||(t=t.kt()),(t=t.copy(null,null,null,t.left.Ot(),null)).Ft()},Mi.prototype.remove=function(t,e){var n,r=this;if(e(t,r.key)<0)r.left.W()||r.left.Mt()||r.left.left.Mt()||(r=r.kt()),r=r.copy(null,null,null,r.left.remove(t,e),null);else{if(r.left.Mt()&&(r=r.$t()),r.right.W()||r.right.Mt()||r.right.left.Mt()||(r=r.Lt()),0===e(t,r.key)){if(r.right.W())return Mi.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.Ot())}r=r.copy(null,null,null,null,r.right.remove(t,e))}return r.Ft()},Mi.prototype.Mt=function(){return this.color},Mi.prototype.Ft=function(){var t=this;return t.right.Mt()&&!t.left.Mt()&&(t=t.Bt()),t.left.Mt()&&t.left.left.Mt()&&(t=t.$t()),t.left.Mt()&&t.right.Mt()&&(t=t.qt()),t},Mi.prototype.kt=function(){var t=this.qt();return t.right.left.Mt()&&(t=(t=(t=t.copy(null,null,null,null,t.right.$t())).Bt()).qt()),t},Mi.prototype.Lt=function(){var t=this.qt();return t.left.left.Mt()&&(t=(t=t.$t()).qt()),t},Mi.prototype.Bt=function(){var t=this.copy(null,null,Mi.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)},Mi.prototype.$t=function(){var t=this.copy(null,null,Mi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)},Mi.prototype.qt=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},Mi.prototype.Ut=function(){var t=this.Qt();return Math.pow(2,t)<=this.size+1},Mi.prototype.Qt=function(){if(this.Mt()&&this.left.Mt())throw Vr();if(this.right.Mt())throw Vr();var t=this.left.Qt();if(t!==this.right.Qt())throw Vr();return t+(this.Mt()?0:1)},Mi);function Mi(t,e,n,r,i){this.key=t,this.value=e,this.color=null!=n?n:Mi.RED,this.left=null!=r?r:Mi.EMPTY,this.right=null!=i?i:Mi.EMPTY,this.size=this.left.size+1+this.right.size}function Vi(t,e,n,r){this.St=r,this.Dt=[];for(var i=1;!t.W();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.St?t.left:t.right;else{if(0===i){this.Dt.push(t);break}this.Dt.push(t),t=this.St?t.right:t.left}}function Ui(t,e){this.$=t,this.root=e||Ci.EMPTY}function qi(){this.size=0}Ci.EMPTY=null,Ci.RED=!0,Ci.It=!1,Ci.EMPTY=(Object.defineProperty(qi.prototype,"key",{get:function(){throw Vr()},enumerable:!1,configurable:!0}),Object.defineProperty(qi.prototype,"value",{get:function(){throw Vr()},enumerable:!1,configurable:!0}),Object.defineProperty(qi.prototype,"color",{get:function(){throw Vr()},enumerable:!1,configurable:!0}),Object.defineProperty(qi.prototype,"left",{get:function(){throw Vr()},enumerable:!1,configurable:!0}),Object.defineProperty(qi.prototype,"right",{get:function(){throw Vr()},enumerable:!1,configurable:!0}),qi.prototype.copy=function(t,e,n,r,i){return this},qi.prototype.Tt=function(t,e,n){return new Ci(t,e)},qi.prototype.remove=function(t,e){return this},qi.prototype.W=function(){return!0},qi.prototype.Pt=function(t){return!1},qi.prototype.gt=function(t){return!1},qi.prototype.At=function(){return null},qi.prototype.Rt=function(){return null},qi.prototype.Mt=function(){return!1},qi.prototype.Ut=function(){return!0},qi.prototype.Qt=function(){return 0},new qi);var ji=(Gi.prototype.has=function(t){return null!==this.data.get(t)},Gi.prototype.first=function(){return this.data.At()},Gi.prototype.last=function(){return this.data.Rt()},Object.defineProperty(Gi.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),Gi.prototype.indexOf=function(t){return this.data.indexOf(t)},Gi.prototype.forEach=function(n){this.data.Pt(function(t,e){return n(t),!1})},Gi.prototype.Kt=function(t,e){for(var n=this.data.Vt(t[0]);n.Nt();){var r=n.Ct();if(0<=this.$(r.key,t[1]))return;e(r.key)}},Gi.prototype.Wt=function(t,e){for(var n=void 0!==e?this.data.Vt(e):this.data.yt();n.Nt();)if(!t(n.Ct().key))return},Gi.prototype.jt=function(t){t=this.data.Vt(t);return t.Nt()?t.Ct().key:null},Gi.prototype.yt=function(){return new Fi(this.data.yt())},Gi.prototype.Vt=function(t){return new Fi(this.data.Vt(t))},Gi.prototype.add=function(t){return this.copy(this.data.remove(t).Tt(t,!0))},Gi.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},Gi.prototype.W=function(){return this.data.W()},Gi.prototype.Gt=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},Gi.prototype.isEqual=function(t){if(!(t instanceof Gi))return!1;if(this.size!==t.size)return!1;for(var e=this.data.yt(),n=t.data.yt();e.Nt();){var r=e.Ct().key,i=n.Ct().key;if(0!==this.$(r,i))return!1}return!0},Gi.prototype.H=function(){var e=[];return this.forEach(function(t){e.push(t)}),e},Gi.prototype.toString=function(){var e=[];return this.forEach(function(t){return e.push(t)}),"SortedSet("+e.toString()+")"},Gi.prototype.copy=function(t){var e=new Gi(this.$);return e.data=t,e},Gi),Fi=(zi.prototype.Ct=function(){return this.zt.Ct().key},zi.prototype.Nt=function(){return this.zt.Nt()},zi),Bi=new Ri(hi.$);function zi(t){this.zt=t}function Gi(t){this.$=t,this.data=new Ri(this.$)}var Ki=new Ri(hi.$);var Wi=new Ri(hi.$),Hi=new ji(hi.$);function Qi(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=Hi,r=0,i=t;r<i.length;r++)var o=i[r],n=n.add(o);return n}var $i=new ji(ti);var Yi=(lo.Yt=function(t){return new lo(t.$)},lo.prototype.has=function(t){return null!=this.Ht.get(t)},lo.prototype.get=function(t){return this.Ht.get(t)},lo.prototype.first=function(){return this.Jt.At()},lo.prototype.last=function(){return this.Jt.Rt()},lo.prototype.W=function(){return this.Jt.W()},lo.prototype.indexOf=function(t){t=this.Ht.get(t);return t?this.Jt.indexOf(t):-1},Object.defineProperty(lo.prototype,"size",{get:function(){return this.Jt.size},enumerable:!1,configurable:!0}),lo.prototype.forEach=function(n){this.Jt.Pt(function(t,e){return n(t),!1})},lo.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.Ht.Tt(t.key,t),e.Jt.Tt(t,null))},lo.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.Ht.remove(t),this.Jt.remove(e)):this},lo.prototype.isEqual=function(t){if(!(t instanceof lo))return!1;if(this.size!==t.size)return!1;for(var e=this.Jt.yt(),n=t.Jt.yt();e.Nt();){var r=e.Ct().key,i=n.Ct().key;if(!r.isEqual(i))return!1}return!0},lo.prototype.toString=function(){var e=[];return this.forEach(function(t){e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"},lo.prototype.copy=function(t,e){var n=new lo;return n.$=this.$,n.Ht=t,n.Jt=e,n},lo),Xi=(fo.prototype.track=function(t){var e=t.doc.key,n=this.Xt.get(e);!n||0!==t.type&&3===n.type?this.Xt=this.Xt.Tt(e,t):3===t.type&&1!==n.type?this.Xt=this.Xt.Tt(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Xt=this.Xt.Tt(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Xt=this.Xt.remove(e):1===t.type&&2===n.type?this.Xt=this.Xt.Tt(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Xt=this.Xt.Tt(e,{type:2,doc:t.doc}):Vr()},fo.prototype.Zt=function(){var n=[];return this.Xt.Pt(function(t,e){n.push(e)}),n},fo),Ji=(ho.ie=function(t,e,n,r){var i=[];return e.forEach(function(t){i.push({type:0,doc:t})}),new ho(t,e,Yi.Yt(e),i,n,r,!0,!1)},Object.defineProperty(ho.prototype,"hasPendingWrites",{get:function(){return!this.ee.W()},enumerable:!1,configurable:!0}),ho.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.ne===t.ne&&this.ee.isEqual(t.ee)&&Du(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.te.isEqual(t.te)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},ho),Zi=(co.ae=function(t,e){var n=new Map;return n.set(t,to.he(t,e)),new co(si.min(),n,$i,Bi,Qi())},co),to=(ao.he=function(t,e){return new ao(Ai.lt,e,Qi(),Qi(),Qi())},ao),eo=function(t,e,n,r){this.we=t,this.removedTargetIds=e,this.key=n,this.Ee=r},no=function(t,e){this.targetId=t,this.Te=e},ro=function(t,e,n,r){void 0===n&&(n=Ai.lt),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},io=(Object.defineProperty(uo.prototype,"le",{get:function(){return this.Re},enumerable:!1,configurable:!0}),Object.defineProperty(uo.prototype,"resumeToken",{get:function(){return this.Ae},enumerable:!1,configurable:!0}),Object.defineProperty(uo.prototype,"ge",{get:function(){return 0!==this.Ie},enumerable:!1,configurable:!0}),Object.defineProperty(uo.prototype,"ye",{get:function(){return this.Pe},enumerable:!1,configurable:!0}),uo.prototype.Ve=function(t){0<t.ht()&&(this.Pe=!0,this.Ae=t)},uo.prototype.pe=function(){var n=Qi(),r=Qi(),i=Qi();return this.me.forEach(function(t,e){switch(e){case 0:n=n.add(t);break;case 2:r=r.add(t);break;case 1:i=i.add(t);break;default:Vr()}}),new to(this.Ae,this.Re,n,r,i)},uo.prototype.ve=function(){this.Pe=!1,this.me=yo()},uo.prototype.be=function(t,e){this.Pe=!0,this.me=this.me.Tt(t,e)},uo.prototype.Se=function(t){this.Pe=!0,this.me=this.me.remove(t)},uo.prototype.De=function(){this.Ie+=1},uo.prototype.Ce=function(){--this.Ie},uo.prototype.Ne=function(){this.Pe=!0,this.Re=!0},uo),oo=(so.prototype.$e=function(t){for(var e=0,n=t.we;e<n.length;e++){var r=n[e];t.Ee instanceof hu?this.Le(r,t.Ee):t.Ee instanceof fu&&this.Be(r,t.key,t.Ee)}for(var i=0,o=t.removedTargetIds;i<o.length;i++){var s=o[i];this.Be(s,t.key,t.Ee)}},so.prototype.qe=function(n){var r=this;this.Ue(n,function(t){var e=r.Qe(t);switch(n.state){case 0:r.Ke(t)&&e.Ve(n.resumeToken);break;case 1:e.Ce(),e.ge||e.ve(),e.Ve(n.resumeToken);break;case 2:e.Ce(),e.ge||r.removeTarget(t);break;case 3:r.Ke(t)&&(e.Ne(),e.Ve(n.resumeToken));break;case 4:r.Ke(t)&&(r.We(t),e.Ve(n.resumeToken));break;default:Vr()}})},so.prototype.Ue=function(t,n){var r=this;0<t.targetIds.length?t.targetIds.forEach(n):this.Fe.forEach(function(t,e){r.Ke(e)&&n(e)})},so.prototype.je=function(t){var e=t.targetId,n=t.Te.count,t=this.Ge(e);t&&(Ti(t=t.target)?0===n?(t=new hi(t.path),this.Be(e,t,new fu(t,si.min()))):Ur(1===n):this.ze(e)!==n&&(this.We(e),this.ke=this.ke.add(e)))},so.prototype.He=function(r){var i=this,o=new Map;this.Fe.forEach(function(t,e){var n=i.Ge(e);n&&(t.le&&Ti(n.target)&&(n=new hi(n.target.path),null!==i.Oe.get(n)||i.Je(e,n)||i.Be(e,n,new fu(n,r))),t.ye&&(o.set(e,t.pe()),t.ve()))});var s=Qi();this.Me.forEach(function(t,e){var n=!0;e.Wt(function(t){t=i.Ge(t);return!t||2===t._t||(n=!1)}),n&&(s=s.add(t))});var t=new Zi(r,o,this.ke,this.Oe,s);return this.Oe=Bi,this.Me=po(),this.ke=new ji(ti),t},so.prototype.Le=function(t,e){var n;this.Ke(t)&&(n=this.Je(t,e.key)?2:0,this.Qe(t).be(e.key,n),this.Oe=this.Oe.Tt(e.key,e),this.Me=this.Me.Tt(e.key,this.Ye(e.key).add(t)))},so.prototype.Be=function(t,e,n){var r;this.Ke(t)&&(r=this.Qe(t),this.Je(t,e)?r.be(e,1):r.Se(e),this.Me=this.Me.Tt(e,this.Ye(e).delete(t)),n&&(this.Oe=this.Oe.Tt(e,n)))},so.prototype.removeTarget=function(t){this.Fe.delete(t)},so.prototype.ze=function(t){var e=this.Qe(t).pe();return this.xe.Xe(t).size+e._e.size-e.de.size},so.prototype.De=function(t){this.Qe(t).De()},so.prototype.Qe=function(t){var e=this.Fe.get(t);return e||(e=new io,this.Fe.set(t,e)),e},so.prototype.Ye=function(t){var e=this.Me.get(t);return e||(e=new ji(ti),this.Me=this.Me.Tt(t,e)),e},so.prototype.Ke=function(t){var e=null!==this.Ge(t);return e||Rr("WatchChangeAggregator","Detected inactive target",t),e},so.prototype.Ge=function(t){var e=this.Fe.get(t);return e&&e.ge?null:this.xe.Ze(t)},so.prototype.We=function(e){var n=this;this.Fe.set(e,new io),this.xe.Xe(e).forEach(function(t){n.Be(e,t,null)})},so.prototype.Je=function(t,e){return this.xe.Xe(t).has(e)},so);function so(t){this.xe=t,this.Fe=new Map,this.Oe=Bi,this.Me=po(),this.ke=new ji(ti)}function uo(){this.Ie=0,this.me=yo(),this.Ae=Ai.lt,this.Re=!1,this.Pe=!0}function ao(t,e,n,r,i){this.resumeToken=t,this.le=e,this._e=n,this.fe=r,this.de=i}function co(t,e,n,r,i){this.ft=t,this.re=e,this.oe=n,this.ce=r,this.ue=i}function ho(t,e,n,r,i,o,s,u){this.query=t,this.docs=e,this.te=n,this.docChanges=r,this.ee=i,this.fromCache=o,this.ne=s,this.se=u}function fo(){this.Xt=new Ri(hi.$)}function lo(n){this.$=n?function(t,e){return n(t,e)||hi.$(t.key,e.key)}:function(t,e){return hi.$(t.key,e.key)},this.Ht=Ki,this.Jt=new Ri(this.$)}function po(){return new Ri(hi.$)}function yo(){return new Ri(hi.$)}function vo(t){var e,n=0;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&n++;return n}function go(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function mo(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wo(t){return"server_timestamp"===(null===(t=((null===(t=null==t?void 0:t.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function bo(t){t=So(t.mapValue.fields.__local_write_time__.timestampValue);return new oi(t.seconds,t.nanos)}var _o=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Io(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?wo(t)?4:10:Vr()}function Eo(r,i){var t,e=Io(r);if(e!==Io(i))return!1;switch(e){case 0:return!0;case 1:return r.booleanValue===i.booleanValue;case 4:return bo(r).isEqual(bo(i));case 3:return function(t){if("string"==typeof r.timestampValue&&"string"==typeof t.timestampValue&&r.timestampValue.length===t.timestampValue.length)return r.timestampValue===t.timestampValue;var e=So(r.timestampValue),t=So(t.timestampValue);return e.seconds===t.seconds&&e.nanos===t.nanos}(i);case 5:return r.stringValue===i.stringValue;case 6:return t=i,xo(r.bytesValue).isEqual(xo(t.bytesValue));case 7:return r.referenceValue===i.referenceValue;case 8:return e=i,Oo((t=r).geoPointValue.latitude)===Oo(e.geoPointValue.latitude)&&Oo(t.geoPointValue.longitude)===Oo(e.geoPointValue.longitude);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return Oo(t.integerValue)===Oo(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){t=Oo(t.doubleValue),e=Oo(e.doubleValue);return t===e?mi(t)===mi(e):isNaN(t)&&isNaN(e)}return!1}(r,i);case 9:return ei(r.arrayValue.values||[],i.arrayValue.values||[],Eo);case 10:return function(){var t,e=r.mapValue.fields||{},n=i.mapValue.fields||{};if(vo(e)!==vo(n))return!1;for(t in e)if(e.hasOwnProperty(t)&&(void 0===n[t]||!Eo(e[t],n[t])))return!1;return!0}();default:return Vr()}}function To(t,e){return void 0!==(t.values||[]).find(function(t){return Eo(t,e)})}function Ao(t,e){var n,r,i=Io(t),o=Io(e);if(i!==o)return ti(i,o);switch(i){case 0:return 0;case 1:return ti(t.booleanValue,e.booleanValue);case 2:return n=e,r=Oo(t.integerValue||t.doubleValue),n=Oo(n.integerValue||n.doubleValue),r<n?-1:n<r?1:r===n?0:isNaN(r)?isNaN(n)?0:-1:1;case 3:return No(t.timestampValue,e.timestampValue);case 4:return No(bo(t),bo(e));case 5:return ti(t.stringValue,e.stringValue);case 6:return function(t,e){t=xo(t),e=xo(e);return t.F(e)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=ti(n[i],r[i]);if(0!==o)return o}return ti(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return i=t.geoPointValue,r=e.geoPointValue,0!==(n=ti(Oo(i.latitude),Oo(r.latitude)))?n:ti(Oo(i.longitude),Oo(r.longitude));case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=Ao(n[i],r[i]);if(o)return o}return ti(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var u=ti(r[s],o[s]);if(0!==u)return u;u=Ao(n[r[s]],i[o[s]]);if(0!==u)return u}return ti(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Vr()}}function No(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return ti(t,e);var n=So(t),t=So(e),e=ti(n.seconds,t.seconds);return 0!==e?e:ti(n.nanos,t.nanos)}function Do(t){return function s(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var t=So(t);return"time("+t.seconds+","+t.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?xo(t.bytesValue).toBase64():"referenceValue"in t?(e=t.referenceValue,hi.it(e).toString()):"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=s(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+s(t.fields[o])}return e+"}"}(t.mapValue):Vr();var e}(t)}function So(t){if(Ur(!!t),"string"!=typeof t)return{seconds:Oo(t.seconds),nanos:Oo(t.nanos)};var e=0,n=_o.exec(t);Ur(!!n),n[1]&&(n=((n=n[1])+"000000000").substr(0,9),e=Number(n));t=new Date(t);return{seconds:Math.floor(t.getTime()/1e3),nanos:e}}function Oo(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function xo(t){return"string"==typeof t?Ai.fromBase64String(t):Ai.fromUint8Array(t)}function ko(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.J()}}function Po(t){return t&&"integerValue"in t}function Ro(t){return!!t&&"arrayValue"in t}function Lo(t){return t&&"nullValue"in t}function Co(t){return t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Mo(t){return t&&"mapValue"in t}var Vo={asc:"ASCENDING",desc:"DESCENDING"},Uo={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qo=function(t,e){this.t=t,this.tn=e};function jo(t){return{integerValue:""+t}}function Fo(t,e){if(t.tn){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mi(e)?"-0":e}}function Bo(t,e){return wi(e)?jo(e):Fo(t,e)}function zo(t,e){return t.tn?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function Go(t,e){return t.tn?e.toBase64():e.toUint8Array()}function Ko(t){return Ur(!!t),si.N((t=So(t),new oi(t.seconds,t.nanos)))}function Wo(t,e){return new ui(["projects",t.projectId,"databases",t.database]).child("documents").child(e).J()}function Ho(t){t=ui.Y(t);return Ur(fs(t)),t}function Qo(t,e){return Wo(t.t,e.path)}function $o(t,e){e=Ho(e);if(e.get(1)!==t.t.projectId)throw new Br(Fr.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+t.t.projectId);if(e.get(3)!==t.t.database)throw new Br(Fr.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+t.t.database);return new hi(Zo(e))}function Yo(t,e){return Wo(t.t,e)}function Xo(t){t=Ho(t);return 4===t.length?ui.X():Zo(t)}function Jo(t){return new ui(["projects",t.t.projectId,"databases",t.t.database]).J()}function Zo(t){return Ur(4<t.length&&"documents"===t.get(4)),t.B(5)}function ts(t,e,n){return{name:Qo(t,e),fields:n.proto.mapValue.fields}}function es(t,e){var n,r,i;if(e instanceof Bs)n={update:ts(t,e.key,e.value)};else if(e instanceof Zs)n={delete:Qo(t,e.key)};else if(e instanceof zs)n={update:ts(t,e.key,e.data),updateMask:(i=e.en,r=[],i.fields.forEach(function(t){return r.push(t.J())}),{fieldPaths:r})};else if(e instanceof Qs)n={transform:{document:Qo(t,e.key),fieldTransforms:e.fieldTransforms.map(function(t){var e=t.transform;if(e instanceof ys)return{fieldPath:t.field.J(),setToServerValue:"REQUEST_TIME"};if(e instanceof vs)return{fieldPath:t.field.J(),appendMissingElements:{values:e.elements}};if(e instanceof _s)return{fieldPath:t.field.J(),removeAllFromArray:{values:e.elements}};if(e instanceof As)return{fieldPath:t.field.J(),increment:e.nn};throw Vr()})}};else{if(!(e instanceof tu))return Vr();n={verify:Qo(t,e.key)}}return e.rn.sn||(n.currentDocument=void 0!==(i=e.rn).updateTime?{updateTime:(e=t,t=i.updateTime,zo(e,t.M()))}:void 0!==i.exists?{exists:i.exists}:Vr()),n}function ns(e,t){var n=t.currentDocument?void 0!==(o=t.currentDocument).updateTime?Rs.updateTime(Ko(o.updateTime)):void 0!==o.exists?Rs.exists(o.exists):Rs.on():Rs.on();if(t.update){t.update.name;var r=$o(e,t.update.name),i=new eu({mapValue:{fields:t.update.fields}});if(t.updateMask){var o=(o=t.updateMask.fieldPaths||[],new Os(o.map(function(t){return ci.nt(t)})));return new zs(r,i,o,n)}return new Bs(r,i,n)}if(t.delete){var s=$o(e,t.delete);return new Zs(s,n)}if(t.transform){i=$o(e,t.transform.document),s=t.transform.fieldTransforms.map(function(t){return function(t,e){var n,r=null;"setToServerValue"in e?(Ur("REQUEST_TIME"===e.setToServerValue),r=new ys):"appendMissingElements"in e?(n=e.appendMissingElements.values||[],r=new vs(n)):"removeAllFromArray"in e?(n=e.removeAllFromArray.values||[],r=new _s(n)):"increment"in e?r=new As(t,e.increment):Vr();e=ci.nt(e.fieldPath);return new xs(e,r)}(e,t)});return Ur(!0===n.exists),new Qs(i,s)}if(t.verify){t=$o(e,t.verify);return new tu(t,n)}return Vr()}function rs(t,e){return{documents:[Yo(t,e.path)]}}function is(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Yo(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Yo(t,r.q()),n.structuredQuery.from=[{collectionId:r.K()}]);r=function(t){if(0!==t.length){t=t.map(function(t){if("=="===t.op){if(Co(t.value))return{unaryFilter:{field:as(t.field),op:"IS_NAN"}};if(Lo(t.value))return{unaryFilter:{field:as(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(Co(t.value))return{unaryFilter:{field:as(t.field),op:"IS_NOT_NAN"}};if(Lo(t.value))return{unaryFilter:{field:as(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:as(t.field),op:(e=t.op,Uo[e]),value:t.value}};var e});return 1===t.length?t[0]:{compositeFilter:{op:"AND",filters:t}}}}(e.filters);r&&(n.structuredQuery.where=r);r=function(t){if(0!==t.length)return t.map(function(t){return{field:as((t=t).field),direction:(t=t.dir,Vo[t])}})}(e.orderBy);r&&(n.structuredQuery.orderBy=r);r=e.limit,r=t.tn||gi(r)?r:{value:r};return null!==r&&(n.structuredQuery.limit=r),e.startAt&&(n.structuredQuery.startAt=ss(e.startAt)),e.endAt&&(n.structuredQuery.endAt=ss(e.endAt)),n}function os(t){var e=Xo(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;0<r&&(Ur(1===r),(s=n.from[0]).allDescendants?i=s.collectionId:e=e.child(s.collectionId));var o=[];n.where&&(o=function e(t){return t?void 0!==t.unaryFilter?[hs(t)]:void 0!==t.fieldFilter?[(n=t,Ru.create(cs(n.fieldFilter.field),function(){switch(n.fieldFilter.op){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Vr()}}(),n.fieldFilter.value))]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return e(t)}).reduce(function(t,e){return t.concat(e)}):Vr():[];var n}(n.where));t=[];n.orderBy&&(t=n.orderBy.map(function(t){return new ua(cs((e=t).field),function(){switch(e.direction){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}());var e}));r=null;n.limit&&(r=gi(u="object"==typeof(u=n.limit)?u.value:u)?null:u);var s=null;n.startAt&&(s=us(n.startAt));var u=null;return n.endAt&&(u=us(n.endAt)),gu(e,i,t,o,r,"F",s,u)}function ss(t){return{before:t.before,values:t.position}}function us(t){var e=!!t.before,t=t.values||[];return new Zu(t,e)}function as(t){return{fieldPath:t.J()}}function cs(t){return ci.nt(t.fieldPath)}function hs(t){switch(t.unaryFilter.op){case"IS_NAN":var e=cs(t.unaryFilter.field);return Ru.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=cs(t.unaryFilter.field);return Ru.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":n=cs(t.unaryFilter.field);return Ru.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":t=cs(t.unaryFilter.field);return Ru.create(t,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Vr()}}function fs(t){return 4<=t.length&&"projects"===t.get(0)&&"databases"===t.get(2)}h=function(){this.cn=void 0};function ls(t,e){return t instanceof As?Po(t=e)||t&&"doubleValue"in t?e:{integerValue:0}:null}var ps,ds,ys=(n(ms,ds=h),ms),vs=(n(gs,ps=h),gs);function gs(t){var e=this;return(e=ps.call(this)||this).elements=t,e}function ms(){return null!==ds&&ds.apply(this,arguments)||this}function ws(t,e){for(var n=Ss(e),r=0,i=t.elements;r<i.length;r++)!function(e){n.some(function(t){return Eo(t,e)})||n.push(e)}(i[r]);return{arrayValue:{values:n}}}var bs,_s=(n(Is,bs=h),Is);function Is(t){var e=this;return(e=bs.call(this)||this).elements=t,e}function Es(t,e){for(var n=Ss(e),r=0,i=t.elements;r<i.length;r++)!function(e){n=n.filter(function(t){return!Eo(t,e)})}(i[r]);return{arrayValue:{values:n}}}var Ts,As=(n(Ns,Ts=h),Ns);function Ns(t,e){var n=this;return(n=Ts.call(this)||this).serializer=t,n.nn=e,n}function Ds(t){return Oo(t.integerValue||t.doubleValue)}function Ss(t){return Ro(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var Os=(ks.prototype.un=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].j(t))return!0;return!1},ks.prototype.isEqual=function(t){return ei(this.fields,t.fields,function(t,e){return t.isEqual(e)})},ks),xs=function(t,e){this.field=t,this.transform=e};function ks(t){(this.fields=t).sort(ci.$)}function Ps(t,e){this.version=t,this.transformResults=e}var Rs=(Ls.on=function(){return new Ls},Ls.exists=function(t){return new Ls(void 0,t)},Ls.updateTime=function(t){return new Ls(t)},Object.defineProperty(Ls.prototype,"sn",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),Ls.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},Ls);function Ls(t,e){this.updateTime=t,this.exists=e}function Cs(t,e){return void 0!==t.updateTime?e instanceof hu&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof hu}Ie=function(){};function Ms(t,e,n){return t instanceof Bs?new hu(t.key,n.version,t.value,{hasCommittedMutations:!0}):t instanceof zs?function(t,e,n){if(!Cs(t.rn,e))return new lu(t.key,n.version);e=Ws(t,e);return new hu(t.key,n.version,e,{hasCommittedMutations:!0})}(t,e,n):t instanceof Qs?function(t,e,n){if(Ur(null!=n.transformResults),!Cs(t.rn,e))return new lu(t.key,n.version);var r=e,e=function(t,e,n){var r=[];Ur(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,u=null;e instanceof hu&&(u=e.field(o.field)),r.push((o=s,s=u,u=n[i],o instanceof vs?ws(o,s):o instanceof _s?Es(o,s):u))}return r}(t.fieldTransforms,e,n.transformResults),n=n.version,e=Ys(t,r.data(),e);return new hu(t.key,n,e,{hasCommittedMutations:!0})}(t,e,n):new fu(t.key,n.version,{hasCommittedMutations:!0})}function Vs(t,e,n,r){return t instanceof Bs?function(t,e){if(!Cs(t.rn,e))return e;e=qs(e);return new hu(t.key,e,t.value,{an:!0})}(t,e):t instanceof zs?function(t,e){if(!Cs(t.rn,e))return e;var n=qs(e),e=Ws(t,e);return new hu(t.key,n,e,{an:!0})}(t,e):t instanceof Qs?function(t,e,n,r){if(!Cs(t.rn,e))return e;var i=e,r=function(t,e,n,r){for(var i,o=[],s=0,u=t;s<u.length;s++){var a=u[s],c=a.transform,h=null;n instanceof hu&&(h=n.field(a.field)),null===h&&r instanceof hu&&(h=r.field(a.field)),o.push((i=h,a=e,h=void 0,(c=c)instanceof ys?(h={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:a.seconds,nanos:a.nanoseconds}}}},i&&(h.fields.__previous_value__=i),{mapValue:h}):c instanceof vs?ws(c,i):c instanceof _s?Es(c,i):(c=ls(h=c,i),i=Ds(c)+Ds(h.nn),Po(c)&&Po(h.nn)?jo(i):Fo(h.serializer,i))))}return o}(t.fieldTransforms,n,e,r),r=Ys(t,i.data(),r);return new hu(t.key,i.version,r,{an:!0})}(t,e,r,n):(e=e,Cs((t=t).rn,e)?new fu(t.key,si.min()):e)}function Us(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.rn.isEqual(e.rn)&&(0===t.type?t.value.isEqual(e.value):1===t.type?t.data.isEqual(e.data)&&t.en.isEqual(e.en):2!==t.type||ei(t.fieldTransforms,t.fieldTransforms,function(t,e){return e=e,(t=t).field.isEqual(e.field)&&(t=t.transform,e=e.transform,t instanceof vs&&e instanceof vs||t instanceof _s&&e instanceof _s?ei(t.elements,e.elements,Eo):t instanceof As&&e instanceof As?Eo(t.nn,e.nn):t instanceof ys&&e instanceof ys)}))}function qs(t){return t instanceof hu?t.version:si.min()}var js,Fs,Bs=(n(Ks,Fs=Ie),Ks),zs=(n(Gs,js=Ie),Gs);function Gs(t,e,n,r){var i=this;return(i=js.call(this)||this).key=t,i.data=e,i.en=n,i.rn=r,i.type=1,i}function Ks(t,e,n){var r=this;return(r=Fs.call(this)||this).key=t,r.value=e,r.rn=n,r.type=0,r}function Ws(t,e){return n=t,e=e instanceof hu?e.data():eu.empty(),r=new nu(e),n.en.fields.forEach(function(t){var e;t.W()||(null!==(e=n.data.field(t))?r.set(t,e):r.delete(t))}),r.hn();var n,r}var Hs,Qs=(n($s,Hs=Ie),$s);function $s(t,e){var n=this;return(n=Hs.call(this)||this).key=t,n.fieldTransforms=e,n.type=2,n.rn=Rs.exists(!0),n}function Ys(t,e,n){for(var r=new nu(e),i=0;i<t.fieldTransforms.length;i++){var o=t.fieldTransforms[i];r.set(o.field,n[i])}return r.hn()}var Xs,Js,Zs=(n(su,Js=Ie),su),tu=(n(ou,Xs=Ie),ou),eu=(iu.empty=function(){return new iu({mapValue:{}})},iu.prototype.field=function(t){if(t.W())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Mo(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.K()])||null},iu.prototype.isEqual=function(t){return Eo(this.proto,t.proto)},iu),nu=(ru.prototype.set=function(t,e){return this.fn(t,e),this},ru.prototype.delete=function(t){return this.fn(t,null),this},ru.prototype.fn=function(t,e){for(var n=this._n,r=0;r<t.length-1;++r)var i=t.get(r),o=n.get(i),n=(o instanceof Map||(o=o&&10===Io(o)?new Map(Object.entries(o.mapValue.fields||{})):new Map,n.set(i,o)),o);n.set(t.K(),e)},ru.prototype.hn=function(){var t=this.dn(ci.X(),this._n);return null!=t?new eu(t):this.ln},ru.prototype.dn=function(r,t){var i=this,o=!1,e=this.ln.field(r),s=Mo(e)?Object.assign({},e.mapValue.fields):{};return t.forEach(function(t,e){var n;t instanceof Map?null!=(n=i.dn(r.child(e),t))&&(s[e]=n,o=!0):null!==t?(s[e]=t,o=!0):s.hasOwnProperty(e)&&(delete s[e],o=!0)}),o?{mapValue:{fields:s}}:null},ru);function ru(t){void 0===t&&(t=eu.empty()),this.ln=t,this._n=new Map}function iu(t){this.proto=t}function ou(t,e){var n=this;return(n=Xs.call(this)||this).key=t,n.rn=e,n.type=4,n}function su(t,e){var n=this;return(n=Js.call(this)||this).key=t,n.rn=e,n.type=3,n}var uu,au,cu,Ee=function(t,e){this.key=t,this.version=e},hu=(n(vu,cu=Ee),vu.prototype.field=function(t){return this.wn.field(t)},vu.prototype.data=function(){return this.wn},vu.prototype.En=function(){return this.wn.proto},vu.prototype.isEqual=function(t){return t instanceof vu&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.an===t.an&&this.hasCommittedMutations===t.hasCommittedMutations&&this.wn.isEqual(t.wn)},vu.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.wn.toString()+", {hasLocalMutations: "+this.an+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(vu.prototype,"hasPendingWrites",{get:function(){return this.an||this.hasCommittedMutations},enumerable:!1,configurable:!0}),vu),fu=(n(yu,au=Ee),yu.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(yu.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),yu.prototype.isEqual=function(t){return t instanceof yu&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},yu),lu=(n(du,uu=Ee),du.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(du.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),du.prototype.isEqual=function(t){return t instanceof du&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},du),pu=function(t,e,n,r,i,o,s,u){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===u&&(u=null),this.path=t,this.collectionGroup=e,this.Tn=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=u,this.In=null,this.mn=null,this.startAt,this.endAt};function du(){return null!==uu&&uu.apply(this,arguments)||this}function yu(t,e,n){var r=this;return(r=au.call(this,t,e)||this).hasCommittedMutations=!(!n||!n.hasCommittedMutations),r}function vu(t,e,n,r){var i=this;return(i=cu.call(this,t,e)||this).wn=n,i.an=!!r.an,i.hasCommittedMutations=!!r.hasCommittedMutations,i}function gu(t,e,n,r,i,o,s,u){return new pu(t,e,n,r,i,o,s,u)}function mu(t){return new pu(t)}function wu(t){return!gi(t.limit)&&"F"===t.limitType}function bu(t){return!gi(t.limit)&&"L"===t.limitType}function _u(t){return 0<t.Tn.length?t.Tn[0].field:null}function Iu(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.An())return r.field}return null}function Eu(t){return null!==t.collectionGroup}function Tu(t){var e=t;if(null===e.In){e.In=[];var n=Iu(e),t=_u(e);if(null!==n&&null===t)n.tt()||e.In.push(new ua(n)),e.In.push(new ua(ci.et(),"asc"));else{for(var r=!1,i=0,o=e.Tn;i<o.length;i++){var s=o[i];e.In.push(s),s.field.tt()&&(r=!0)}r||(n=0<e.Tn.length?e.Tn[e.Tn.length-1].dir:"asc",e.In.push(new ua(ci.et(),n)))}}return e.In}function Au(t){var e=t;if(!e.mn)if("F"===e.limitType)e.mn=_i(e.path,e.collectionGroup,Tu(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=Tu(e);r<i.length;r++){var o=i[r],s="desc"===o.dir?"asc":"desc";n.push(new ua(o.field,s))}var u=e.endAt?new Zu(e.endAt.position,!e.endAt.before):null,t=e.startAt?new Zu(e.startAt.position,!e.startAt.before):null;e.mn=_i(e.path,e.collectionGroup,n,e.filters,e.limit,u,t)}return e.mn}function Nu(t,e,n){return new pu(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Du(t,e){return Ei(Au(t),Au(e))&&t.limitType===e.limitType}function Su(t){return Ii(Au(t))+"|lt:"+t.limitType}function Ou(t){return"Query(target="+(e=Au(t),n=e.path.J(),null!==e.collectionGroup&&(n+=" collectionGroup="+e.collectionGroup),0<e.filters.length&&(n+=", filters: ["+e.filters.map(function(t){return(t=t).field.J()+" "+t.op+" "+Do(t.value)}).join(", ")+"]"),gi(e.limit)||(n+=", limit: "+e.limit),0<e.orderBy.length&&(n+=", orderBy: ["+e.orderBy.map(function(t){return(t=t).field.J()+" ("+t.dir+")"}).join(", ")+"]"),e.startAt&&(n+=", startAt: "+ia(e.startAt)),e.endAt&&(n+=", endAt: "+ia(e.endAt)),"Target("+n+")")+"; limitType="+t.limitType+")";var e,n}function xu(i,t){return e=i,n=t.key.path,(null!==e.collectionGroup?t.key.rt(e.collectionGroup)&&e.path.j(n):hi.ot(e.path)?e.path.isEqual(n):e.path.G(n))&&function(t){for(var e=0,n=i.Tn;e<n.length;e++){var r=n[e];if(!r.field.tt()&&null===t.field(r.field))return}return 1}(t)&&function(t){for(var e=0,n=i.filters;e<n.length;e++)if(!n[e].matches(t))return;return 1}(t)&&(n=t,(!(t=i).startAt||oa(t.startAt,Tu(t),n))&&(!t.endAt||!oa(t.endAt,Tu(t),n)));var e,n}function ku(u){return function(t,e){for(var n=!1,r=0,i=Tu(u);r<i.length;r++){var o=i[r],s=function(t,r,e){e=t.field.tt()?hi.$(r.key,e.key):function(t,e){var n=r.field(t),t=e.field(t);return null!==n&&null!==t?Ao(n,t):Vr()}(t.field,e);switch(t.dir){case"asc":return e;case"desc":return-1*e;default:return Vr()}}(o,t,e);if(0!==s)return s;n=n||o.field.tt()}return 0}}var Pu,Ru=(n(Lu,Pu=function(){}),Lu.create=function(t,e,n){return t.tt()?"in"===e||"not-in"===e?this.Rn(t,e,n):new Uu(t,e,n):"array-contains"===e?new $u(t,n):"in"===e?new Yu(t,n):"not-in"===e?new Xu(t,n):"array-contains-any"===e?new Ju(t,n):new Lu(t,e,n)},Lu.Rn=function(t,e,n){return new("in"===e?qu:ju)(t,n)},Lu.prototype.matches=function(t){t=t.field(this.field);return"!="===this.op?null!==t&&this.Pn(Ao(t,this.value)):null!==t&&Io(this.value)===Io(t)&&this.Pn(Ao(t,this.value))},Lu.prototype.Pn=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return 0<t;case">=":return 0<=t;default:return Vr()}},Lu.prototype.An=function(){return 0<=["<","<=",">",">=","!=","not-in"].indexOf(this.op)},Lu);function Lu(t,e,n){var r=this;return(r=Pu.call(this)||this).field=t,r.op=e,r.value=n,r}var Cu,Mu,Vu,Uu=(n(zu,Vu=Ru),zu.prototype.matches=function(t){t=hi.$(t.key,this.key);return this.Pn(t)},zu),qu=(n(Bu,Mu=Ru),Bu.prototype.matches=function(e){return this.keys.some(function(t){return t.isEqual(e.key)})},Bu),ju=(n(Fu,Cu=Ru),Fu.prototype.matches=function(e){return!this.keys.some(function(t){return t.isEqual(e.key)})},Fu);function Fu(t,e){var n=this;return(n=Cu.call(this,t,"not-in",e)||this).keys=Gu(0,e),n}function Bu(t,e){var n=this;return(n=Mu.call(this,t,"in",e)||this).keys=Gu(0,e),n}function zu(t,e,n){var r=this;return(r=Vu.call(this,t,e,n)||this).key=hi.it(n.referenceValue),r}function Gu(t,e){return((null===(e=e.arrayValue)||void 0===e?void 0:e.values)||[]).map(function(t){return hi.it(t.referenceValue)})}var Ku,Wu,Hu,Qu,$u=(n(ra,Qu=Ru),ra.prototype.matches=function(t){t=t.field(this.field);return Ro(t)&&To(t.arrayValue,this.value)},ra),Yu=(n(na,Hu=Ru),na.prototype.matches=function(t){t=t.field(this.field);return null!==t&&To(this.value.arrayValue,t)},na),Xu=(n(ea,Wu=Ru),ea.prototype.matches=function(t){if(To(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;t=t.field(this.field);return null!==t&&!To(this.value.arrayValue,t)},ea),Ju=(n(ta,Ku=Ru),ta.prototype.matches=function(t){var e=this,t=t.field(this.field);return!(!Ro(t)||!t.arrayValue.values)&&t.arrayValue.values.some(function(t){return To(e.value.arrayValue,t)})},ta),Zu=function(t,e){this.position=t,this.before=e};function ta(t,e){return Ku.call(this,t,"array-contains-any",e)||this}function ea(t,e){return Wu.call(this,t,"not-in",e)||this}function na(t,e){return Hu.call(this,t,"in",e)||this}function ra(t,e){return Qu.call(this,t,"array-contains",e)||this}function ia(t){return(t.before?"b":"a")+":"+t.position.map(Do).join(",")}function oa(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i],r=o.field.tt()?hi.$(hi.it(s.referenceValue),n.key):Ao(s,n.field(o.field));if("desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function sa(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!Eo(t.position[n],e.position[n]))return!1;return!0}var ua=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};var aa=(ga.prototype.yn=function(t,e,n){for(var r=n.Vn,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Ms(o,e,r[i]))}return e},ga.prototype.pn=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++){var i=r[n];i.key.isEqual(t)&&(e=Vs(i,e,e,this.gn))}for(var o=e,s=0,u=this.mutations;s<u.length;s++){var a=u[s];a.key.isEqual(t)&&(e=Vs(a,e,o,this.gn))}return e},ga.prototype.vn=function(n){var r=this,i=n;return this.mutations.forEach(function(t){var e=r.pn(t.key,n.get(t.key));e&&(i=i.Tt(t.key,e))}),i},ga.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},Qi())},ga.prototype.isEqual=function(t){return this.batchId===t.batchId&&ei(this.mutations,t.mutations,Us)&&ei(this.baseMutations,t.baseMutations,Us)},ga),ca=(va.from=function(t,e,n){Ur(t.mutations.length===n.length);for(var r=Wi,i=t.mutations,o=0;o<i.length;o++)r=r.Tt(i[o].key,n[o].version);return new va(t,e,n,r)},va),ha=(ya.prototype.get=function(t){var e=this.Dn(t),e=this.Nn[e];if(void 0!==e)for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];if(this.Cn(o,t))return i}},ya.prototype.has=function(t){return void 0!==this.get(t)},ya.prototype.set=function(t,e){var n=this.Dn(t),r=this.Nn[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.Cn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.Nn[n]=[[t,e]]},ya.prototype.delete=function(t){var e=this.Dn(t),n=this.Nn[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.Cn(n[r][0],t))return 1===n.length?delete this.Nn[e]:n.splice(r,1),!0;return!1},ya.prototype.forEach=function(s){go(this.Nn,function(t,e){for(var n=0,r=e;n<r.length;n++){var i=r[n],o=i[0],i=i[1];s(o,i)}})},ya.prototype.W=function(){return mo(this.Nn)},ya),fa=(da.prototype.catch=function(t){return this.next(void 0,t)},da.prototype.next=function(r,i){var o=this;return this.Mn&&Vr(),this.Mn=!0,this.On?this.error?this.kn(i,this.error):this.$n(r,this.result):new da(function(e,n){o.xn=function(t){o.$n(r,t).next(e,n)},o.Fn=function(t){o.kn(i,t).next(e,n)}})},da.prototype.Ln=function(){var n=this;return new Promise(function(t,e){n.next(t,e)})},da.prototype.Bn=function(t){try{var e=t();return e instanceof da?e:da.resolve(e)}catch(t){return da.reject(t)}},da.prototype.$n=function(t,e){return t?this.Bn(function(){return t(e)}):da.resolve(e)},da.prototype.kn=function(t,e){return t?this.Bn(function(){return t(e)}):da.reject(e)},da.resolve=function(n){return new da(function(t,e){t(n)})},da.reject=function(n){return new da(function(t,e){e(n)})},da.qn=function(t){return new da(function(e,n){var r=0,i=0,o=!1;t.forEach(function(t){++r,t.next(function(){++i,o&&i===r&&e()},function(t){return n(t)})}),o=!0,i===r&&e()})},da.Un=function(t){for(var n=da.resolve(!1),e=0,r=t;e<r.length;e++)!function(e){n=n.next(function(t){return t?da.resolve(t):e()})}(r[e]);return n},da.forEach=function(t,n){var r=this,i=[];return t.forEach(function(t,e){i.push(n.call(r,t,e))}),this.qn(i)},da),h=(pa.prototype.Wn=function(t){t=this.Qn.get(t);return t?t.readTime:si.min()},pa.prototype.jn=function(t,e){this.Gn(),this.Qn.set(t.key,{zn:t,readTime:e})},pa.prototype.Hn=function(t,e){void 0===e&&(e=null),this.Gn(),this.Qn.set(t,{zn:null,readTime:e})},pa.prototype.Jn=function(t,e){this.Gn();var n=this.Qn.get(e);return void 0!==n?fa.resolve(n.zn):this.Yn(t,e)},pa.prototype.getEntries=function(t,e){return this.Xn(t,e)},pa.prototype.apply=function(t){return this.Gn(),this.Kn=!0,this.Zn(t)},pa.prototype.Gn=function(){},pa),la=function(){var n=this;this.promise=new Promise(function(t,e){n.resolve=t,n.reject=e})};function pa(){this.Qn=new ha(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.Kn=!1}function da(t){var e=this;this.xn=null,this.Fn=null,this.result=void 0,this.error=void 0,this.On=!1,this.Mn=!1,t(function(t){e.On=!0,e.result=t,e.xn&&e.xn(t)},function(t){e.On=!0,e.error=t,e.Fn&&e.Fn(t)})}function ya(t,e){this.Dn=t,this.Cn=e,this.Nn={}}function va(t,e,n,r){this.batch=t,this.bn=e,this.Vn=n,this.Sn=r}function ga(t,e,n,r){this.batchId=t,this.gn=e,this.baseMutations=n,this.mutations=r}function ma(t){return new qo(t,!0)}function wa(i){return function(){if("object"==typeof i&&null!==i)for(var t=i,e=0,n=["next","error","complete"];e<n.length;e++){var r=n[e];if(r in t&&"function"==typeof t[r])return 1}}()}var ba="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Ie=(Da.prototype.es=function(t){this.ts.push(t)},Da.prototype.ns=function(){this.ts.forEach(function(t){return t()})},Da),_a=(Na.prototype.cs=function(e,n){var r=this;return this.rs.us(e,n).next(function(t){return r.hs(e,n,t)})},Na.prototype.hs=function(t,r,i){return this.ss.Jn(t,r).next(function(t){for(var e=0,n=i;e<n.length;e++)t=n[e].pn(r,t);return t})},Na.prototype.ls=function(t,e,i){var o=Bi;return e.forEach(function(t,e){for(var n=0,r=i;n<r.length;n++)e=r[n].pn(t,e);o=o.Tt(t,e)}),o},Na.prototype._s=function(e,t){var n=this;return this.ss.getEntries(e,t).next(function(t){return n.fs(e,t)})},Na.prototype.fs=function(e,r){var i=this;return this.rs.ds(e,r).next(function(t){var t=i.ls(e,r,t),n=Bi;return t.forEach(function(t,e){e=e||new fu(t,si.min()),n=n.Tt(t,e)}),n})},Na.prototype.ws=function(t,e,n){return r=e,hi.ot(r.path)&&null===r.collectionGroup&&0===r.filters.length?this.Es(t,e.path):Eu(e)?this.Ts(t,e,n):this.Is(t,e,n);var r},Na.prototype.Es=function(t,e){return this.cs(t,new hi(e)).next(function(t){var e=Ki;return t instanceof hu&&(e=e.Tt(t.key,t)),e})},Na.prototype.Ts=function(n,r,i){var o=this,s=r.collectionGroup,u=Ki;return this.os.As(n,s).next(function(t){return fa.forEach(t,function(t){var e,e=(e=r,t=t.child(s),new pu(t,null,e.Tn.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt));return o.Is(n,e,i).next(function(t){t.forEach(function(t,e){u=u.Tt(t,e)})})}).next(function(){return u})})},Na.prototype.Is=function(e,n,t){var c,h,r=this;return this.ss.ws(e,n,t).next(function(t){return c=t,r.rs.Rs(e,n)}).next(function(t){return h=t,r.Ps(e,h,c).next(function(t){c=t;for(var e=0,n=h;e<n.length;e++)for(var r=n[e],i=0,o=r.mutations;i<o.length;i++){var s=o[i],u=s.key,a=c.get(u),a=Vs(s,a,a,r.gn);c=a instanceof hu?c.Tt(u,a):c.remove(u)}})}).next(function(){return c.forEach(function(t,e){xu(n,e)||(c=c.remove(t))}),c})},Na.prototype.Ps=function(t,e,n){for(var r=Qi(),i=0,o=e;i<o.length;i++)for(var s=0,u=o[i].mutations;s<u.length;s++){var a=u[s];a instanceof zs&&null===n.get(a.key)&&(r=r.add(a.key))}var c=n;return this.ss.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof hu&&(c=c.Tt(t,e))}),c})},Na),Ia=(Aa.Vs=function(t,e){for(var n=Qi(),r=Qi(),i=0,o=e.docChanges;i<o.length;i++){var s=o[i];switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}}return new Aa(t,e.fromCache,n,r)},Aa),Ea=(Ta.prototype.vs=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},Ta.prototype.next=function(){var t=++this.previousValue;return this.bs&&this.bs(t),t},Ta);function Ta(t,e){var n=this;this.previousValue=t,e&&(e.ps=function(t){return n.vs(t)},this.bs=function(t){return e.Ss(t)})}function Aa(t,e,n,r){this.targetId=t,this.fromCache=e,this.gs=n,this.ys=r}function Na(t,e,n){this.ss=t,this.rs=e,this.os=n}function Da(){this.ts=[]}Ea.Ds=-1;var Sa,Oa=(Ma.prototype.reset=function(){this.Ms=0},Ma.prototype.Ls=function(){this.Ms=this.Os},Ma.prototype.Bs=function(t){var e=this;this.cancel();var n=Math.floor(this.Ms+this.qs()),r=Math.max(0,Date.now()-this.$s),i=Math.max(0,n-r);0<i&&Rr("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Ms+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.ks=this.Cs.Us(this.Ns,i,function(){return e.$s=Date.now(),t()}),this.Ms*=this.Fs,this.Ms<this.xs&&(this.Ms=this.xs),this.Ms>this.Os&&(this.Ms=this.Os)},Ma.prototype.Qs=function(){null!==this.ks&&(this.ks.Ks(),this.ks=null)},Ma.prototype.cancel=function(){null!==this.ks&&(this.ks.cancel(),this.ks=null)},Ma.prototype.qs=function(){return(Math.random()-.5)*this.Ms},Ma),xa=(Ca.delete=function(t){return Rr("SimpleDb","Removing database:",t),Ba(window.indexedDB.deleteDatabase(t)).Ln()},Ca.Gs=function(){if("undefined"==typeof indexedDB)return!1;if(Ca.zs())return!0;var t=p(),e=Ca.js(t),n=0<e&&e<10,e=Ca.Hs(t),e=0<e&&e<4.5;return!(0<t.indexOf("MSIE ")||0<t.indexOf("Trident/")||0<t.indexOf("Edge/")||n||e)},Ca.zs=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.Js)},Ca.Ys=function(t,e){return t.store(e)},Ca.js=function(t){t=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),t=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(t)},Ca.Hs=function(t){t=t.match(/Android ([\d.]+)/i),t=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(t)},Ca.prototype.Xs=function(o){return y(this,void 0,void 0,function(){var e,i=this;return v(this,function(t){switch(t.label){case 0:return this.db?[3,2]:(Rr("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,n){var r=indexedDB.open(i.name,i.version);r.onsuccess=function(t){t=t.target.result;e(t)},r.onblocked=function(){n(new Pa(o,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=function(t){t=t.target.error;"VersionError"===t.name?n(new Br(Fr.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):n(new Pa(o,t))},r.onupgradeneeded=function(t){Rr("SimpleDb",'Database "'+i.name+'" requires upgrade from version:',t.oldVersion);var e=t.target.result;i.Ws.createOrUpgrade(e,r.transaction,t.oldVersion,i.version).next(function(){Rr("SimpleDb","Database upgrade to version "+i.version+" complete")})}})]);case 1:e.db=t.sent(),t.label=2;case 2:return[2,(this.Zs&&(this.db.onversionchange=function(t){return i.Zs(t)}),this.db)]}})})},Ca.prototype.ti=function(e){this.Zs=e,this.db&&(this.db.onversionchange=function(t){return e(t)})},Ca.prototype.runTransaction=function(u,n,a,c){return y(this,void 0,void 0,function(){var i,o,s,e;return v(this,function(t){switch(t.label){case 0:i="readonly"===n,o=0,e=function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:++o,t.label=1;case 1:return t.trys.push([1,4,,5]),[4,s.Xs(u)];case 2:return s.db=t.sent(),e=Ua.open(s.db,u,i?"readonly":"readwrite",a),n=c(e).catch(function(t){return e.abort(t),fa.reject(t)}).Ln(),r={},n.catch(function(){}),[4,e.ei];case 3:return[2,(r.value=(t.sent(),n),r)];case 4:return n=t.sent(),r="FirebaseError"!==n.name&&o<3,Rr("SimpleDb","Transaction failed with error:",n.message,"Retrying:",r),s.close(),r?[3,5]:[2,{value:Promise.reject(n)}];case 5:return[2]}})},s=this,t.label=1;case 1:return[5,e()];case 2:if("object"==typeof(e=t.sent()))return[2,e.value];t.label=3;case 3:return[3,1];case 4:return[2]}})})},Ca.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},Ca),ka=(Object.defineProperty(La.prototype,"On",{get:function(){return this.si},enumerable:!1,configurable:!0}),Object.defineProperty(La.prototype,"ri",{get:function(){return this.ii},enumerable:!1,configurable:!0}),Object.defineProperty(La.prototype,"cursor",{set:function(t){this.ni=t},enumerable:!1,configurable:!0}),La.prototype.done=function(){this.si=!0},La.prototype.oi=function(t){this.ii=t},La.prototype.delete=function(){return Ba(this.ni.delete())},La),Pa=(n(Ra,Sa=Br),Ra);function Ra(t,e){var n=this;return(n=Sa.call(this,Fr.UNAVAILABLE,"IndexedDB transaction '"+t+"' failed: "+e)||this).name="IndexedDbTransactionError",n}function La(t){this.ni=t,this.si=!1,this.ii=null}function Ca(t,e,n){this.name=t,this.version=e,this.Ws=n,12.2===Ca.js(p())&&Lr("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}function Ma(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Cs=t,this.Ns=e,this.xs=n,this.Fs=r,this.Os=i,this.Ms=0,this.ks=null,this.$s=Date.now(),this.reset()}function Va(t){return"IndexedDbTransactionError"===t.name}var Ua=(Fa.open=function(t,e,n,r){try{return new Fa(e,t.transaction(r,n))}catch(t){throw new Pa(e,t)}},Object.defineProperty(Fa.prototype,"ei",{get:function(){return this.ci.promise},enumerable:!1,configurable:!0}),Fa.prototype.abort=function(t){t&&this.ci.reject(t),this.aborted||(Rr("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},Fa.prototype.store=function(t){t=this.transaction.objectStore(t);return new qa(t)},Fa),qa=(ja.prototype.put=function(t,e){t=void 0!==e?(Rr("SimpleDb","PUT",this.store.name,t,e),this.store.put(e,t)):(Rr("SimpleDb","PUT",this.store.name,"<auto-key>",t),this.store.put(t));return Ba(t)},ja.prototype.add=function(t){return Rr("SimpleDb","ADD",this.store.name,t,t),Ba(this.store.add(t))},ja.prototype.get=function(e){var n=this;return Ba(this.store.get(e)).next(function(t){return void 0===t&&(t=null),Rr("SimpleDb","GET",n.store.name,e,t),t})},ja.prototype.delete=function(t){return Rr("SimpleDb","DELETE",this.store.name,t),Ba(this.store.delete(t))},ja.prototype.count=function(){return Rr("SimpleDb","COUNT",this.store.name),Ba(this.store.count())},ja.prototype.ui=function(t,e){var e=this.cursor(this.options(t,e)),n=[];return this.ai(e,function(t,e){n.push(e)}).next(function(){return n})},ja.prototype.hi=function(t,e){Rr("SimpleDb","DELETE ALL",this.store.name);e=this.options(t,e);e.li=!1;e=this.cursor(e);return this.ai(e,function(t,e,n){return n.delete()})},ja.prototype._i=function(t,e){e?n=t:(n={},e=t);var n=this.cursor(n);return this.ai(n,e)},ja.prototype.fi=function(r){var t=this.cursor({});return new fa(function(n,e){t.onerror=function(t){t=Ga(t.target.error);e(t)},t.onsuccess=function(t){var e=t.target.result;e?r(e.primaryKey,e.value).next(function(t){t?e.continue():n()}):n()}})},ja.prototype.ai=function(t,i){var o=[];return new fa(function(r,e){t.onerror=function(t){e(t.target.error)},t.onsuccess=function(t){var e,n=t.target.result;n?(e=new ka(n),(t=i(n.primaryKey,n.value,e))instanceof fa&&(t=t.catch(function(t){return e.done(),fa.reject(t)}),o.push(t)),e.On?r():null===e.ri?n.continue():n.continue(e.ri)):r()}}).next(function(){return fa.qn(o)})},ja.prototype.options=function(t,e){var n=void 0;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},ja.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.li?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},ja);function ja(t){this.store=t}function Fa(e,t){var n=this;this.action=e,this.transaction=t,this.aborted=!1,this.ci=new la,this.transaction.oncomplete=function(){n.ci.resolve()},this.transaction.onabort=function(){t.error?n.ci.reject(new Pa(e,t.error)):n.ci.resolve()},this.transaction.onerror=function(t){t=Ga(t.target.error);n.ci.reject(new Pa(e,t))}}function Ba(t){return new fa(function(e,n){t.onsuccess=function(t){t=t.target.result;e(t)},t.onerror=function(t){t=Ga(t.target.error);n(t)}})}var za=!1;function Ga(t){var e=xa.js(p());if(12.2<=e&&e<13){e="An internal error was encountered in the Indexed Database server";if(0<=t.message.indexOf(e)){var n=new Br("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+e+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return za||(za=!0,setTimeout(function(){throw n},0)),n}}return t}function Ka(){return"undefined"!=typeof window?window:null}function Wa(){return"undefined"!=typeof document?document:null}var Ha=(Ya.Ii=function(t,e,n,r,i){i=new Ya(t,e,Date.now()+n,r,i);return i.start(n),i},Ya.prototype.start=function(t){var e=this;this.mi=setTimeout(function(){return e.Ai()},t)},Ya.prototype.Ks=function(){return this.Ai()},Ya.prototype.cancel=function(t){null!==this.mi&&(this.clearTimeout(),this.Ti.reject(new Br(Fr.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},Ya.prototype.Ai=function(){var e=this;this.di.Ri(function(){return null!==e.mi?(e.clearTimeout(),e.op().then(function(t){return e.Ti.resolve(t)})):Promise.resolve()})},Ya.prototype.clearTimeout=function(){null!==this.mi&&(this.Ei(this),clearTimeout(this.mi),this.mi=null)},Ya),Qa=(Object.defineProperty($a.prototype,"Ci",{get:function(){return this.yi},enumerable:!1,configurable:!0}),$a.prototype.Ri=function(t){this.enqueue(t)},$a.prototype.Ni=function(t){this.xi(),this.Fi(t)},$a.prototype.Oi=function(){var t;this.yi||(this.yi=!0,(t=Wa())&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Di))},$a.prototype.enqueue=function(t){return this.xi(),this.yi?new Promise(function(t){}):this.Fi(t)},$a.prototype.Mi=function(t){var e=this;this.Ri(function(){return e.gi.push(t),e.ki()})},$a.prototype.ki=function(){return y(this,void 0,void 0,function(){var e,n=this;return v(this,function(t){switch(t.label){case 0:if(0===this.gi.length)return[3,5];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,this.gi[0]()];case 2:return t.sent(),this.gi.shift(),this.Si.reset(),[3,4];case 3:if(!Va(e=t.sent()))throw e;return Rr("AsyncQueue","Operation failed with retryable error: "+e),[3,4];case 4:0<this.gi.length&&this.Si.Bs(function(){return n.ki()}),t.label=5;case 5:return[2]}})})},$a.prototype.Fi=function(t){var r=this,e=this.Pi.then(function(){return r.vi=!0,t().catch(function(t){throw r.pi=t,r.vi=!1,Lr("INTERNAL UNHANDLED ERROR: ",(n=(e=t).message||"",e.stack&&(n=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),n)),t;var e,n}).then(function(t){return r.vi=!1,t})});return this.Pi=e},$a.prototype.Us=function(t,e,n){var r=this;this.xi(),-1<this.bi.indexOf(t)&&(e=0);n=Ha.Ii(this,t,e,n,function(t){return r.$i(t)});return this.Vi.push(n),n},$a.prototype.xi=function(){this.pi&&Vr()},$a.prototype.Li=function(){},$a.prototype.Bi=function(){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return[4,e=this.Pi];case 1:t.sent(),t.label=2;case 2:if(e!==this.Pi)return[3,0];t.label=3;case 3:return[2]}})})},$a.prototype.qi=function(t){for(var e=0,n=this.Vi;e<n.length;e++)if(n[e].Ns===t)return!0;return!1},$a.prototype.Ui=function(r){var i=this;return this.Bi().then(function(){i.Vi.sort(function(t,e){return t.wi-e.wi});for(var t=0,e=i.Vi;t<e.length;t++){var n=e[t];if(n.Ks(),"all"!==r&&n.Ns===r)break}return i.Bi()})},$a.prototype.Qi=function(t){this.bi.push(t)},$a.prototype.$i=function(t){t=this.Vi.indexOf(t);this.Vi.splice(t,1)},$a);function $a(){var e=this;this.Pi=Promise.resolve(),this.gi=[],this.yi=!1,this.Vi=[],this.pi=null,this.vi=!1,this.bi=[],this.Si=new Oa(this,"async_queue_retry"),this.Di=function(){var t=Wa();t&&Rr("AsyncQueue","Visibility state changed to "+t.visibilityState),e.Si.Qs()};var t=Wa();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.Di)}function Ya(t,e,n,r,i){this.di=t,this.Ns=e,this.wi=n,this.op=r,this.Ei=i,this.Ti=new la,this.then=this.Ti.promise.then.bind(this.Ti.promise),this.Ti.promise.catch(function(t){})}function Xa(t,e){if(Lr("AsyncQueue",e+": "+t),Va(t))return new Br(Fr.UNAVAILABLE,e+": "+t);throw t}function Ja(t,e){var n=t[0],r=t[1],t=e[0],e=e[1],t=ti(n,t);return 0===t?ti(r,e):t}var Za=(rc.prototype.ji=function(){return++this.Wi},rc.prototype.Gi=function(t){var e=[t,this.ji()];this.buffer.size<this.Ki?this.buffer=this.buffer.add(e):Ja(e,t=this.buffer.last())<0&&(this.buffer=this.buffer.delete(t).add(e))},Object.defineProperty(rc.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),rc),tc={zi:!1,Hi:0,Ji:0,Yi:0},ec=(nc.er=function(t){return new nc(t,nc.nr,nc.sr)},nc);function nc(t,e,n){this.Xi=t,this.Zi=e,this.tr=n}function rc(t){this.Ki=t,this.buffer=new ji(Ja),this.Wi=0}ec.nr=10,ec.sr=1e3,ec.ir=new ec(41943040,ec.nr,ec.sr),ec.rr=new ec(-1,0,0);var ic=(cc.prototype.start=function(t){-1!==this.cr.params.Xi&&this.hr(t)},cc.prototype.stop=function(){this.ar&&(this.ar.cancel(),this.ar=null)},Object.defineProperty(cc.prototype,"lr",{get:function(){return null!==this.ar},enumerable:!1,configurable:!0}),cc.prototype.hr=function(n){var t=this,e=this.ur?3e5:6e4;Rr("LruGarbageCollector","Garbage collection scheduled in "+e+"ms"),this.ar=this.di.Us("lru_garbage_collection",e,function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:this.ar=null,this.ur=!0,t.label=1;case 1:return t.trys.push([1,3,,7]),[4,n._r(this.cr)];case 2:return t.sent(),[3,7];case 3:return Va(e=t.sent())?(Rr("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,Yh(e)];case 5:t.sent(),t.label=6;case 6:return[3,7];case 7:return[4,this.hr(n)];case 8:return t.sent(),[2]}})})})},cc),oc=(ac.prototype.wr=function(t,e){return this.dr.Er(t).next(function(t){return Math.floor(e/100*t)})},ac.prototype.Tr=function(t,e){var n=this;if(0===e)return fa.resolve(Ea.Ds);var r=new Za(e);return this.dr.Ue(t,function(t){return r.Gi(t.sequenceNumber)}).next(function(){return n.dr.Ir(t,function(t){return r.Gi(t)})}).next(function(){return r.maxValue})},ac.prototype.mr=function(t,e,n){return this.dr.mr(t,e,n)},ac.prototype.Ar=function(t,e){return this.dr.Ar(t,e)},ac.prototype.Rr=function(e,n){var r=this;return-1===this.params.Xi?(Rr("LruGarbageCollector","Garbage collection skipped; disabled"),fa.resolve(tc)):this.Pr(e).next(function(t){return t<r.params.Xi?(Rr("LruGarbageCollector","Garbage collection skipped; Cache size "+t+" is lower than threshold "+r.params.Xi),tc):r.gr(e,n)})},ac.prototype.Pr=function(t){return this.dr.Pr(t)},ac.prototype.gr=function(e,n){var r,i,o,s,u,a,c,h=this,f=Date.now();return this.wr(e,this.params.Zi).next(function(t){return i=t>h.params.tr?(Rr("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+h.params.tr+" from "+t),h.params.tr):t,s=Date.now(),h.Tr(e,i)}).next(function(t){return r=t,u=Date.now(),h.mr(e,r,n)}).next(function(t){return o=t,a=Date.now(),h.Ar(e,r)}).next(function(t){return c=Date.now(),Pr()<=l.DEBUG&&Rr("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(s-f)+"ms\n\tDetermined least recently used "+i+" in "+(u-s)+"ms\n\tRemoved "+o+" targets in "+(a-u)+"ms\n\tRemoved "+t+" documents in "+(c-a)+"ms\nTotal Duration: "+(c-f)+"ms"),fa.resolve({zi:!0,Hi:i,Ji:o,Yi:t})})},ac),sc=(uc.prototype.yr=function(t){this.Vr=t},uc.prototype.ws=function(e,r,i,o){var s=this;return 0===r.filters.length&&null===r.limit&&null==r.startAt&&null==r.endAt&&(0===r.Tn.length||1===r.Tn.length&&r.Tn[0].field.tt())||i.isEqual(si.min())?this.pr(e,r):this.Vr._s(e,o).next(function(t){var n=s.vr(r,t);return(wu(r)||bu(r))&&s.br(r.limitType,n,o,i)?s.pr(e,r):(Pr()<=l.DEBUG&&Rr("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ou(r)),s.Vr.ws(e,r,i).next(function(e){return n.forEach(function(t){e=e.Tt(t.key,t)}),e}))})},uc.prototype.vr=function(n,t){var r=new ji(ku(n));return t.forEach(function(t,e){e instanceof hu&&xu(n,e)&&(r=r.add(e))}),r},uc.prototype.br=function(t,e,n,r){if(n.size!==e.size)return!0;e="F"===t?e.last():e.first();return!!e&&(e.hasPendingWrites||0<e.version.F(r))},uc.prototype.pr=function(t,e){return Pr()<=l.DEBUG&&Rr("QueryEngine","Using full collection scan to execute query:",Ou(e)),this.Vr.ws(t,e,si.min())},uc);function uc(){}function ac(t,e){this.dr=t,this.params=e}function cc(t,e){this.cr=t,this.di=e,this.ur=!1,this.ar=null}function hc(t){for(var e="",n=0;n<t.length;n++)0<e.length&&(e=fc(e)),e=function(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}(t.get(n),e);return fc(e)}function fc(t){return t+"\x01\x01"}function lc(t){var e=t.length;if(Ur(2<=e),2===e)return Ur("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),ui.X();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||n<s)&&Vr(),t.charAt(s+1)){case"\x01":var u=t.substring(o,s),a=void 0;0===i.length?a=u:(a=i+=u,i=""),r.push(a);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Vr()}o=s+2}return new ui(r)}var pc=function(t){this.Sr=t};function dc(t,e){if(e.document)return n=t.Sr,r=e.document,i=!!e.hasCommittedMutations,t=$o(n,r.name),n=Ko(r.updateTime),r=new eu({mapValue:{fields:r.fields}}),new hu(t,n,r,{hasCommittedMutations:!!i});var n,r;if(e.noDocument){var i=hi.ct(e.noDocument.path),o=wc(e.noDocument.readTime);return new fu(i,o,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){o=hi.ct(e.unknownDocument.path),e=wc(e.unknownDocument.version);return new lu(o,e)}return Vr()}function yc(t,e,n){var r=vc(n),n=e.key.path.q().H();if(e instanceof hu){var i={name:Qo(i=t.Sr,(o=e).key),fields:o.En().mapValue.fields,updateTime:zo(i,o.version.M())},o=e.hasCommittedMutations;return new th(null,null,i,o,r,n)}if(e instanceof fu){var i=e.key.path.H(),o=mc(e.version),s=e.hasCommittedMutations;return new th(null,new Jc(i,o),null,s,r,n)}if(e instanceof lu){s=e.key.path.H(),e=mc(e.version);return new th(new Zc(s,e),null,null,!0,r,n)}return Vr()}function vc(t){t=t.M();return[t.seconds,t.nanoseconds]}function gc(t){t=new oi(t[0],t[1]);return si.N(t)}function mc(t){t=t.M();return new zc(t.seconds,t.nanoseconds)}function wc(t){t=new oi(t.seconds,t.nanoseconds);return si.N(t)}function bc(e,t){var n=(t.baseMutations||[]).map(function(t){return ns(e.Sr,t)}),r=t.mutations.map(function(t){return ns(e.Sr,t)}),i=oi.fromMillis(t.localWriteTimeMs);return new aa(t.batchId,i,n,r)}function _c(t){var e=wc(t.readTime),n=void 0!==t.lastLimboFreeSnapshotVersion?wc(t.lastLimboFreeSnapshotVersion):si.min(),r=void 0!==t.query.documents?(Ur(1===(r=t.query).documents.length),Au(mu(Xo(r.documents[0])))):Au(os(t.query));return new Oi(r,t.targetId,0,t.lastListenSequenceNumber,e,n,Ai.fromBase64String(t.resumeToken))}function Ic(t,e){var n=mc(e.ft),r=mc(e.lastLimboFreeSnapshotVersion),i=(Ti(e.target)?rs:is)(t.Sr,e.target),t=e.resumeToken.toBase64();return new nh(e.targetId,Ii(e.target),n,t,e.sequenceNumber,r,i)}function Ec(t){var e=os({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?Nu(e,e.limit,"L"):e}var Tc=(Ac.Nr=function(t,e,n,r){return Ur(""!==t.uid),new Ac(t.u()?t.uid:"",e,n,r)},Ac.prototype.Fr=function(t){var r=!0,e=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return Sc(t)._i({index:$c.userMutationsIndex,range:e},function(t,e,n){r=!1,n.done()}).next(function(){return r})},Ac.prototype.Or=function(d,y,v,g){var m=this,w=Oc(d),b=Sc(d);return b.add({}).next(function(t){Ur("number"==typeof t);for(var e,n,r,i,o,s=new aa(t,y,v,g),u=(e=m.serializer,n=m.userId,i=(r=s).baseMutations.map(function(t){return es(e.Sr,t)}),o=r.mutations.map(function(t){return es(e.Sr,t)}),new $c(n,r.batchId,r.gn.toMillis(),i,o)),a=[],c=new ji(function(t,e){return ti(t.J(),e.J())}),h=0,f=g;h<f.length;h++){var l=f[h],p=Yc.key(m.userId,l.key.path,t),c=c.add(l.key.path.q());a.push(b.put(u)),a.push(w.put(p,Yc.PLACEHOLDER))}return c.forEach(function(t){a.push(m.os.Mr(d,t))}),d.es(function(){m.Cr[t]=s.keys()}),fa.qn(a).next(function(){return s})})},Ac.prototype.kr=function(t,e){var n=this;return Sc(t).get(e).next(function(t){return t?(Ur(t.userId===n.userId),bc(n.serializer,t)):null})},Ac.prototype.$r=function(t,e){var n=this;return this.Cr[e]?fa.resolve(this.Cr[e]):this.kr(t,e).next(function(t){if(t){t=t.keys();return n.Cr[e]=t}return null})},Ac.prototype.Lr=function(t,e){var r=this,i=e+1,e=IDBKeyRange.lowerBound([this.userId,i]),o=null;return Sc(t)._i({index:$c.userMutationsIndex,range:e},function(t,e,n){e.userId===r.userId&&(Ur(e.batchId>=i),o=bc(r.serializer,e)),n.done()}).next(function(){return o})},Ac.prototype.Br=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),r=-1;return Sc(t)._i({index:$c.userMutationsIndex,range:e,reverse:!0},function(t,e,n){r=e.batchId,n.done()}).next(function(){return r})},Ac.prototype.qr=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return Sc(t).ui($c.userMutationsIndex,n).next(function(t){return t.map(function(t){return bc(e.serializer,t)})})},Ac.prototype.us=function(o,s){var u=this,t=Yc.prefixForPath(this.userId,s.path),t=IDBKeyRange.lowerBound(t),a=[];return Oc(o)._i({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=lc(i);if(r===u.userId&&s.path.isEqual(i))return Sc(o).get(t).next(function(t){if(!t)throw Vr();Ur(t.userId===u.userId),a.push(bc(u.serializer,t))});n.done()}).next(function(){return a})},Ac.prototype.ds=function(e,t){var s=this,u=new ji(ti),n=[];return t.forEach(function(o){var t=Yc.prefixForPath(s.userId,o.path),t=IDBKeyRange.lowerBound(t),t=Oc(e)._i({range:t},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=lc(i);r===s.userId&&o.path.isEqual(i)?u=u.add(t):n.done()});n.push(t)}),fa.qn(n).next(function(){return s.Ur(e,u)})},Ac.prototype.Rs=function(t,e){var o=this,s=e.path,u=s.length+1,e=Yc.prefixForPath(this.userId,s),e=IDBKeyRange.lowerBound(e),a=new ji(ti);return Oc(t)._i({range:e},function(t,e,n){var r=t[0],i=t[1],t=t[2],i=lc(i);r===o.userId&&s.j(i)?i.length===u&&(a=a.add(t)):n.done()}).next(function(){return o.Ur(t,a)})},Ac.prototype.Ur=function(e,t){var n=this,r=[],i=[];return t.forEach(function(t){i.push(Sc(e).get(t).next(function(t){if(null===t)throw Vr();Ur(t.userId===n.userId),r.push(bc(n.serializer,t))}))}),fa.qn(i).next(function(){return r})},Ac.prototype.Qr=function(e,n){var r=this;return Dc(e.Kr,this.userId,n).next(function(t){return e.es(function(){r.Wr(n.batchId)}),fa.forEach(t,function(t){return r.Dr.jr(e,t)})})},Ac.prototype.Wr=function(t){delete this.Cr[t]},Ac.prototype.Gr=function(e){var i=this;return this.Fr(e).next(function(t){if(!t)return fa.resolve();var t=IDBKeyRange.lowerBound(Yc.prefixForUser(i.userId)),r=[];return Oc(e)._i({range:t},function(t,e,n){t[0]===i.userId?(t=lc(t[1]),r.push(t)):n.done()}).next(function(){Ur(0===r.length)})})},Ac.prototype.zr=function(t,e){return Nc(t,this.userId,e)},Ac.prototype.Hr=function(t){var e=this;return xc(t).get(this.userId).next(function(t){return t||new Qc(e.userId,-1,"")})},Ac);function Ac(t,e,n,r){this.userId=t,this.serializer=e,this.os=n,this.Dr=r,this.Cr={}}function Nc(t,o,e){var e=Yc.prefixForPath(o,e.path),s=e[1],e=IDBKeyRange.lowerBound(e),u=!1;return Oc(t)._i({range:e,li:!0},function(t,e,n){var r=t[0],i=t[1];t[2],r===o&&i===s&&(u=!0),n.done()}).next(function(){return u})}function Dc(t,e,n){var r=t.store($c.store),i=t.store(Yc.store),o=[],t=IDBKeyRange.only(n.batchId),s=0,t=r._i({range:t},function(t,e,n){return s++,n.delete()});o.push(t.next(function(){Ur(1===s)}));for(var u=[],a=0,c=n.mutations;a<c.length;a++){var h=c[a],f=Yc.key(e,h.key.path,n.batchId);o.push(i.delete(f)),u.push(h.key)}return fa.qn(o).next(function(){return u})}function Sc(t){return Sh.Ys(t,$c.store)}function Oc(t){return Sh.Ys(t,Yc.store)}function xc(t){return Sh.Ys(t,Qc.store)}var kc,Pc=(Cc.prototype.jn=function(t,e,n){return Vc(t).put(Uc(e),n)},Cc.prototype.Hn=function(t,e){t=Vc(t),e=Uc(e);return t.delete(e)},Cc.prototype.updateMetadata=function(e,n){var r=this;return this.getMetadata(e).next(function(t){return t.byteSize+=n,r.Jr(e,t)})},Cc.prototype.Jn=function(t,e){var n=this;return Vc(t).get(Uc(e)).next(function(t){return n.Yr(t)})},Cc.prototype.Xr=function(t,e){var n=this;return Vc(t).get(Uc(e)).next(function(t){var e=n.Yr(t);return e?{zn:e,size:qc(t)}:null})},Cc.prototype.getEntries=function(t,e){var n=this,r=Bi;return this.Zr(t,e,function(t,e){e=n.Yr(e);r=r.Tt(t,e)}).next(function(){return r})},Cc.prototype.eo=function(t,e){var r=this,i=Bi,o=new Ri(hi.$);return this.Zr(t,e,function(t,e){var n=r.Yr(e);o=n?(i=i.Tt(t,n),o.Tt(t,qc(e))):(i=i.Tt(t,null),o.Tt(t,0))}).next(function(){return{no:i,so:o}})},Cc.prototype.Zr=function(t,e,i){if(e.W())return fa.resolve();var n=IDBKeyRange.bound(e.first().path.H(),e.last().path.H()),o=e.yt(),s=o.Ct();return Vc(t)._i({range:n},function(t,e,n){for(var r=hi.ct(t);s&&hi.$(s,r)<0;)i(s,null),s=o.Ct();s&&s.isEqual(r)&&(i(s,e),s=o.Nt()?o.Ct():null),s?n.oi(s.path.H()):n.done()}).next(function(){for(;s;)i(s,null),s=o.Nt()?o.Ct():null})},Cc.prototype.ws=function(t,r,e){var n,i=this,o=Ki,s=r.path.length+1,u={};return e.isEqual(si.min())?(n=r.path.H(),u.range=IDBKeyRange.lowerBound(n)):(n=r.path.H(),e=vc(e),u.range=IDBKeyRange.lowerBound([n,e],!0),u.index=th.collectionReadTimeIndex),Vc(t)._i(u,function(t,e,n){t.length===s&&(e=dc(i.serializer,e),r.path.j(e.key.path)?e instanceof hu&&xu(r,e)&&(o=o.Tt(e.key,e)):n.done())}).next(function(){return o})},Cc.prototype.io=function(t){return new Rc(this,!!t&&t.ro)},Cc.prototype.oo=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},Cc.prototype.getMetadata=function(t){return Mc(t).get(eh.key).next(function(t){return Ur(!!t),t})},Cc.prototype.Jr=function(t,e){return Mc(t).put(eh.key,e)},Cc.prototype.Yr=function(t){if(t){t=dc(this.serializer,t);return t instanceof fu&&t.version.isEqual(si.min())?null:t}return null},Cc),Rc=(n(Lc,kc=h),Lc.prototype.Zn=function(i){var o=this,s=[],u=0,a=new ji(function(t,e){return ti(t.J(),e.J())});return this.Qn.forEach(function(t,e){var n,r=o.uo.get(t);e.zn?(n=yc(o.co.serializer,e.zn,o.Wn(t)),a=a.add(t.path.q()),e=qc(n),u+=e-r,s.push(o.co.jn(i,t,n))):(u-=r,o.ro?(r=yc(o.co.serializer,new fu(t,si.min()),o.Wn(t)),s.push(o.co.jn(i,t,r))):s.push(o.co.Hn(i,t)))}),a.forEach(function(t){s.push(o.co.os.Mr(i,t))}),s.push(this.co.updateMetadata(i,u)),fa.qn(s)},Lc.prototype.Yn=function(t,e){var n=this;return this.co.Xr(t,e).next(function(t){return null===t?(n.uo.set(e,0),null):(n.uo.set(e,t.size),t.zn)})},Lc.prototype.Xn=function(t,e){var n=this;return this.co.eo(t,e).next(function(t){var e=t.no;return t.so.forEach(function(t,e){n.uo.set(t,e)}),e})},Lc);function Lc(t,e){var n=this;return(n=kc.call(this)||this).co=t,n.ro=e,n.uo=new ha(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),n}function Cc(t,e){this.serializer=t,this.os=e}function Mc(t){return Sh.Ys(t,eh.store)}function Vc(t){return Sh.Ys(t,th.store)}function Uc(t){return t.path.H()}function qc(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Vr();e=t.noDocument}return JSON.stringify(e).length}var jc=(Hc.prototype.Mr=function(t,e){return this.ao.add(e),fa.resolve()},Hc.prototype.As=function(t,e){return fa.resolve(this.ao.getEntries(e))},Hc),Fc=(Wc.prototype.add=function(t){var e=t.K(),n=t.q(),r=this.index[e]||new ji(ui.$),t=!r.has(n);return this.index[e]=r.add(n),t},Wc.prototype.has=function(t){var e=t.K(),t=t.q(),e=this.index[e];return e&&e.has(t)},Wc.prototype.getEntries=function(t){return(this.index[t]||new ji(ui.$)).H()},Wc),Bc=(Kc.prototype.createOrUpgrade=function(e,n,t,r){var i=this;Ur(t<r&&0<=t&&r<=11);var o=new Ua("createOrUpgrade",n);t<1&&1<=r&&(e.createObjectStore(Gc.store),(s=e).createObjectStore(Qc.store,{keyPath:Qc.keyPath}),s.createObjectStore($c.store,{keyPath:$c.keyPath,autoIncrement:!0}).createIndex($c.userMutationsIndex,$c.userMutationsKeyPath,{unique:!0}),s.createObjectStore(Yc.store),sh(e),e.createObjectStore(th.store));var s,u=fa.resolve();return t<3&&3<=r&&(0!==t&&((s=e).deleteObjectStore(rh.store),s.deleteObjectStore(nh.store),s.deleteObjectStore(ih.store),sh(e)),u=u.next(function(){return t=o.store(ih.store),e=new ih(0,0,si.min().M(),0),t.put(ih.key,e);var t,e})),t<4&&4<=r&&(0!==t&&(u=u.next(function(){return n=e,(r=o).store($c.store).ui().next(function(t){n.deleteObjectStore($c.store),n.createObjectStore($c.store,{keyPath:$c.keyPath,autoIncrement:!0}).createIndex($c.userMutationsIndex,$c.userMutationsKeyPath,{unique:!0});var e=r.store($c.store),t=t.map(function(t){return e.put(t)});return fa.qn(t)});var n,r})),u=u.next(function(){e.createObjectStore(uh.store,{keyPath:uh.keyPath})})),t<5&&5<=r&&(u=u.next(function(){return i.removeAcknowledgedMutations(o)})),t<6&&6<=r&&(u=u.next(function(){return e.createObjectStore(eh.store),i.addDocumentGlobal(o)})),t<7&&7<=r&&(u=u.next(function(){return i.ensureSequenceNumbers(o)})),t<8&&8<=r&&(u=u.next(function(){return i.createCollectionParentIndex(e,o)})),t<9&&9<=r&&(u=u.next(function(){var t;(t=e).objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges"),(t=n.objectStore(th.store)).createIndex(th.readTimeIndex,th.readTimeIndexPath,{unique:!1}),t.createIndex(th.collectionReadTimeIndex,th.collectionReadTimeIndexPath,{unique:!1})})),t<10&&10<=r&&(u=u.next(function(){return i.rewriteCanonicalIds(o)})),t<11&&11<=r&&(u=u.next(function(){e.createObjectStore(ah.store,{keyPath:ah.keyPath}),e.createObjectStore(ch.store,{keyPath:ch.keyPath})})),u},Kc.prototype.addDocumentGlobal=function(e){var n=0;return e.store(th.store)._i(function(t,e){n+=qc(e)}).next(function(){var t=new eh(n);return e.store(eh.store).put(eh.key,t)})},Kc.prototype.removeAcknowledgedMutations=function(n){var r=this,t=n.store(Qc.store),i=n.store($c.store);return t.ui().next(function(t){return fa.forEach(t,function(e){var t=IDBKeyRange.bound([e.userId,-1],[e.userId,e.lastAcknowledgedBatchId]);return i.ui($c.userMutationsIndex,t).next(function(t){return fa.forEach(t,function(t){Ur(t.userId===e.userId);t=bc(r.serializer,t);return Dc(n,e.userId,t).next(function(){})})})})})},Kc.prototype.ensureSequenceNumbers=function(t){var o=t.store(rh.store),e=t.store(th.store);return t.store(ih.store).get(ih.key).next(function(r){var i=[];return e._i(function(t,e){var n=new ui(t),t=[0,hc(n)];i.push(o.get(t).next(function(t){return t?fa.resolve():o.put(new rh(0,hc(n),r.highestListenSequenceNumber))}))}).next(function(){return fa.qn(i)})})},Kc.prototype.createCollectionParentIndex=function(t,e){t.createObjectStore(oh.store,{keyPath:oh.keyPath});function r(t){if(i.add(t)){var e=t.K(),t=t.q();return n.put({collectionId:e,parent:hc(t)})}}var n=e.store(oh.store),i=new Fc;return e.store(th.store)._i({li:!0},function(t,e){t=new ui(t);return r(t.q())}).next(function(){return e.store(Yc.store)._i({li:!0},function(t,e){t[0];var n=t[1],n=(t[2],lc(n));return r(n.q())})})},Kc.prototype.rewriteCanonicalIds=function(t){var n=this,r=t.store(nh.store);return r._i(function(t,e){e=_c(e),e=Ic(n.serializer,e);return r.put(e)})},Kc),zc=function(t,e){this.seconds=t,this.nanoseconds=e},Gc=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};function Kc(t){this.serializer=t}function Wc(){this.index={}}function Hc(){this.ao=new Fc}Gc.store="owner",Gc.key="owner";var Qc=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};Qc.store="mutationQueues",Qc.keyPath="userId";var $c=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};$c.store="mutations",$c.keyPath="batchId",$c.userMutationsIndex="userMutationsIndex",$c.userMutationsKeyPath=["userId","batchId"];var Yc=(Xc.prefixForUser=function(t){return[t]},Xc.prefixForPath=function(t,e){return[t,hc(e)]},Xc.key=function(t,e,n){return[t,hc(e),n]},Xc);function Xc(){}Yc.store="documentMutations",Yc.PLACEHOLDER=new Yc;var Jc=function(t,e){this.path=t,this.readTime=e},Zc=function(t,e){this.path=t,this.version=e},th=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};th.store="remoteDocuments",th.readTimeIndex="readTimeIndex",th.readTimeIndexPath="readTime",th.collectionReadTimeIndex="collectionReadTimeIndex",th.collectionReadTimeIndexPath=["parentPath","readTime"];var eh=function(t){this.byteSize=t};eh.store="remoteDocumentGlobal",eh.key="remoteDocumentGlobalKey";var nh=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};nh.store="targets",nh.keyPath="targetId",nh.queryTargetsIndexName="queryTargetsIndex",nh.queryTargetsKeyPath=["canonicalId","targetId"];var rh=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};rh.store="targetDocuments",rh.keyPath=["targetId","path"],rh.documentTargetsIndex="documentTargetsIndex",rh.documentTargetsKeyPath=["path","targetId"];var ih=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};ih.key="targetGlobalKey",ih.store="targetGlobal";var oh=function(t,e){this.collectionId=t,this.parent=e};function sh(t){t.createObjectStore(rh.store,{keyPath:rh.keyPath}).createIndex(rh.documentTargetsIndex,rh.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(nh.store,{keyPath:nh.keyPath}).createIndex(nh.queryTargetsIndexName,nh.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(ih.store)}oh.store="collectionParents",oh.keyPath=["collectionId","parent"];var uh=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};uh.store="clientMetadata",uh.keyPath="clientId";var ah=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};ah.store="bundles",ah.keyPath="bundleId";var ch=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};ch.store="namedQueries",ch.keyPath="name";var hh=s(s(s(s([Qc.store,$c.store,Yc.store,th.store,nh.store,Gc.store,ih.store,rh.store],[uh.store]),[eh.store]),[oh.store]),[ah.store,ch.store]),fh=(lh.prototype.ho=function(t,e){return ph(t).get(e).next(function(t){if(t)return{id:(t=t).bundleId,createTime:wc(t.createTime),version:t.version}})},lh.prototype.lo=function(t,e){return ph(t).put({bundleId:(e=e).id,createTime:mc(Ko(e.createTime)),version:e.version})},lh.prototype._o=function(t,e){return dh(t).get(e).next(function(t){if(t)return{name:(t=t).name,query:Ec(t.bundledQuery),readTime:wc(t.readTime)}})},lh.prototype.fo=function(t,e){return dh(t).put({name:(e=e).name,readTime:mc(Ko(e.readTime)),bundledQuery:e.bundledQuery})},lh);function lh(t){this.serializer=t}function ph(t){return Sh.Ys(t,ah.store)}function dh(t){return Sh.Ys(t,ch.store)}var yh=(vh.prototype.Mr=function(t,e){var n=this;if(this.wo.has(e))return fa.resolve();var r=e.K(),i=e.q();t.es(function(){n.wo.add(e)});i={collectionId:r,parent:hc(i)};return gh(t).put(i)},vh.prototype.As=function(t,i){var o=[],e=IDBKeyRange.bound([i,""],[ni(i),""],!1,!0);return gh(t).ui(e).next(function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if(r.collectionId!==i)break;o.push(lc(r.parent))}return o})},vh);function vh(){this.wo=new Fc}function gh(t){return Sh.Ys(t,oh.store)}var mh=(_h.prototype.next=function(){return this.Eo+=2,this.Eo},_h.To=function(){return new _h(0)},_h.Io=function(){return new _h(-1)},_h),wh=(bh.prototype.mo=function(n){var r=this;return this.Ao(n).next(function(t){var e=new mh(t.highestTargetId);return t.highestTargetId=e.next(),r.Ro(n,t).next(function(){return t.highestTargetId})})},bh.prototype.Po=function(t){return this.Ao(t).next(function(t){return si.N(new oi(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},bh.prototype.yo=function(t){return this.Ao(t).next(function(t){return t.highestListenSequenceNumber})},bh.prototype.Vo=function(e,n,r){var i=this;return this.Ao(e).next(function(t){return t.highestListenSequenceNumber=n,r&&(t.lastRemoteSnapshotVersion=r.M()),n>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=n),i.Ro(e,t)})},bh.prototype.po=function(e,n){var r=this;return this.vo(e,n).next(function(){return r.Ao(e).next(function(t){return t.targetCount+=1,r.bo(n,t),r.Ro(e,t)})})},bh.prototype.So=function(t,e){return this.vo(t,e)},bh.prototype.Do=function(e,t){var n=this;return this.Co(e,t.targetId).next(function(){return Ih(e).delete(t.targetId)}).next(function(){return n.Ao(e)}).next(function(t){return Ur(0<t.targetCount),--t.targetCount,n.Ro(e,t)})},bh.prototype.mr=function(n,r,i){var o=this,s=0,u=[];return Ih(n)._i(function(t,e){e=_c(e);e.sequenceNumber<=r&&null===i.get(e.targetId)&&(s++,u.push(o.Do(n,e)))}).next(function(){return fa.qn(u)}).next(function(){return s})},bh.prototype.Ue=function(t,n){return Ih(t)._i(function(t,e){e=_c(e);n(e)})},bh.prototype.Ao=function(t){return Eh(t).get(ih.key).next(function(t){return Ur(null!==t),t})},bh.prototype.Ro=function(t,e){return Eh(t).put(ih.key,e)},bh.prototype.vo=function(t,e){return Ih(t).put(Ic(this.serializer,e))},bh.prototype.bo=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},bh.prototype.No=function(t){return this.Ao(t).next(function(t){return t.targetCount})},bh.prototype.xo=function(t,r){var e=Ii(r),e=IDBKeyRange.bound([e,Number.NEGATIVE_INFINITY],[e,Number.POSITIVE_INFINITY]),i=null;return Ih(t)._i({range:e,index:nh.queryTargetsIndexName},function(t,e,n){e=_c(e);Ei(r,e.target)&&(i=e,n.done())}).next(function(){return i})},bh.prototype.Fo=function(n,t,r){var i=this,o=[],s=Th(n);return t.forEach(function(t){var e=hc(t.path);o.push(s.put(new rh(r,e))),o.push(i.Dr.Oo(n,r,t))}),fa.qn(o)},bh.prototype.Mo=function(n,t,r){var i=this,o=Th(n);return fa.forEach(t,function(t){var e=hc(t.path);return fa.qn([o.delete([r,e]),i.Dr.ko(n,r,t)])})},bh.prototype.Co=function(t,e){t=Th(t),e=IDBKeyRange.bound([e],[e+1],!1,!0);return t.delete(e)},bh.prototype.$o=function(t,e){var e=IDBKeyRange.bound([e],[e+1],!1,!0),t=Th(t),r=Qi();return t._i({range:e,li:!0},function(t,e,n){t=lc(t[1]),t=new hi(t);r=r.add(t)}).next(function(){return r})},bh.prototype.zr=function(t,e){var e=hc(e.path),e=IDBKeyRange.bound([e],[ni(e)],!1,!0),i=0;return Th(t)._i({index:rh.documentTargetsIndex,li:!0,range:e},function(t,e,n){var r=t[0];t[1],0!==r&&(i++,n.done())}).next(function(){return 0<i})},bh.prototype.Ze=function(t,e){return Ih(t).get(e).next(function(t){return t?_c(t):null})},bh);function bh(t,e){this.Dr=t,this.serializer=e}function _h(t){this.Eo=t}function Ih(t){return Sh.Ys(t,nh.store)}function Eh(t){return Sh.Ys(t,ih.store)}function Th(t){return Sh.Ys(t,rh.store)}var Ah,Nh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Dh=(n(xh,Ah=Ie),xh),Sh=(Oh.Ys=function(t,e){if(t instanceof Dh)return xa.Ys(t.Kr,e);throw Vr()},Oh.prototype.start=function(){var e=this;return this.tc().then(function(){if(!e.isPrimary&&!e.allowTabSynchronization)throw new Br(Fr.FAILED_PRECONDITION,Nh);return e.ec(),e.nc(),e.sc(),e.runTransaction("getHighestListenSequenceNumber","readonly",function(t){return e.Yo.yo(t)})}).then(function(t){e.Uo=new Ea(t,e.Bo)}).then(function(){e.Qo=!0}).catch(function(t){return e.Jo&&e.Jo.close(),Promise.reject(t)})},Oh.prototype.ic=function(n){var t=this;return this.zo=function(e){return y(t,void 0,void 0,function(){return v(this,function(t){return this.lr?[2,n(e)]:[2]})})},n(this.isPrimary)},Oh.prototype.rc=function(n){var t=this;this.Jo.ti(function(e){return y(t,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return null===e.newVersion?[4,n()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})},Oh.prototype.oc=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Cs.Ri(function(){return y(e,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return this.lr?[4,this.tc()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},Oh.prototype.tc=function(){var n=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Ph(e).put(new uh(n.clientId,Date.now(),n.networkEnabled,n.inForeground)).next(function(){if(n.isPrimary)return n.cc(e).next(function(t){t||(n.isPrimary=!1,n.Cs.Mi(function(){return n.zo(!1)}))})}).next(function(){return n.uc(e)}).next(function(t){return n.isPrimary&&!t?n.ac(e).next(function(){return!1}):!!t&&n.hc(e).next(function(){return!0})})}).catch(function(t){if(Va(t))return Rr("IndexedDbPersistence","Failed to extend owner lease: ",t),n.isPrimary;if(!n.allowTabSynchronization)throw t;return Rr("IndexedDbPersistence","Releasing owner lease after error during lease refresh",t),!1}).then(function(t){n.isPrimary!==t&&n.Cs.Mi(function(){return n.zo(t)}),n.isPrimary=t})},Oh.prototype.cc=function(t){var e=this;return kh(t).get(Gc.key).next(function(t){return fa.resolve(e.lc(t))})},Oh.prototype._c=function(t){return Ph(t).delete(this.clientId)},Oh.prototype.fc=function(){return y(this,void 0,void 0,function(){var e,n,r,i,o=this;return v(this,function(t){switch(t.label){case 0:return!this.isPrimary||this.dc(this.Go,18e5)?[3,2]:(this.Go=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var r=Oh.Ys(t,uh.store);return r.ui().next(function(t){var e=o.wc(t,18e5),n=t.filter(function(t){return-1===e.indexOf(t)});return fa.forEach(n,function(t){return r.delete(t.clientId)}).next(function(){return n})})}).catch(function(){return[]})]);case 1:if(e=t.sent(),this.Zo)for(n=0,r=e;n<r.length;n++)i=r[n],this.Zo.removeItem(this.Ec(i.clientId));t.label=2;case 2:return[2]}})})},Oh.prototype.sc=function(){var t=this;this.jo=this.Cs.Us("client_metadata_refresh",4e3,function(){return t.tc().then(function(){return t.fc()}).then(function(){return t.sc()})})},Oh.prototype.lc=function(t){return!!t&&t.ownerId===this.clientId},Oh.prototype.uc=function(e){var r=this;return this.qo?fa.resolve(!0):kh(e).get(Gc.key).next(function(t){if(null!==t&&r.dc(t.leaseTimestampMs,5e3)&&!r.Tc(t.ownerId)){if(r.lc(t)&&r.networkEnabled)return!0;if(!r.lc(t)){if(!t.allowTabSynchronization)throw new Br(Fr.FAILED_PRECONDITION,Nh);return!1}}return!(!r.networkEnabled||!r.inForeground)||Ph(e).ui().next(function(t){return void 0===r.wc(t,5e3).find(function(t){if(r.clientId!==t.clientId){var e=!r.networkEnabled&&t.networkEnabled,n=!r.inForeground&&t.inForeground,t=r.networkEnabled===t.networkEnabled;if(e||n&&t)return!0}return!1})})}).next(function(t){return r.isPrimary!==t&&Rr("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},Oh.prototype.Ic=function(){return y(this,void 0,void 0,function(){var n=this;return v(this,function(t){switch(t.label){case 0:return this.Qo=!1,this.mc(),this.jo&&(this.jo.cancel(),this.jo=null),this.Ac(),this.Rc(),[4,this.Jo.runTransaction("shutdown","readwrite",[Gc.store,uh.store],function(t){var e=new Dh(t,Ea.Ds);return n.ac(e).next(function(){return n._c(e)})})];case 1:return t.sent(),this.Jo.close(),this.Pc(),[2]}})})},Oh.prototype.wc=function(t,e){var n=this;return t.filter(function(t){return n.dc(t.updateTimeMs,e)&&!n.Tc(t.clientId)})},Oh.prototype.gc=function(){var e=this;return this.runTransaction("getActiveClients","readonly",function(t){return Ph(t).ui().next(function(t){return e.wc(t,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(Oh.prototype,"lr",{get:function(){return this.Qo},enumerable:!1,configurable:!0}),Oh.prototype.yc=function(t){return Tc.Nr(t,this.serializer,this.os,this.Dr)},Oh.prototype.Vc=function(){return this.Yo},Oh.prototype.vc=function(){return this.ss},Oh.prototype.bc=function(){return this.os},Oh.prototype.Sc=function(){return this.Xo},Oh.prototype.runTransaction=function(e,n,r){var i=this;Rr("IndexedDbPersistence","Starting transaction:",e);var o,t="readonly"===n?"readonly":"readwrite";return this.Jo.runTransaction(e,t,hh,function(t){return o=new Dh(t,i.Uo?i.Uo.next():Ea.Ds),"readwrite-primary"===n?i.cc(o).next(function(t){return!!t||i.uc(o)}).next(function(t){if(!t)throw Lr("Failed to obtain primary lease for action '"+e+"'."),i.isPrimary=!1,i.Cs.Mi(function(){return i.zo(!1)}),new Br(Fr.FAILED_PRECONDITION,ba);return r(o)}).next(function(t){return i.hc(o).next(function(){return t})}):i.Dc(o).next(function(){return r(o)})}).then(function(t){return o.ns(),t})},Oh.prototype.Dc=function(t){var e=this;return kh(t).get(Gc.key).next(function(t){if(null!==t&&e.dc(t.leaseTimestampMs,5e3)&&!e.Tc(t.ownerId)&&!e.lc(t)&&!(e.qo||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Br(Fr.FAILED_PRECONDITION,Nh)})},Oh.prototype.hc=function(t){var e=new Gc(this.clientId,this.allowTabSynchronization,Date.now());return kh(t).put(Gc.key,e)},Oh.Gs=function(){return xa.Gs()},Oh.prototype.ac=function(t){var e=this,n=kh(t);return n.get(Gc.key).next(function(t){return e.lc(t)?(Rr("IndexedDbPersistence","Releasing primary lease."),n.delete(Gc.key)):fa.resolve()})},Oh.prototype.dc=function(t,e){var n=Date.now();return!(t<n-e||n<t&&(Lr("Detected an update time that is in the future: "+t+" > "+n),1))},Oh.prototype.ec=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Wo=function(){t.Cs.Ri(function(){return t.inForeground="visible"===t.document.visibilityState,t.tc()})},this.document.addEventListener("visibilitychange",this.Wo),this.inForeground="visible"===this.document.visibilityState)},Oh.prototype.Ac=function(){this.Wo&&(this.document.removeEventListener("visibilitychange",this.Wo),this.Wo=null)},Oh.prototype.nc=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Ko=function(){e.mc(),e.Cs.Ri(function(){return e.Ic()})},this.window.addEventListener("unload",this.Ko))},Oh.prototype.Rc=function(){this.Ko&&(this.window.removeEventListener("unload",this.Ko),this.Ko=null)},Oh.prototype.Tc=function(t){try{var e=null!==(null===(e=this.Zo)||void 0===e?void 0:e.getItem(this.Ec(t)));return Rr("IndexedDbPersistence","Client '"+t+"' "+(e?"is":"is not")+" zombied in LocalStorage"),e}catch(t){return Lr("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},Oh.prototype.mc=function(){if(this.Zo)try{this.Zo.setItem(this.Ec(this.clientId),String(Date.now()))}catch(t){Lr("Failed to set zombie client id.",t)}},Oh.prototype.Pc=function(){if(this.Zo)try{this.Zo.removeItem(this.Ec(this.clientId))}catch(t){}},Oh.prototype.Ec=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},Oh);function Oh(t,e,n,r,i,o,s,u,a,c){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.Cs=i,this.window=o,this.document=s,this.Bo=a,this.qo=c,this.Uo=null,this.Qo=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ko=null,this.inForeground=!1,this.Wo=null,this.jo=null,this.Go=Number.NEGATIVE_INFINITY,this.zo=function(t){return Promise.resolve()},!Oh.Gs())throw new Br(Fr.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.Dr=new Rh(this,r),this.Ho=e+"main",this.serializer=new pc(u),this.Jo=new xa(this.Ho,11,new Bc(this.serializer)),this.Yo=new wh(this.Dr,this.serializer),this.os=new yh,this.ss=(e=this.serializer,u=this.os,new Pc(e,u)),this.Xo=new fh(this.serializer),this.window&&this.window.localStorage?this.Zo=this.window.localStorage:(this.Zo=null,!1===c&&Lr("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}function xh(t,e){var n=this;return(n=Ah.call(this)||this).Kr=t,n.Lo=e,n}function kh(t){return Sh.Ys(t,Gc.store)}function Ph(t){return Sh.Ys(t,uh.store)}var Rh=(Lh.prototype.Er=function(t){var n=this.Cc(t);return this.db.Vc().No(t).next(function(e){return n.next(function(t){return e+t})})},Lh.prototype.Cc=function(t){var e=0;return this.Ir(t,function(t){e++}).next(function(){return e})},Lh.prototype.Ue=function(t,e){return this.db.Vc().Ue(t,e)},Lh.prototype.Ir=function(t,n){return this.Nc(t,function(t,e){return n(e)})},Lh.prototype.Oo=function(t,e,n){return Ch(t,n)},Lh.prototype.ko=function(t,e,n){return Ch(t,n)},Lh.prototype.mr=function(t,e,n){return this.db.Vc().mr(t,e,n)},Lh.prototype.jr=Ch,Lh.prototype.xc=function(t,e){return r=e,i=!1,xc(n=t).fi(function(t){return Nc(n,t,r).next(function(t){return t&&(i=!0),fa.resolve(!t)})}).next(function(){return i});var n,r,i},Lh.prototype.Ar=function(n,r){var i=this,o=this.db.vc().io(),s=[],u=0;return this.Nc(n,function(e,t){t<=r&&(t=i.xc(n,e).next(function(t){if(!t)return u++,o.Jn(n,e).next(function(){return o.Hn(e),Th(n).delete([0,hc(e.path)])})}),s.push(t))}).next(function(){return fa.qn(s)}).next(function(){return o.apply(n)}).next(function(){return u})},Lh.prototype.removeTarget=function(t,e){e=e.dt(t.Lo);return this.db.Vc().So(t,e)},Lh.prototype.Fc=Ch,Lh.prototype.Nc=function(t,r){var i,t=Th(t),o=Ea.Ds;return t._i({index:rh.documentTargetsIndex},function(t,e){var n=t[0],t=(t[1],e.path),e=e.sequenceNumber;0===n?(o!==Ea.Ds&&r(new hi(lc(i)),o),o=e,i=t):o=Ea.Ds}).next(function(){o!==Ea.Ds&&r(new hi(lc(i)),o)})},Lh.prototype.Pr=function(t){return this.db.vc().oo(t)},Lh);function Lh(t,e){this.db=t,this.cr=new oc(this,e)}function Ch(t,e){return Th(t).put((t=t.Lo,new rh(0,hc(e.path),t)))}function Mh(t,e){var n=t.projectId;return t.o||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Vh=(Uh.prototype._r=function(e){var n=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(t){return e.Rr(t,n.Mc)})},Uh);function Uh(t,e,n,r){this.persistence=t,this.Oc=e,this.serializer=r,this.Mc=new Ri(ti),this.kc=new ha(Ii,Ei),this.$c=si.min(),this.rs=t.yc(n),this.Lc=t.vc(),this.Yo=t.Vc(),this.Bc=new _a(this.Lc,this.rs,this.persistence.bc()),this.Xo=t.Sc(),this.Oc.yr(this.Bc)}function qh(t,e,n,r){return new Vh(t,e,n,r)}function jh(i,o){return y(this,void 0,void 0,function(){var e,n,m,r;return v(this,function(t){switch(t.label){case 0:return n=(e=i).rs,m=e.Bc,[4,e.persistence.runTransaction("Handle user change","readonly",function(v){var g;return e.rs.qr(v).next(function(t){return g=t,n=e.persistence.yc(o),m=new _a(e.Lc,n,e.persistence.bc()),n.qr(v)}).next(function(t){for(var e=[],n=[],r=Qi(),i=0,o=g;i<o.length;i++){var s=o[i];e.push(s.batchId);for(var u=0,a=s.mutations;u<a.length;u++)var c=a[u],r=r.add(c.key)}for(var h=0,f=t;h<f.length;h++){var l=f[h];n.push(l.batchId);for(var p=0,d=l.mutations;p<d.length;p++){var y=d[p];r=r.add(y.key)}}return m._s(v,r).next(function(t){return{qc:t,Uc:e,Qc:n}})})})];case 1:return r=t.sent(),[2,(e.rs=n,e.Bc=m,e.Oc.yr(e.Bc),r)]}})})}function Fh(t,h){var f=t;return f.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var e,r,i,o,s,n,u,a=h.batch.keys(),c=f.Lc.io({ro:!0});return e=f,r=t,o=c,s=(i=h).batch,n=s.keys(),u=fa.resolve(),n.forEach(function(n){u=u.next(function(){return o.Jn(r,n)}).next(function(t){var e=t,t=i.Sn.get(n);Ur(null!==t),(!e||e.version.F(t)<0)&&(e=s.yn(n,e,i))&&o.jn(e,i.bn)})}),u.next(function(){return e.rs.Qr(r,s)}).next(function(){return c.apply(t)}).next(function(){return f.rs.Gr(t)}).next(function(){return f.Bc._s(t,a)})})}function Bh(t){var e=t;return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Yo.Po(t)})}function zh(t,o){var h=t,f=o.ft,l=h.Mc;return h.persistence.runTransaction("Apply remote event","readwrite-primary",function(s){var t=h.Lc.io({ro:!0});l=h.Mc;var u=[];o.re.forEach(function(t,e){var n,r,i,o=l.get(e);o&&(u.push(h.Yo.Mo(s,t.de,e).next(function(){return h.Yo.Fo(s,t._e,e)})),0<(i=t.resumeToken).ht()&&(n=o.wt(i,f).dt(s.Lo),l=l.Tt(e,n),r=o,i=t,Ur(0<(o=n).resumeToken.ht()),(0===r.resumeToken.ht()||3e8<=o.ft.O()-r.ft.O()||0<i._e.size+i.fe.size+i.de.size)&&u.push(h.Yo.So(s,n))))});var e,a,n,c,r,i=Bi;return o.ce.forEach(function(t,e){o.ue.has(t)&&u.push(h.persistence.Dr.Fc(s,t))}),u.push((e=s,a=t,n=o.ce,c=f,r=Qi(),n.forEach(function(t){return r=r.add(t)}),a.getEntries(e,r).next(function(i){var o=Bi;return n.forEach(function(t,e){var n=i.get(t),r=c;e instanceof fu&&e.version.isEqual(si.min())?(a.Hn(t,r),o=o.Tt(t,e)):null==n||0<e.version.F(n.version)||0===e.version.F(n.version)&&n.hasPendingWrites?(a.jn(e,r),o=o.Tt(t,e)):Rr("LocalStore","Ignoring outdated watch update for ",t,". Current version:",n.version," Watch version:",e.version)}),o}).next(function(t){i=t}))),f.isEqual(si.min())||(e=h.Yo.Po(s).next(function(t){return h.Yo.Vo(s,s.Lo,f)}),u.push(e)),fa.qn(u).next(function(){return t.apply(s)}).next(function(){return h.Bc.fs(s,i)})}).then(function(t){return h.Mc=l,t})}function Gh(t,r){var i=t;return i.persistence.runTransaction("Allocate target","readwrite",function(e){var n;return i.Yo.xo(e,r).next(function(t){return t?(n=t,fa.resolve(n)):i.Yo.mo(e).next(function(t){return n=new Oi(r,t,0,e.Lo),i.Yo.po(e,n).next(function(){return n})})})}).then(function(t){var e=i.Mc.get(t.targetId);return(null===e||0<t.ft.F(e.ft))&&(i.Mc=i.Mc.Tt(t.targetId,t),i.kc.set(r,t.targetId)),t})}function Kh(i,o,s){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:n=(e=i).Mc.get(o),r=s?"readwrite":"readwrite-primary",t.label=1;case 1:return t.trys.push([1,4,,5]),s?[3,3]:[4,e.persistence.runTransaction("Release target",r,function(t){return e.persistence.Dr.removeTarget(t,n)})];case 2:t.sent(),t.label=3;case 3:return[3,5];case 4:if(!Va(r=t.sent()))throw r;return Rr("LocalStore","Failed to update sequence numbers for target "+o+": "+r),[3,5];case 5:return e.Mc=e.Mc.remove(o),e.kc.delete(n.target),[2]}})})}function Wh(t,o,s){var u=t,a=si.min(),c=Qi();return u.persistence.runTransaction("Execute query","readonly",function(e){return t=u,n=e,r=Au(o),(void 0!==(t=(i=t).kc.get(r))?fa.resolve(i.Mc.get(t)):i.Yo.xo(n,r)).next(function(t){if(t)return a=t.lastLimboFreeSnapshotVersion,u.Yo.$o(e,t.targetId).next(function(t){c=t})}).next(function(){return u.Oc.ws(e,o,s?a:si.min(),s?c:Qi())}).next(function(t){return{documents:t,Kc:c}});var t,n,r,i})}function Hh(t,e){var n=t,r=n.Yo,t=n.Mc.get(e);return t?Promise.resolve(t.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.Ze(t,e).next(function(t){return t?t.target:null})})}function Qh(t){var s=t;return s.persistence.runTransaction("Get new document changes","readonly",function(t){return e=s.Lc,n=t,t=s.$c,r=e,i=Bi,o=vc(t),t=Vc(n),n=IDBKeyRange.lowerBound(o,!0),t._i({index:th.readTimeIndex,range:n},function(t,e){var n=dc(r.serializer,e);i=i.Tt(n.key,n),o=e.readTime}).next(function(){return{Wc:i,readTime:gc(o)}});var e,n,r,i,o}).then(function(t){var e=t.Wc,t=t.readTime;return s.$c=t,e})}function $h(n){return y(this,void 0,void 0,function(){var e;return v(this,function(t){return[2,(e=n).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return t=Vc(t),r=si.min(),t._i({index:th.readTimeIndex,reverse:!0},function(t,e,n){e.readTime&&(r=gc(e.readTime)),n.done()}).next(function(){return r});var r}).then(function(t){e.$c=t})]})})}function Yh(e){return y(this,void 0,void 0,function(){return v(this,function(t){if(e.code!==Fr.FAILED_PRECONDITION||e.message!==ba)throw e;return Rr("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Xh(t,e,n,r,i){var o=this;this.Ou=t,this.Mu=e,this.di=n,this.ku={},this.$u=[],this.Lu=new Map,this.Bu=new Set,this.qu=[],this.Uu=i,this.Uu.Qu(function(t){n.Ri(function(){return y(o,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return wf(this)?(Rr("RemoteStore","Restarting streams for network reachability change."),[4,function(n){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return(e=n).Bu.add(4),[4,lf(e)];case 1:return t.sent(),e.Ku.set("Unknown"),e.Bu.delete(4),[4,ff(e)];case 2:return t.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.Ku=new of(n,r)}var Jh,Zh,tf,Ee=(hf.prototype.Yc=function(){return 1===this.state||2===this.state||4===this.state},hf.prototype.Xc=function(){return 2===this.state},hf.prototype.start=function(){3!==this.state?this.auth():this.Zc()},hf.prototype.stop=function(){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return this.Yc()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},hf.prototype.tu=function(){this.state=0,this.Si.reset()},hf.prototype.eu=function(){var t=this;this.Xc()&&null===this.Jc&&(this.Jc=this.Cs.Us(this.jc,6e4,function(){return t.nu()}))},hf.prototype.su=function(t){this.iu(),this.stream.send(t)},hf.prototype.nu=function(){return y(this,void 0,void 0,function(){return v(this,function(t){return this.Xc()?[2,this.close(0)]:[2]})})},hf.prototype.iu=function(){this.Jc&&(this.Jc.cancel(),this.Jc=null)},hf.prototype.close=function(e,n){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return this.iu(),this.Si.cancel(),this.Hc++,3!==e?this.Si.reset():n&&n.code===Fr.RESOURCE_EXHAUSTED?(Lr(n.toString()),Lr("Using maximum backoff delay to prevent overloading the backend."),this.Si.Ls()):n&&n.code===Fr.UNAUTHENTICATED&&this.zc.m(),null!==this.stream&&(this.ru(),this.stream.close(),this.stream=null),this.state=e,[4,this.listener.ou(n)];case 1:return t.sent(),[2]}})})},hf.prototype.ru=function(){},hf.prototype.auth=function(){var n=this;this.state=1;var t=this.cu(this.Hc),e=this.Hc;this.zc.getToken().then(function(t){n.Hc===e&&n.uu(t)},function(e){t(function(){var t=new Br(Fr.UNKNOWN,"Fetching auth token failed: "+e.message);return n.au(t)})})},hf.prototype.uu=function(t){var e=this,n=this.cu(this.Hc);this.stream=this.hu(t),this.stream.lu(function(){n(function(){return e.state=2,e.listener.lu()})}),this.stream.ou(function(t){n(function(){return e.au(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},hf.prototype.Zc=function(){var t=this;this.state=4,this.Si.Bs(function(){return y(t,void 0,void 0,function(){return v(this,function(t){return this.state=0,this.start(),[2]})})})},hf.prototype.au=function(t){return Rr("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},hf.prototype.cu=function(e){var n=this;return function(t){n.Cs.Ri(function(){return n.Hc===e?t():(Rr("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},hf),ef=(n(cf,tf=Ee),cf.prototype.hu=function(t){return this.Gc._u("Listen",t)},cf.prototype.onMessage=function(t){this.Si.reset();var e=function(t,e){if("targetChange"in e){e.targetChange;var n="NO_CHANGE"===(i=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===i?1:"REMOVE"===i?2:"CURRENT"===i?3:"RESET"===i?4:Vr(),r=e.targetChange.targetIds||[],i=(o=e.targetChange.resumeToken,t.tn?(Ur(void 0===o||"string"==typeof o),Ai.fromBase64String(o||"")):(Ur(void 0===o||o instanceof Uint8Array),Ai.fromUint8Array(o||new Uint8Array))),o=e.targetChange.cause,s=o&&(o=void 0===(s=o).code?Fr.UNKNOWN:Pi(s.code),new Br(o,s.message||"")),r=new ro(n,r,i,s||null)}else if("documentChange"in e){e.documentChange;var u=e.documentChange;u.document,u.document.name,u.document.updateTime;var i=$o(t,u.document.name),a=Ko(u.document.updateTime),s=new eu({mapValue:{fields:u.document.fields}}),a=new hu(i,a,s,{}),s=u.targetIds||[],u=u.removedTargetIds||[];r=new eo(s,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;u=e.documentDelete;u.document;var a=$o(t,u.document),c=u.readTime?Ko(u.readTime):si.min(),c=new fu(a,c),u=u.removedTargetIds||[];r=new eo([],u,c.key,c)}else if("documentRemove"in e){e.documentRemove;c=e.documentRemove;c.document;var h=$o(t,c.document),c=c.removedTargetIds||[];r=new eo([],c,h,null)}else{if(!("filter"in e))return Vr();e.filter;h=e.filter;h.targetId;e=h.count||0,e=new Di(e),h=h.targetId;r=new no(h,e)}return r}(this.serializer,t),t=function(t){if(!("targetChange"in t))return si.min();t=t.targetChange;return(!t.targetIds||!t.targetIds.length)&&t.readTime?Ko(t.readTime):si.min()}(t);return this.listener.fu(e,t)},cf.prototype.du=function(t){var e,n,r,i={};i.database=Jo(this.serializer),i.addTarget=(e=this.serializer,(r=Ti(r=(n=t).target)?{documents:rs(e,r)}:{query:is(e,r)}).targetId=n.targetId,0<n.resumeToken.ht()?r.resumeToken=Go(e,n.resumeToken):0<n.ft.F(si.min())&&(r.readTime=zo(e,n.ft.M())),r);var o,t=(this.serializer,o=t,null==(t=function(){switch(o._t){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Vr()}}())?null:{"goog-listen-tags":t});t&&(i.labels=t),this.su(i)},cf.prototype.wu=function(t){var e={};e.database=Jo(this.serializer),e.removeTarget=t,this.su(e)},cf),nf=(n(af,Zh=Ee),Object.defineProperty(af.prototype,"Tu",{get:function(){return this.Eu},enumerable:!1,configurable:!0}),af.prototype.start=function(){this.Eu=!1,this.lastStreamToken=void 0,Zh.prototype.start.call(this)},af.prototype.ru=function(){this.Eu&&this.Iu([])},af.prototype.hu=function(t){return this.Gc._u("Write",t)},af.prototype.onMessage=function(t){if(Ur(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Eu){this.Si.reset();var e=(n=t.writeResults,r=t.commitTime,n&&0<n.length?(Ur(void 0!==r),n.map(function(t){return function(t,e){var n=t.updateTime?Ko(t.updateTime):Ko(e);n.isEqual(si.min())&&(n=Ko(e));e=null;return t.transformResults&&0<t.transformResults.length&&(e=t.transformResults),new Ps(n,e)}(t,r)})):[]),n=Ko(t.commitTime);return this.listener.mu(n,e)}var n,r;return Ur(!t.writeResults||0===t.writeResults.length),this.Eu=!0,this.listener.Au()},af.prototype.Ru=function(){var t={};t.database=Jo(this.serializer),this.su(t)},af.prototype.Iu=function(t){var e=this,t={streamToken:this.lastStreamToken,writes:t.map(function(t){return es(e.serializer,t)})};this.su(t)},af),rf=(n(uf,Jh=function(){}),uf.prototype.gu=function(){if(this.Pu)throw new Br(Fr.FAILED_PRECONDITION,"The client has already been terminated.")},uf.prototype.yu=function(e,n,r){var i=this;return this.gu(),this.credentials.getToken().then(function(t){return i.Gc.yu(e,n,r,t)}).catch(function(t){throw t.code===Fr.UNAUTHENTICATED&&i.credentials.m(),t})},uf.prototype.Vu=function(e,n,r){var i=this;return this.gu(),this.credentials.getToken().then(function(t){return i.Gc.Vu(e,n,r,t)}).catch(function(t){throw t.code===Fr.UNAUTHENTICATED&&i.credentials.m(),t})},uf.prototype.terminate=function(){this.Pu=!1},uf),of=(sf.prototype.Du=function(){var t=this;0===this.vu&&(this.Cu("Unknown"),this.bu=this.di.Us("online_state_timeout",1e4,function(){return t.bu=null,t.Nu("Backend didn't respond within 10 seconds."),t.Cu("Offline"),Promise.resolve()}))},sf.prototype.xu=function(t){"Online"===this.state?this.Cu("Unknown"):(this.vu++,1<=this.vu&&(this.Fu(),this.Nu("Connection failed 1 times. Most recent error: "+t.toString()),this.Cu("Offline")))},sf.prototype.set=function(t){this.Fu(),this.vu=0,"Online"===t&&(this.Su=!1),this.Cu(t)},sf.prototype.Cu=function(t){t!==this.state&&(this.state=t,this.pu(t))},sf.prototype.Nu=function(t){t="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Su?(Lr(t),this.Su=!1):Rr("OnlineStateTracker",t)},sf.prototype.Fu=function(){null!==this.bu&&(this.bu.cancel(),this.bu=null)},sf);function sf(t,e){this.di=t,this.pu=e,this.state="Unknown",this.vu=0,this.bu=null,this.Su=!0}function uf(t,e,n){var r=this;return(r=Jh.call(this)||this).credentials=t,r.Gc=e,r.serializer=n,r.Pu=!1,r}function af(t,e,n,r,i){var o=this;return(o=Zh.call(this,t,"write_stream_connection_backoff","write_stream_idle",e,n,i)||this).serializer=r,o.Eu=!1,o}function cf(t,e,n,r,i){var o=this;return(o=tf.call(this,t,"listen_stream_connection_backoff","listen_stream_idle",e,n,i)||this).serializer=r,o}function hf(t,e,n,r,i,o){this.Cs=t,this.jc=n,this.Gc=r,this.zc=i,this.listener=o,this.state=0,this.Hc=0,this.Jc=null,this.stream=null,this.Si=new Oa(t,e)}function ff(r){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:if(!wf(r))return[3,4];e=0,n=r.qu,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function lf(r){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:e=0,n=r.qu,t.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:t.sent(),t.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function pf(t,e){t.Lu.has(e.targetId)||(t.Lu.set(e.targetId,e),mf(t)?gf(t):Sf(t).Xc()&&yf(t,e))}function df(t,e){var n=t,t=Sf(n);n.Lu.delete(e),t.Xc()&&vf(n,e),0===n.Lu.size&&(t.Xc()?t.eu():wf(n)&&n.Ku.set("Unknown"))}function yf(t,e){t.Wu.De(e.targetId),Sf(t).du(e)}function vf(t,e){t.Wu.De(e),Sf(t).wu(e)}function gf(e){e.Wu=new oo({Xe:function(t){return e.ku.Xe(t)},Ze:function(t){return e.Lu.get(t)||null}}),Sf(e).start(),e.Ku.Du()}function mf(t){return wf(t)&&!Sf(t).Yc()&&0<t.Lu.size}function wf(t){return 0===t.Bu.size}function bf(t){t.Wu=void 0}function _f(s,u,a){return y(this,void 0,void 0,function(){var n,o;return v(this,function(t){switch(t.label){case 0:if(s.Ku.set("Online"),!(u instanceof ro&&2===u.state&&u.cause))return[3,6];t.label=1;case 1:return t.trys.push([1,3,,5]),[4,function(o,s){return y(this,void 0,void 0,function(){var e,n,r,i;return v(this,function(t){switch(t.label){case 0:e=s.cause,n=0,r=s.targetIds,t.label=1;case 1:return n<r.length?(i=r[n],o.Lu.has(i)?[4,o.ku.ju(i,e)]:[3,3]):[3,5];case 2:t.sent(),o.Lu.delete(i),o.Wu.removeTarget(i),t.label=3;case 3:t.label=4;case 4:return n++,[3,1];case 5:return[2]}})})}(s,u)];case 2:return t.sent(),[3,5];case 3:return n=t.sent(),Rr("RemoteStore","Failed to remove targets %s: %s ",u.targetIds.join(","),n),[4,If(s,n)];case 4:return t.sent(),[3,5];case 5:return[3,13];case 6:if(u instanceof eo?s.Wu.$e(u):u instanceof no?s.Wu.je(u):s.Wu.qe(u),a.isEqual(si.min()))return[3,13];t.label=7;case 7:return t.trys.push([7,11,,13]),[4,Bh(s.Ou)];case 8:return o=t.sent(),0<=a.F(o)?[4,(i=a,(e=(r=s).Wu.He(i)).re.forEach(function(t,e){var n;0<t.resumeToken.ht()&&((n=r.Lu.get(e))&&r.Lu.set(e,n.wt(t.resumeToken,i)))}),e.oe.forEach(function(t){var e=r.Lu.get(t);e&&(r.Lu.set(t,e.wt(Ai.lt,e.ft)),vf(r,t),e=new Oi(e.target,t,1,e.sequenceNumber),yf(r,e))}),r.ku.Gu(e))]:[3,10];case 9:t.sent(),t.label=10;case 10:return[3,13];case 11:return Rr("RemoteStore","Failed to raise snapshot:",o=t.sent()),[4,If(s,o)];case 12:return t.sent(),[3,13];case 13:return[2]}var r,i,e})})}function If(n,r,i){return y(this,void 0,void 0,function(){var e=this;return v(this,function(t){switch(t.label){case 0:if(!Va(r))throw r;return n.Bu.add(1),[4,lf(n)];case 1:return t.sent(),n.Ku.set("Offline"),i=i||function(){return Bh(n.Ou)},n.di.Mi(function(){return y(e,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return Rr("RemoteStore","Retrying IndexedDB access"),[4,i()];case 1:return t.sent(),n.Bu.delete(1),[4,ff(n)];case 2:return t.sent(),[2]}})})}),[2]}})})}function Ef(e,n){return n().catch(function(t){return If(e,t,n)})}function Tf(a){return y(this,void 0,void 0,function(){var i,o,s,u;return v(this,function(t){switch(t.label){case 0:o=Of(i=a),s=0<i.$u.length?i.$u[i.$u.length-1].batchId:-1,t.label=1;case 1:if(!(wf(i)&&i.$u.length<10))return[3,7];t.label=2;case 2:return t.trys.push([2,4,,6]),[4,(e=i.Ou,n=s,(r=e).persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===n&&(n=-1),r.rs.Lr(t,n)}))];case 3:return null===(u=t.sent())?(0===i.$u.length&&o.eu(),[3,7]):(s=u.batchId,function(t,e){t.$u.push(e);t=Of(t);t.Xc()&&t.Tu&&t.Iu(e.mutations)}(i,u),[3,6]);case 4:return u=t.sent(),[4,If(i,u)];case 5:return t.sent(),[3,6];case 6:return[3,1];case 7:return Af(i)&&Nf(i),[2]}var e,n,r})})}function Af(t){return wf(t)&&!Of(t).Yc()&&0<t.$u.length}function Nf(t){Of(t).start()}function Df(n,r){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=n,r?(e.Bu.delete(2),[4,ff(e)]):[3,2];case 1:return t.sent(),[3,5];case 2:return r?[3,4]:(e.Bu.add(2),[4,lf(e)]);case 3:t.sent(),e.Ku.set("Unknown"),t.label=4;case 4:t.label=5;case 5:return[2]}})})}function Sf(n){var t,e,r,i=this;return n.Ju||(n.Ju=(t=n.Mu,e=n.di,r={lu:function(n){return y(this,void 0,void 0,function(){return v(this,function(t){return n.Lu.forEach(function(t,e){yf(n,t)}),[2]})})}.bind(null,n),ou:function(e,n){return y(this,void 0,void 0,function(){return v(this,function(t){return bf(e),mf(e)?(e.Ku.xu(n),gf(e)):e.Ku.set("Unknown"),[2]})})}.bind(null,n),fu:_f.bind(null,n)},t.gu(),new ef(e,t.Gc,t.credentials,t.serializer,r)),n.qu.push(function(e){return y(i,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e?(n.Ju.tu(),mf(n)?gf(n):n.Ku.set("Unknown"),[3,3]):[3,1];case 1:return[4,n.Ju.stop()];case 2:t.sent(),bf(n),t.label=3;case 3:return[2]}})})})),n.Ju}function Of(n){var t,e,r,i=this;return n.Yu||(n.Yu=(t=n.Mu,e=n.di,r={lu:function(e){return y(this,void 0,void 0,function(){return v(this,function(t){return Of(e).Ru(),[2]})})}.bind(null,n),ou:function(e,n){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return n&&Of(e).Tu?[4,function(r,i){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return ki(n=i.code)&&n!==Fr.ABORTED?(e=r.$u.shift(),Of(r).tu(),[4,Ef(r,function(){return r.ku.Hu(e.batchId,i)})]):[3,3];case 1:return t.sent(),[4,Tf(r)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}(e,n)]:[3,2];case 1:t.sent(),t.label=2;case 2:return Af(e)&&Nf(e),[2]}})})}.bind(null,n),Au:function(o){return y(this,void 0,void 0,function(){var e,n,r,i;return v(this,function(t){for(e=Of(o),n=0,r=o.$u;n<r.length;n++)i=r[n],e.Iu(i.mutations);return[2]})})}.bind(null,n),mu:function(r,i,o){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return e=r.$u.shift(),n=ca.from(e,i,o),[4,Ef(r,function(){return r.ku.zu(n)})];case 1:return t.sent(),[4,Tf(r)];case 2:return t.sent(),[2]}})})}.bind(null,n)},t.gu(),new nf(e,t.Gc,t.credentials,t.serializer,r)),n.qu.push(function(e){return y(i,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e?(n.Yu.tu(),[4,Tf(n)]):[3,2];case 1:return t.sent(),[3,4];case 2:return[4,n.Yu.stop()];case 3:t.sent(),0<n.$u.length&&(Rr("RemoteStore","Stopping write stream with "+n.$u.length+" pending writes"),n.$u=[]),t.label=4;case 4:return[2]}})})})),n.Yu}function xf(){this.queries=new ha(Su,Du),this.onlineState="Unknown",this.Zu=new Set}var kf=function(){this.Xu=void 0,this.listeners=[]};function Pf(s,u){return y(this,void 0,void 0,function(){var e,n,r,i,o;return v(this,function(t){switch(t.label){case 0:if(e=s,n=u.query,r=!1,(i=e.queries.get(n))||(r=!0,i=new kf),!r)return[3,4];t.label=1;case 1:return t.trys.push([1,3,,4]),o=i,[4,e.ta(n)];case 2:return o.Xu=t.sent(),[3,4];case 3:return o=t.sent(),o=Xa(o,"Initialization of query '"+Ou(u.query)+"' failed"),[2,void u.onError(o)];case 4:return e.queries.set(n,i),i.listeners.push(u),u.ea(e.onlineState),i.Xu&&u.na(i.Xu)&&Lf(e),[2]}})})}function Rf(s,u){return y(this,void 0,void 0,function(){var e,n,r,i,o;return v(this,function(t){return e=s,n=u.query,r=!1,(i=e.queries.get(n))&&0<=(o=i.listeners.indexOf(u))&&(i.listeners.splice(o,1),r=0===i.listeners.length),r?[2,(e.queries.delete(n),e.sa(n))]:[2]})})}function Lf(t){t.Zu.forEach(function(t){t.next()})}var Cf=(jf.prototype.na=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new Ji(t.query,t.docs,t.te,e,t.ee,t.fromCache,t.ne,!0)}var o=!1;return this.ra?this.ca(t)&&(this.ia.next(t),o=!0):this.ua(t,this.onlineState)&&(this.aa(t),o=!0),this.oa=t,o},jf.prototype.onError=function(t){this.ia.error(t)},jf.prototype.ea=function(t){this.onlineState=t;var e=!1;return this.oa&&!this.ra&&this.ua(this.oa,t)&&(this.aa(this.oa),e=!0),e},jf.prototype.ua=function(t,e){if(!t.fromCache)return!0;var n="Offline"!==e;return!(this.options.ha&&n||t.docs.W()&&"Offline"!==e)},jf.prototype.ca=function(t){if(0<t.docChanges.length)return!0;var e=this.oa&&this.oa.hasPendingWrites!==t.hasPendingWrites;return!(!t.ne&&!e)&&!0===this.options.includeMetadataChanges},jf.prototype.aa=function(t){t=Ji.ie(t.query,t.docs,t.ee,t.fromCache),this.ra=!0,this.ia.next(t)},jf),Mf=(qf.prototype.W=function(){return this.la.W()},qf.prototype.Oo=function(t,e){e=new Vf(t,e);this.la=this.la.add(e),this.fa=this.fa.add(e)},qf.prototype.wa=function(t,e){var n=this;t.forEach(function(t){return n.Oo(t,e)})},qf.prototype.ko=function(t,e){this.Ea(new Vf(t,e))},qf.prototype.Ta=function(t,e){var n=this;t.forEach(function(t){return n.ko(t,e)})},qf.prototype.Ia=function(t){var e=this,n=new hi(new ui([])),r=new Vf(n,t),t=new Vf(n,t+1),i=[];return this.fa.Kt([r,t],function(t){e.Ea(t),i.push(t.key)}),i},qf.prototype.ma=function(){var e=this;this.la.forEach(function(t){return e.Ea(t)})},qf.prototype.Ea=function(t){this.la=this.la.delete(t),this.fa=this.fa.delete(t)},qf.prototype.Aa=function(t){var e=new hi(new ui([])),n=new Vf(e,t),t=new Vf(e,t+1),r=Qi();return this.fa.Kt([n,t],function(t){r=r.add(t.key)}),r},qf.prototype.zr=function(t){var e=new Vf(t,0),e=this.la.jt(e);return null!==e&&t.isEqual(e.key)},qf),Vf=(Uf._a=function(t,e){return hi.$(t.key,e.key)||ti(t.Ra,e.Ra)},Uf.da=function(t,e){return ti(t.Ra,e.Ra)||hi.$(t.key,e.key)},Uf);function Uf(t,e){this.key=t,this.Ra=e}function qf(){this.la=new ji(Vf._a),this.fa=new ji(Vf.da)}function jf(t,e,n){this.query=t,this.ia=e,this.ra=!1,this.oa=null,this.onlineState="Unknown",this.options=n||{}}function Ff(t,e){return"firestore_clients_"+t+"_"+e}function Bf(t,e,n){n="firestore_mutations_"+t+"_"+n;return e.u()&&(n+="_"+e.uid),n}function zf(t,e){return"firestore_targets_"+t+"_"+e}var Gf=(fl.Pa=function(t,e,n){var r=JSON.parse(n),i="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error),o=void 0;return i&&r.error&&(i="string"==typeof r.error.message&&"string"==typeof r.error.code)&&(o=new Br(r.error.code,r.error.message)),i?new fl(t,e,r.state,o):(Lr("SharedClientState","Failed to parse mutation state for ID '"+e+"': "+n),null)},fl.prototype.ga=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},fl),Kf=(hl.Pa=function(t,e){var n=JSON.parse(e),r="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error),i=void 0;return r&&n.error&&(r="string"==typeof n.error.message&&"string"==typeof n.error.code)&&(i=new Br(n.error.code,n.error.message)),r?new hl(t,n.state,i):(Lr("SharedClientState","Failed to parse target state for ID '"+t+"': "+e),null)},hl.prototype.ga=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},hl),Wf=(cl.Pa=function(t,e){for(var n=JSON.parse(e),r="object"==typeof n&&n.activeTargetIds instanceof Array,i=$i,o=0;r&&o<n.activeTargetIds.length;++o)r=wi(n.activeTargetIds[o]),i=i.add(n.activeTargetIds[o]);return r?new cl(t,i):(Lr("SharedClientState","Failed to parse client data for instance '"+t+"': "+e),null)},cl),Hf=(al.Pa=function(t){var e=JSON.parse(t);return"object"==typeof e&&-1!==["Unknown","Online","Offline"].indexOf(e.onlineState)&&"string"==typeof e.clientId?new al(e.clientId,e.onlineState):(Lr("SharedClientState","Failed to parse online state: "+t),null)},al),Qf=(ul.prototype.ya=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},ul.prototype.Va=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},ul.prototype.ga=function(){var t={activeTargetIds:this.activeTargetIds.H(),updateTimeMs:Date.now()};return JSON.stringify(t)},ul),$f=(sl.Gs=function(t){return!(!t||!t.localStorage)},sl.prototype.start=function(){return y(this,void 0,void 0,function(){var e,n,r,i,o,s,u,a,c,h,f=this;return v(this,function(t){switch(t.label){case 0:return[4,this.va.gc()];case 1:for(s=t.sent(),e=0,n=s;e<n.length;e++)(r=n[e])!==this.pa&&(i=this.getItem(Ff(this.persistenceKey,r)))&&(o=Wf.Pa(r,i))&&(this.Da=this.Da.Tt(o.clientId,o));for(this.La(),(s=this.storage.getItem(this.ka))&&(u=this.Ba(s))&&this.qa(u),a=0,c=this.Ca;a<c.length;a++)h=c[a],this.Sa(h);return this.Ca=[],this.window.addEventListener("unload",function(){return f.Ic()}),this.lr=!0,[2]}})})},sl.prototype.Ss=function(t){this.setItem(this.xa,JSON.stringify(t))},sl.prototype.Ua=function(){return this.Qa(this.Da)},sl.prototype.Ka=function(n){var r=!1;return this.Da.forEach(function(t,e){e.activeTargetIds.has(n)&&(r=!0)}),r},sl.prototype.Wa=function(t){this.ja(t,"pending")},sl.prototype.Ga=function(t,e,n){this.ja(t,e,n),this.za(t)},sl.prototype.Ha=function(t){var e,n="not-current";return this.Ka(t)&&(!(e=this.storage.getItem(zf(this.persistenceKey,t)))||(e=Kf.Pa(t,e))&&(n=e.state)),this.Ja.ya(t),this.La(),n},sl.prototype.Ya=function(t){this.Ja.Va(t),this.La()},sl.prototype.Xa=function(t){return this.Ja.activeTargetIds.has(t)},sl.prototype.Za=function(t){this.removeItem(zf(this.persistenceKey,t))},sl.prototype.th=function(t,e,n){this.eh(t,e,n)},sl.prototype.nh=function(t,e,n){var r=this;e.forEach(function(t){r.za(t)}),this.currentUser=t,n.forEach(function(t){r.Wa(t)})},sl.prototype.sh=function(t){this.ih(t)},sl.prototype.rh=function(){this.oh()},sl.prototype.Ic=function(){this.lr&&(this.window.removeEventListener("storage",this.ba),this.removeItem(this.Na),this.lr=!1)},sl.prototype.getItem=function(t){var e=this.storage.getItem(t);return Rr("SharedClientState","READ",t,e),e},sl.prototype.setItem=function(t,e){Rr("SharedClientState","SET",t,e),this.storage.setItem(t,e)},sl.prototype.removeItem=function(t){Rr("SharedClientState","REMOVE",t),this.storage.removeItem(t)},sl.prototype.Sa=function(t){var e=this,o=t;if(o.storageArea===this.storage){if(Rr("SharedClientState","EVENT",o.key,o.newValue),o.key===this.Na)return void Lr("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Cs.Mi(function(){return y(e,void 0,void 0,function(){var e,n,r,i;return v(this,function(t){if(this.lr){if(null!==o.key)if(this.Fa.test(o.key)){if(null==o.newValue)return e=this.uh(o.key),[2,this.ah(e,null)];if(e=this.hh(o.key,o.newValue))return[2,this.ah(e.clientId,e)]}else if(this.Oa.test(o.key)){if(null!==o.newValue&&(n=this.lh(o.key,o.newValue)))return[2,this._h(n)]}else if(this.Ma.test(o.key)){if(null!==o.newValue&&(r=this.fh(o.key,o.newValue)))return[2,this.dh(r)]}else if(o.key===this.ka){if(null!==o.newValue&&(i=this.Ba(o.newValue)))return[2,this.qa(i)]}else if(o.key===this.xa)(i=function(t){var e=Ea.Ds;if(null!=t)try{var n=JSON.parse(t);Ur("number"==typeof n),e=n}catch(t){Lr("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(o.newValue))!==Ea.Ds&&this.ps(i);else if(o.key===this.$a)return[2,this.va.wh()]}else this.Ca.push(o);return[2]})})})}},Object.defineProperty(sl.prototype,"Ja",{get:function(){return this.Da.get(this.pa)},enumerable:!1,configurable:!0}),sl.prototype.La=function(){this.setItem(this.Na,this.Ja.ga())},sl.prototype.ja=function(t,e,n){n=new Gf(this.currentUser,t,e,n),t=Bf(this.persistenceKey,this.currentUser,t);this.setItem(t,n.ga())},sl.prototype.za=function(t){t=Bf(this.persistenceKey,this.currentUser,t);this.removeItem(t)},sl.prototype.ih=function(t){t={clientId:this.pa,onlineState:t};this.storage.setItem(this.ka,JSON.stringify(t))},sl.prototype.eh=function(t,e,n){var r=zf(this.persistenceKey,t),n=new Kf(t,e,n);this.setItem(r,n.ga())},sl.prototype.oh=function(){this.setItem(this.$a,"value-not-used")},sl.prototype.uh=function(t){t=this.Fa.exec(t);return t?t[1]:null},sl.prototype.hh=function(t,e){t=this.uh(t);return Wf.Pa(t,e)},sl.prototype.lh=function(t,e){var n=this.Oa.exec(t),t=Number(n[1]),n=void 0!==n[2]?n[2]:null;return Gf.Pa(new Sr(n),t,e)},sl.prototype.fh=function(t,e){t=this.Ma.exec(t),t=Number(t[1]);return Kf.Pa(t,e)},sl.prototype.Ba=function(t){return Hf.Pa(t)},sl.prototype._h=function(e){return y(this,void 0,void 0,function(){return v(this,function(t){return e.user.uid===this.currentUser.uid?[2,this.va.Eh(e.batchId,e.state,e.error)]:(Rr("SharedClientState","Ignoring mutation for non-active user "+e.user.uid),[2])})})},sl.prototype.dh=function(t){return this.va.Th(t.targetId,t.state,t.error)},sl.prototype.ah=function(t,e){var n=this,r=e?this.Da.Tt(t,e):this.Da.remove(t),i=this.Qa(this.Da),o=this.Qa(r),s=[],u=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||u.push(t)}),this.va.Ih(s,u).then(function(){n.Da=r})},sl.prototype.qa=function(t){this.Da.get(t.clientId)&&this.pu(t.onlineState)},sl.prototype.Qa=function(t){var n=$i;return t.forEach(function(t,e){n=n.Gt(e.activeTargetIds)}),n},sl),Yf=(ol.prototype.Wa=function(t){},ol.prototype.Ga=function(t,e,n){},ol.prototype.Ha=function(t){return this.mh.ya(t),this.Ah[t]||"not-current"},ol.prototype.th=function(t,e,n){this.Ah[t]=e},ol.prototype.Ya=function(t){this.mh.Va(t)},ol.prototype.Xa=function(t){return this.mh.activeTargetIds.has(t)},ol.prototype.Za=function(t){delete this.Ah[t]},ol.prototype.Ua=function(){return this.mh.activeTargetIds},ol.prototype.Ka=function(t){return this.mh.activeTargetIds.has(t)},ol.prototype.start=function(){return this.mh=new Qf,Promise.resolve()},ol.prototype.nh=function(t,e,n){},ol.prototype.sh=function(t){},ol.prototype.Ic=function(){},ol.prototype.Ss=function(t){},ol.prototype.rh=function(){},ol),Xf=function(t){this.key=t},Jf=function(t){this.key=t},Zf=(Object.defineProperty(il.prototype,"ph",{get:function(){return this.Rh},enumerable:!1,configurable:!0}),il.prototype.bh=function(t,e){var s=this,u=e?e.Sh:new Xi,a=(e||this).Vh,c=(e||this).ee,h=a,f=!1,l=wu(this.query)&&a.size===this.query.limit?a.last():null,p=bu(this.query)&&a.size===this.query.limit?a.first():null;if(t.Pt(function(t,e){var n=a.get(t),r=(r=e instanceof hu?e:null)&&(xu(s.query,r)?r:null),i=!!n&&s.ee.has(n.key),o=!!r&&(r.an||s.ee.has(r.key)&&r.hasCommittedMutations),e=!1;n&&r?n.data().isEqual(r.data())?i!==o&&(u.track({type:3,doc:r}),e=!0):s.Dh(n,r)||(u.track({type:2,doc:r}),e=!0,(l&&0<s.yh(r,l)||p&&s.yh(r,p)<0)&&(f=!0)):!n&&r?(u.track({type:0,doc:r}),e=!0):n&&!r&&(u.track({type:1,doc:n}),e=!0,(l||p)&&(f=!0)),e&&(c=r?(h=h.add(r),o?c.add(t):c.delete(t)):(h=h.delete(t),c.delete(t)))}),wu(this.query)||bu(this.query))for(;h.size>this.query.limit;){var n=wu(this.query)?h.last():h.first(),h=h.delete(n.key),c=c.delete(n.key);u.track({type:1,doc:n})}return{Vh:h,Sh:u,br:f,ee:c}},il.prototype.Dh=function(t,e){return t.an&&e.hasCommittedMutations&&!e.an},il.prototype.Zn=function(t,e,n){var o=this,r=this.Vh;this.Vh=t.Vh,this.ee=t.ee;var i=t.Sh.Zt();i.sort(function(t,e){return r=t.type,i=e.type,n(r)-n(i)||o.yh(t.doc,e.doc);function n(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Vr()}}var r,i}),this.Ch(n);var s=e?this.Nh():[],n=0===this.gh.size&&this.le?1:0,e=n!==this.Ph;return this.Ph=n,0!==i.length||e?{snapshot:new Ji(this.query,t.Vh,r,i,t.ee,0==n,e,!1),xh:s}:{xh:s}},il.prototype.ea=function(t){return this.le&&"Offline"===t?(this.le=!1,this.Zn({Vh:this.Vh,Sh:new Xi,ee:this.ee,br:!1},!1)):{xh:[]}},il.prototype.Fh=function(t){return!this.Rh.has(t)&&!!this.Vh.has(t)&&!this.Vh.get(t).an},il.prototype.Ch=function(t){var e=this;t&&(t._e.forEach(function(t){return e.Rh=e.Rh.add(t)}),t.fe.forEach(function(t){}),t.de.forEach(function(t){return e.Rh=e.Rh.delete(t)}),this.le=t.le)},il.prototype.Nh=function(){var e=this;if(!this.le)return[];var n=this.gh;this.gh=Qi(),this.Vh.forEach(function(t){e.Fh(t.key)&&(e.gh=e.gh.add(t.key))});var r=[];return n.forEach(function(t){e.gh.has(t)||r.push(new Jf(t))}),this.gh.forEach(function(t){n.has(t)||r.push(new Xf(t))}),r},il.prototype.Oh=function(t){this.Rh=t.Kc,this.gh=Qi();t=this.bh(t.documents);return this.Zn(t,!0)},il.prototype.Mh=function(){return Ji.ie(this.query,this.Vh,this.ee,0===this.Ph)},il),tl=function(t,e,n){this.query=t,this.targetId=e,this.view=n},el=function(t){this.key=t,this.kh=!1},nl=(Object.defineProperty(rl.prototype,"Zh",{get:function(){return!0===this.Xh},enumerable:!1,configurable:!0}),rl);function rl(t,e,n,r,i,o){this.Ou=t,this.$h=e,this.Lh=n,this.Bh=r,this.currentUser=i,this.qh=o,this.Uh={},this.Qh=new ha(Su,Du),this.Kh=new Map,this.Wh=[],this.jh=new Ri(hi.$),this.Gh=new Map,this.zh=new Mf,this.Hh={},this.Jh=new Map,this.Yh=mh.Io(),this.onlineState="Unknown",this.Xh=void 0}function il(t,e){this.query=t,this.Rh=e,this.Ph=null,this.le=!1,this.gh=Qi(),this.ee=Qi(),this.yh=ku(t),this.Vh=new Yi(this.yh)}function ol(){this.mh=new Qf,this.Ah={},this.pu=null,this.ps=null}function sl(t,e,n,r,i){this.window=t,this.Cs=e,this.persistenceKey=n,this.pa=r,this.va=null,this.pu=null,this.ps=null,this.ba=this.Sa.bind(this),this.Da=new Ri(ti),this.lr=!1,this.Ca=[];n=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Na=Ff(this.persistenceKey,this.pa),this.xa="firestore_sequence_number_"+this.persistenceKey,this.Da=this.Da.Tt(this.pa,new Qf),this.Fa=new RegExp("^firestore_clients_"+n+"_([^_]*)$"),this.Oa=new RegExp("^firestore_mutations_"+n+"_(\\d+)(?:_(.*))?$"),this.Ma=new RegExp("^firestore_targets_"+n+"_(\\d+)$"),this.ka="firestore_online_state_"+this.persistenceKey,this.$a="firestore_bundle_loaded_"+this.persistenceKey,this.window.addEventListener("storage",this.ba)}function ul(){this.activeTargetIds=$i}function al(t,e){this.clientId=t,this.onlineState=e}function cl(t,e){this.clientId=t,this.activeTargetIds=e}function hl(t,e,n){this.targetId=t,this.state=e,this.error=n}function fl(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}function ll(i,o,s,u){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return i.tl=function(t,e,n){return function(r,i,o,s){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return(e=i.view.bh(o)).br?[4,Wh(r.Ou,i.query,!1).then(function(t){t=t.documents;return i.view.bh(t,e)})]:[3,2];case 1:e=t.sent(),t.label=2;case 2:return n=s&&s.re.get(i.targetId),n=i.view.Zn(e,r.Zh,n),[2,(Il(r,i.targetId,n.xh),n.snapshot)]}})})}(i,t,e,n)},[4,Wh(i.Ou,o,!0)];case 1:return n=t.sent(),r=new Zf(o,n.Kc),e=r.bh(n.documents),n=to.he(s,u&&"Offline"!==i.onlineState),n=r.Zn(e,i.Zh,n),Il(i,s,n.xh),r=new tl(o,s,r),[2,(i.Qh.set(o,r),i.Kh.has(s)?i.Kh.get(s).push(o):i.Kh.set(s,[o]),n.snapshot)]}})})}function pl(l,p,d){return y(this,void 0,void 0,function(){var s,u;return v(this,function(t){switch(t.label){case 0:u=kl(l),t.label=1;case 1:return t.trys.push([1,5,,6]),[4,(i=u.Ou,a=p,h=i,f=oi.now(),o=a.reduce(function(t,e){return t.add(e.key)},Qi()),h.persistence.runTransaction("Locally write mutations","readwrite",function(u){return h.Bc._s(u,o).next(function(t){c=t;for(var s,e=[],n=0,r=a;n<r.length;n++){var i=r[n],o=(s=i,o=c.get(i.key),s instanceof Qs?function(t){for(var e=null,n=0,r=s.fieldTransforms;n<r.length;n++){var i=r[n],o=t instanceof hu?t.field(i.field):void 0,o=ls(i.transform,o||null);null!=o&&(e=(null==e?new nu:e).set(i.field,o))}return e?e.hn():null}(o):null);null!=o&&e.push(new zs(i.key,o,function s(t){var u=[];return go(t.fields||{},function(t,e){var n=new ci([t]);if(Mo(e))if(0===(e=s(e.mapValue).fields).length)u.push(n);else for(var r=0,i=e;r<i.length;r++){var o=i[r];u.push(n.child(o))}else u.push(n)}),new Os(u)}(o.proto.mapValue),Rs.exists(!0)))}return h.rs.Or(u,f,e,a)})}).then(function(t){var e=t.vn(c);return{batchId:t.batchId,Qn:e}}))];case 2:return s=t.sent(),u.Bh.Wa(s.batchId),e=u,n=s.batchId,r=d,i=(i=(i=e.Hh[e.currentUser.h()])||new Ri(ti)).Tt(n,r),e.Hh[e.currentUser.h()]=i,[4,Tl(u,s.Qn)];case 3:return t.sent(),[4,Tf(u.$h)];case 4:return t.sent(),[3,6];case 5:return u=t.sent(),u=Xa(u,"Failed to persist write"),d.reject(u),[3,6];case 6:return[2]}var e,n,r,i,a,c,h,f,o})})}function dl(r,i){return y(this,void 0,void 0,function(){var n,e;return v(this,function(t){switch(t.label){case 0:n=r,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,zh(n.Ou,i)];case 2:return e=t.sent(),i.re.forEach(function(t,e){e=n.Gh.get(e);e&&(Ur(t._e.size+t.fe.size+t.de.size<=1),0<t._e.size?e.kh=!0:0<t.fe.size?Ur(e.kh):0<t.de.size&&(Ur(e.kh),e.kh=!1))}),[4,Tl(n,e,i)];case 3:return t.sent(),[3,6];case 4:return[4,Yh(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}function yl(t,n,e){var r,t=t;(t.Zh&&0===e||!t.Zh&&1===e)&&(r=[],t.Qh.forEach(function(t,e){e=e.view.ea(n);e.snapshot&&r.push(e.snapshot)}),function(t,i){t.onlineState=i;var o=!1;t.queries.forEach(function(t,e){for(var n=0,r=e.listeners;n<r.length;n++)r[n].ea(i)&&(o=!0)}),o&&Lf(t)}(t.Lh,n),r.length&&t.Uh.fu(r),t.onlineState=n,t.Zh&&t.Bh.sh(n))}function vl(s,u,a){return y(this,void 0,void 0,function(){var n,o;return v(this,function(t){switch(t.label){case 0:n=s,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,(e=n.Ou,r=u,(i=e).persistence.runTransaction("Reject batch","readwrite-primary",function(e){var n;return i.rs.kr(e,r).next(function(t){return Ur(null!==t),n=t.keys(),i.rs.Qr(e,t)}).next(function(){return i.rs.Gr(e)}).next(function(){return i.Bc._s(e,n)})}))];case 2:return o=t.sent(),wl(n,u,a),ml(n,u),n.Bh.Ga(u,"rejected",a),[4,Tl(n,o)];case 3:return t.sent(),[3,6];case 4:return[4,Yh(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}var e,r,i})})}function gl(o,s){return y(this,void 0,void 0,function(){var n,r,i;return v(this,function(t){switch(t.label){case 0:wf((n=o).$h)||Rr("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),t.label=1;case 1:return t.trys.push([1,3,,4]),[4,(e=n.Ou).persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.rs.Br(t)})];case 2:return-1===(r=t.sent())?[2,void s.resolve()]:((i=n.Jh.get(r)||[]).push(s),n.Jh.set(r,i),[3,4]);case 3:return i=t.sent(),i=Xa(i,"Initialization of waitForPendingWrites() operation failed"),s.reject(i),[3,4];case 4:return[2]}var e})})}function ml(t,e){(t.Jh.get(e)||[]).forEach(function(t){t.resolve()}),t.Jh.delete(e)}function wl(t,e,n){var r=t,i=r.Hh[r.currentUser.h()];i&&((t=i.get(e))&&(n?t.reject(n):t.resolve(),i=i.remove(e)),r.Hh[r.currentUser.h()]=i)}function bl(e,t,n){void 0===n&&(n=null),e.Bh.Ya(t);for(var r=0,i=e.Kh.get(t);r<i.length;r++){var o=i[r];e.Qh.delete(o),n&&e.Uh.el(o,n)}e.Kh.delete(t),e.Zh&&e.zh.Ia(t).forEach(function(t){e.zh.zr(t)||_l(e,t)})}function _l(t,e){var n=t.jh.get(e);null!==n&&(df(t.$h,n),t.jh=t.jh.remove(e),t.Gh.delete(n),El(t))}function Il(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof Xf?(t.zh.Oo(o.key,e),function(t,e){e=e.key;t.jh.get(e)||(Rr("SyncEngine","New document in limbo: "+e),t.Wh.push(e),El(t))}(t,o)):o instanceof Jf?(Rr("SyncEngine","Document no longer in limbo: "+o.key),t.zh.ko(o.key,e),t.zh.zr(o.key)||_l(t,o.key)):Vr()}}function El(t){for(;0<t.Wh.length&&t.jh.size<t.qh;){var e=t.Wh.shift(),n=t.Yh.next();t.Gh.set(n,new el(e)),t.jh=t.jh.Tt(e,n),pf(t.$h,new Oi(Au(mu(e.path)),n,2,Ea.Ds))}}function Tl(e,s,u){return y(this,void 0,void 0,function(){var n,r,i,o;return v(this,function(t){switch(t.label){case 0:return r=[],i=[],o=[],(n=e).Qh.W()?[3,3]:(n.Qh.forEach(function(t,e){o.push(n.tl(e,s,u).then(function(t){t&&(n.Zh&&n.Bh.th(e.targetId,t.fromCache?"not-current":"current"),r.push(t),t=Ia.Vs(e.targetId,t),i.push(t))}))}),[4,Promise.all(o)]);case 1:return t.sent(),n.Uh.fu(r),[4,function(a,c){return y(this,void 0,void 0,function(){var r,e,n,i,o,s,u;return v(this,function(t){switch(t.label){case 0:r=a,t.label=1;case 1:return t.trys.push([1,3,,4]),[4,r.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(n){return fa.forEach(c,function(e){return fa.forEach(e.gs,function(t){return r.persistence.Dr.Oo(n,e.targetId,t)}).next(function(){return fa.forEach(e.ys,function(t){return r.persistence.Dr.ko(n,e.targetId,t)})})})})];case 2:return t.sent(),[3,4];case 3:if(!Va(e=t.sent()))throw e;return Rr("LocalStore","Failed to update sequence numbers: "+e),[3,4];case 4:for(n=0,i=c;n<i.length;n++)u=i[n],o=u.targetId,u.fromCache||(s=r.Mc.get(o),u=s.ft,u=s.Et(u),r.Mc=r.Mc.Tt(o,u));return[2]}})})}(n.Ou,i)];case 2:t.sent(),t.label=3;case 3:return[2]}})})}function Al(i,o){return y(this,void 0,void 0,function(){var n,r;return v(this,function(t){switch(t.label){case 0:return(n=i).currentUser.isEqual(o)?[3,3]:(Rr("SyncEngine","User change. New user:",o.h()),[4,jh(n.Ou,o)]);case 1:return r=t.sent(),n.currentUser=o,(e=n).Jh.forEach(function(t){t.forEach(function(t){t.reject(new Br(Fr.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),e.Jh.clear(),n.Bh.nh(o,r.Uc,r.Qc),[4,Tl(n,r.qc)];case 2:t.sent(),t.label=3;case 3:return[2]}var e})})}function Nl(u,a,c,h){return y(this,void 0,void 0,function(){var o,s;return v(this,function(t){switch(t.label){case 0:return[4,(e=(o=u).Ou,n=a,i=(r=e).rs,r.persistence.runTransaction("Lookup mutation documents","readonly",function(e){return i.$r(e,n).next(function(t){return t?r.Bc._s(e,t):fa.resolve(null)})}))];case 1:return null===(s=t.sent())?[3,6]:"pending"!==c?[3,3]:[4,Tf(o.$h)];case 2:return t.sent(),[3,4];case 3:"acknowledged"===c||"rejected"===c?(wl(o,a,h||null),ml(o,a),o.Ou.rs.Wr(a)):Vr(),t.label=4;case 4:return[4,Tl(o,s)];case 5:return t.sent(),[3,7];case 6:Rr("SyncEngine","Cannot apply mutation batch with id: "+a),t.label=7;case 7:return[2]}var e,n,r,i})})}function Dl(h,f){return y(this,void 0,void 0,function(){var r,e,i,o,s,u,a,c;return v(this,function(t){switch(t.label){case 0:return xl(r=h),kl(r),!0!==f||!0===r.Xh?[3,3]:(e=r.Bh.Ua(),[4,Sl(r,e.H())]);case 1:return i=t.sent(),r.Xh=!0,[4,Df(r.$h,!0)];case 2:for(t.sent(),o=0,s=i;o<s.length;o++)u=s[o],pf(r.$h,u);return[3,7];case 3:return!1!==f||!1===r.Xh?[3,7]:(a=[],c=Promise.resolve(),r.Kh.forEach(function(t,e){r.Bh.Xa(e)?a.push(e):c=c.then(function(){return bl(r,e),Kh(r.Ou,e,!0)}),df(r.$h,e)}),[4,c]);case 4:return t.sent(),[4,Sl(r,a)];case 5:return t.sent(),(n=r).Gh.forEach(function(t,e){df(n.$h,e)}),n.zh.ma(),n.Gh=new Map,n.jh=new Ri(hi.$),r.Xh=!1,[4,Df(r.$h,!1)];case 6:t.sent(),t.label=7;case 7:return[2]}var n})})}function Sl(p,d){return y(this,void 0,void 0,function(){var e,n,r,i,o,s,u,a,c,h,f,l;return v(this,function(t){switch(t.label){case 0:e=p,n=[],r=[],i=0,o=d,t.label=1;case 1:return i<o.length?(s=o[i],u=void 0,(a=e.Kh.get(s))&&0!==a.length?[4,Gh(e.Ou,Au(a[0]))]:[3,7]):[3,13];case 2:u=t.sent(),c=0,h=a,t.label=3;case 3:return c<h.length?(f=h[c],f=e.Qh.get(f),[4,function(r,i){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return[4,Wh((e=r).Ou,i.query,!0)];case 1:return n=t.sent(),n=i.view.Oh(n),[2,(e.Zh&&Il(e,i.targetId,n.xh),n)]}})})}(e,f)]):[3,6];case 4:(f=t.sent()).snapshot&&r.push(f.snapshot),t.label=5;case 5:return c++,[3,3];case 6:return[3,11];case 7:return[4,Hh(e.Ou,s)];case 8:return l=t.sent(),[4,Gh(e.Ou,l)];case 9:return u=t.sent(),[4,ll(e,Ol(l),s,!1)];case 10:t.sent(),t.label=11;case 11:n.push(u),t.label=12;case 12:return i++,[3,1];case 13:return[2,(e.Uh.fu(r),n)]}})})}function Ol(t){return gu(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function xl(t){return t.$h.ku.Gu=dl.bind(null,t),t.$h.ku.Xe=function(t,e){var n=t;if((t=n.Gh.get(e))&&t.kh)return Qi().add(t.key);var r=Qi();if(!(e=n.Kh.get(e)))return r;for(var i=0,o=e;i<o.length;i++)var s=o[i],s=n.Qh.get(s),r=r.Gt(s.view.ph);return r}.bind(null,t),t.$h.ku.ju=function(o,s,u){return y(this,void 0,void 0,function(){var e,n,r,i;return v(this,function(t){switch(t.label){case 0:return(e=o).Bh.th(s,"rejected",u),i=e.Gh.get(s),(n=i&&i.key)?(r=(r=new Ri(hi.$)).Tt(n,new fu(n,si.min())),i=Qi().add(n),i=new Zi(si.min(),new Map,new ji(ti),r,i),[4,dl(e,i)]):[3,2];case 1:return t.sent(),e.jh=e.jh.remove(n),e.Gh.delete(s),El(e),[3,4];case 2:return[4,Kh(e.Ou,s,!1).then(function(){return bl(e,s,u)}).catch(Yh)];case 3:t.sent(),t.label=4;case 4:return[2]}})})}.bind(null,t),t.Uh.fu=function(t,e){for(var n=t,r=!1,i=0,o=e;i<o.length;i++){var s=o[i],u=s.query,u=n.queries.get(u);if(u){for(var a=0,c=u.listeners;a<c.length;a++)c[a].na(s)&&(r=!0);u.Xu=s}}r&&Lf(n)}.bind(null,t.Lh),t.Uh.el=function(t,e,n){var r=t;if(t=r.queries.get(e))for(var i=0,o=t.listeners;i<o.length;i++)o[i].onError(n);r.queries.delete(e)}.bind(null,t.Lh),t}function kl(t){return t.$h.ku.zu=function(i,o){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:e=i,n=o.batch.batchId,t.label=1;case 1:return t.trys.push([1,4,,6]),[4,Fh(e.Ou,o)];case 2:return r=t.sent(),wl(e,n,null),ml(e,n),e.Bh.Ga(n,"acknowledged"),[4,Tl(e,r)];case 3:return t.sent(),[3,6];case 4:return[4,Yh(t.sent())];case 5:return t.sent(),[3,6];case 6:return[2]}})})}.bind(null,t),t.$h.ku.Hu=vl.bind(null,t),t}var Pl,Rl,Ll,Cl,Ml,Vl=(mp.prototype.Fr=function(t){return fa.resolve(0===this.rs.length)},mp.prototype.Or=function(t,e,n,r){var i=this.nl;this.nl++,0<this.rs.length&&this.rs[this.rs.length-1];n=new aa(i,e,n,r);this.rs.push(n);for(var o=0,s=r;o<s.length;o++){var u=s[o];this.sl=this.sl.add(new Vf(u.key,i)),this.os.Mr(t,u.key.path.q())}return fa.resolve(n)},mp.prototype.kr=function(t,e){return fa.resolve(this.il(e))},mp.prototype.Lr=function(t,e){e+=1,e=this.rl(e),e=e<0?0:e;return fa.resolve(this.rs.length>e?this.rs[e]:null)},mp.prototype.Br=function(){return fa.resolve(0===this.rs.length?-1:this.nl-1)},mp.prototype.qr=function(t){return fa.resolve(this.rs.slice())},mp.prototype.us=function(t,e){var n=this,r=new Vf(e,0),e=new Vf(e,Number.POSITIVE_INFINITY),i=[];return this.sl.Kt([r,e],function(t){t=n.il(t.Ra);i.push(t)}),fa.resolve(i)},mp.prototype.ds=function(t,e){var n=this,r=new ji(ti);return e.forEach(function(t){var e=new Vf(t,0),t=new Vf(t,Number.POSITIVE_INFINITY);n.sl.Kt([e,t],function(t){r=r.add(t.Ra)})}),fa.resolve(this.ol(r))},mp.prototype.Rs=function(t,e){var n=e.path,r=n.length+1,e=n;hi.ot(e)||(e=e.child(""));var e=new Vf(new hi(e),0),i=new ji(ti);return this.sl.Wt(function(t){var e=t.key.path;return!!n.j(e)&&(e.length===r&&(i=i.add(t.Ra)),!0)},e),fa.resolve(this.ol(i))},mp.prototype.ol=function(t){var e=this,n=[];return t.forEach(function(t){t=e.il(t);null!==t&&n.push(t)}),n},mp.prototype.Qr=function(n,r){var i=this;Ur(0===this.cl(r.batchId,"removed")),this.rs.shift();var o=this.sl;return fa.forEach(r.mutations,function(t){var e=new Vf(t.key,r.batchId);return o=o.delete(e),i.Dr.jr(n,t.key)}).next(function(){i.sl=o})},mp.prototype.Wr=function(t){},mp.prototype.zr=function(t,e){var n=new Vf(e,0),n=this.sl.jt(n);return fa.resolve(e.isEqual(n&&n.key))},mp.prototype.Gr=function(t){return this.rs.length,fa.resolve()},mp.prototype.cl=function(t,e){return this.rl(t)},mp.prototype.rl=function(t){return 0===this.rs.length?0:t-this.rs[0].batchId},mp.prototype.il=function(t){t=this.rl(t);return t<0||t>=this.rs.length?null:this.rs[t]},mp),Ul=(gp.prototype.jn=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,i=this.ul(e);return this.docs=this.docs.Tt(r,{zn:e,size:i,readTime:n}),this.size+=i-o,this.os.Mr(t,r.path.q())},gp.prototype.Hn=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},gp.prototype.Jn=function(t,e){e=this.docs.get(e);return fa.resolve(e?e.zn:null)},gp.prototype.getEntries=function(t,e){var n=this,r=Bi;return e.forEach(function(t){var e=n.docs.get(t);r=r.Tt(t,e?e.zn:null)}),fa.resolve(r)},gp.prototype.ws=function(t,e,n){for(var r=Ki,i=new hi(e.path.child("")),o=this.docs.Vt(i);o.Nt();){var s=o.Ct(),u=s.key,a=s.value,s=a.zn,a=a.readTime;if(!e.path.j(u.path))break;a.F(n)<=0||s instanceof hu&&xu(e,s)&&(r=r.Tt(s.key,s))}return fa.resolve(r)},gp.prototype.al=function(t,e){return fa.forEach(this.docs,function(t){return e(t)})},gp.prototype.io=function(t){return new ql(this)},gp.prototype.oo=function(t){return fa.resolve(this.size)},gp),ql=(n(vp,Ml=h),vp.prototype.Zn=function(n){var r=this,i=[];return this.Qn.forEach(function(t,e){e&&e.zn?i.push(r.co.jn(n,e.zn,r.Wn(t))):r.co.Hn(t)}),fa.qn(i)},vp.prototype.Yn=function(t,e){return this.co.Jn(t,e)},vp.prototype.Xn=function(t,e){return this.co.getEntries(t,e)},vp),jl=(yp.prototype.Ue=function(t,n){return this.hl.forEach(function(t,e){return n(e)}),fa.resolve()},yp.prototype.Po=function(t){return fa.resolve(this.lastRemoteSnapshotVersion)},yp.prototype.yo=function(t){return fa.resolve(this.ll)},yp.prototype.mo=function(t){return this.highestTargetId=this.fl.next(),fa.resolve(this.highestTargetId)},yp.prototype.Vo=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.ll&&(this.ll=e),fa.resolve()},yp.prototype.vo=function(t){this.hl.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.fl=new mh(e),this.highestTargetId=e),t.sequenceNumber>this.ll&&(this.ll=t.sequenceNumber)},yp.prototype.po=function(t,e){return this.vo(e),this.targetCount+=1,fa.resolve()},yp.prototype.So=function(t,e){return this.vo(e),fa.resolve()},yp.prototype.Do=function(t,e){return this.hl.delete(e.target),this._l.Ia(e.targetId),--this.targetCount,fa.resolve()},yp.prototype.mr=function(n,r,i){var o=this,s=0,u=[];return this.hl.forEach(function(t,e){e.sequenceNumber<=r&&null===i.get(e.targetId)&&(o.hl.delete(t),u.push(o.Co(n,e.targetId)),s++)}),fa.qn(u).next(function(){return s})},yp.prototype.No=function(t){return fa.resolve(this.targetCount)},yp.prototype.xo=function(t,e){e=this.hl.get(e)||null;return fa.resolve(e)},yp.prototype.Fo=function(t,e,n){return this._l.wa(e,n),fa.resolve()},yp.prototype.Mo=function(e,t,n){this._l.Ta(t,n);var r=this.persistence.Dr,i=[];return r&&t.forEach(function(t){i.push(r.jr(e,t))}),fa.qn(i)},yp.prototype.Co=function(t,e){return this._l.Ia(e),fa.resolve()},yp.prototype.$o=function(t,e){e=this._l.Aa(e);return fa.resolve(e)},yp.prototype.zr=function(t,e){return fa.resolve(this._l.zr(e))},yp),Fl=(dp.prototype.ho=function(t,e){return fa.resolve(this.dl.get(e))},dp.prototype.lo=function(t,e){return this.dl.set(e.id,{id:e.id,version:e.version,createTime:Ko(e.createTime)}),fa.resolve()},dp.prototype._o=function(t,e){return fa.resolve(this.wl.get(e))},dp.prototype.fo=function(t,e){return this.wl.set(e.name,{name:(e=e).name,query:Ec(e.bundledQuery),readTime:Ko(e.readTime)}),fa.resolve()},dp),Bl=(pp.prototype.start=function(){return Promise.resolve()},pp.prototype.Ic=function(){return this.Qo=!1,Promise.resolve()},Object.defineProperty(pp.prototype,"lr",{get:function(){return this.Qo},enumerable:!1,configurable:!0}),pp.prototype.rc=function(){},pp.prototype.oc=function(){},pp.prototype.bc=function(){return this.os},pp.prototype.yc=function(t){var e=this.El[t.h()];return e||(e=new Vl(this.os,this.Dr),this.El[t.h()]=e),e},pp.prototype.Vc=function(){return this.Yo},pp.prototype.vc=function(){return this.ss},pp.prototype.Sc=function(){return this.Xo},pp.prototype.runTransaction=function(t,e,n){var r=this;Rr("MemoryPersistence","Starting transaction:",t);var i=new zl(this.Uo.next());return this.Dr.Il(),n(i).next(function(t){return r.Dr.ml(i).next(function(){return t})}).Ln().then(function(t){return i.ns(),t})},pp.prototype.Al=function(e,n){return fa.Un(Object.values(this.El).map(function(t){return function(){return t.zr(e,n)}}))},pp),zl=(n(lp,Cl=Ie),lp),Gl=(fp.gl=function(t){return new fp(t)},Object.defineProperty(fp.prototype,"yl",{get:function(){if(this.Pl)return this.Pl;throw Vr()},enumerable:!1,configurable:!0}),fp.prototype.Oo=function(t,e,n){return this.Rl.Oo(n,e),this.yl.delete(n.toString()),fa.resolve()},fp.prototype.ko=function(t,e,n){return this.Rl.ko(n,e),this.yl.add(n.toString()),fa.resolve()},fp.prototype.jr=function(t,e){return this.yl.add(e.toString()),fa.resolve()},fp.prototype.removeTarget=function(t,e){var n=this;this.Rl.Ia(e.targetId).forEach(function(t){return n.yl.add(t.toString())});var r=this.persistence.Vc();return r.$o(t,e.targetId).next(function(t){t.forEach(function(t){return n.yl.add(t.toString())})}).next(function(){return r.Do(t,e)})},fp.prototype.Il=function(){this.Pl=new Set},fp.prototype.ml=function(n){var r=this,i=this.persistence.vc().io();return fa.forEach(this.yl,function(t){var e=hi.st(t);return r.Vl(n,e).next(function(t){t||i.Hn(e)})}).next(function(){return r.Pl=null,i.apply(n)})},fp.prototype.Fc=function(t,e){var n=this;return this.Vl(t,e).next(function(t){t?n.yl.delete(e.toString()):n.yl.add(e.toString())})},fp.prototype.Tl=function(t){return 0},fp.prototype.Vl=function(t,e){var n=this;return fa.Un([function(){return fa.resolve(n.Rl.zr(e))},function(){return n.persistence.Vc().zr(t,e)},function(){return n.persistence.Al(t,e)}])},fp),Kl=(hp.prototype.lu=function(t){this.bl=t},hp.prototype.ou=function(t){this.Sl=t},hp.prototype.onMessage=function(t){this.Dl=t},hp.prototype.close=function(){this.vl()},hp.prototype.send=function(t){this.pl(t)},hp.prototype.Cl=function(){this.bl()},hp.prototype.Nl=function(t){this.Sl(t)},hp.prototype.xl=function(t){this.Dl(t)},hp),Wl={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Hl=(cp.prototype.yu=function(e,t,n,r){var i=this.kl(e,t);Rr("RestConnection","Sending: ",i,n);t={};return this.$l(t,r),this.Ll(e,i,t,n).then(function(t){return Rr("RestConnection","Received: ",t),t},function(t){throw Cr("RestConnection",e+" failed with error: ",t,"url: ",i,"request:",n),t})},cp.prototype.Vu=function(t,e,n,r){return this.yu(t,e,n,r)},cp.prototype.$l=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.1.2",t["Content-Type"]="text/plain",e)for(var n in e.T)e.T.hasOwnProperty(n)&&(t[n]=e.T[n])},cp.prototype.kl=function(t,e){t=Wl[t];return this.Ol+"/v1/"+e+":"+t},n(ap,Ll=cp),ap.prototype.Ll=function(o,e,s,u){return new Promise(function(n,r){var i=new Er;i.listenOnce(mr.COMPLETE,function(){try{switch(i.getLastErrorCode()){case gr.NO_ERROR:var t=i.getResponseJson();Rr("Connection","XHR received:",JSON.stringify(t)),n(t);break;case gr.TIMEOUT:Rr("Connection",'RPC "'+o+'" timed out'),r(new Br(Fr.DEADLINE_EXCEEDED,"Request time out"));break;case gr.HTTP_ERROR:var e=i.getStatus();Rr("Connection",'RPC "'+o+'" failed with status:',e,"response text:",i.getResponseText()),0<e?(t=i.getResponseJson().error)&&t.status&&t.message?(e=t.status.toLowerCase().replace(/_/g,"-"),e=0<=Object.values(Fr).indexOf(e)?e:Fr.UNKNOWN,r(new Br(e,t.message))):r(new Br(Fr.UNKNOWN,"Server responded with status "+i.getStatus())):r(new Br(Fr.UNAVAILABLE,"Connection failed."));break;default:Vr()}}finally{Rr("Connection",'RPC "'+o+'" completed.')}});var t=JSON.stringify(u);i.send(e,"POST",t,s,15)})},ap.prototype._u=function(t,e){var n,r=[this.Ol,"/","google.firestore.v1.Firestore","/",t,"/channel"],i=new fr,o=vr(),t={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.t.projectId+"/databases/"+this.t.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.i};this.$l(t.initMessageHeaders,e),"undefined"!=typeof window&&(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(p())||"object"==typeof navigator&&"ReactNative"===navigator.product||0<=p().indexOf("Electron/")||(0<=(n=p()).indexOf("MSIE ")||0<=n.indexOf("Trident/"))||0<=p().indexOf("MSAppHost/")||"object"==typeof(n="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0)&&void 0!==n.id||(t.httpHeadersOverwriteParam="$httpHeaders");r=r.join("");Rr("Connection","Creating WebChannel: "+r,t);var s=i.createWebChannel(r,t),u=!1,a=!1,c=new Kl({pl:function(t){a?Rr("Connection","Not sending because WebChannel is closed:",t):(u||(Rr("Connection","Opening WebChannel transport."),s.open(),u=!0),Rr("Connection","WebChannel sending:",t),s.send(t))},vl:function(){return s.close()}}),t=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return t(s,Ir.EventType.OPEN,function(){a||Rr("Connection","WebChannel transport opened.")}),t(s,Ir.EventType.CLOSE,function(){a||(a=!0,Rr("Connection","WebChannel transport closed"),c.Nl())}),t(s,Ir.EventType.ERROR,function(t){a||(a=!0,Cr("Connection","WebChannel transport errored:",t),c.Nl(new Br(Fr.UNAVAILABLE,"The operation could not be completed")))}),t(s,Ir.EventType.MESSAGE,function(t){var e,n,r,i;a||(Ur(!!(e=t.data[0])),(n=e.error||(null===(i=e[0])||void 0===i?void 0:i.error))?(Rr("Connection","WebChannel received error:",n),r=n.status,t=function(){var t=Si[r];if(void 0!==t)return Pi(t)}(),i=n.message,void 0===t&&(t=Fr.INTERNAL,i="Unknown error status: "+r+" with message "+n.message),a=!0,c.Nl(new Br(t,i)),s.close()):(Rr("Connection","WebChannel received:",e),c.xl(e)))}),t(o,wr.STAT_EVENT,function(t){t.stat===br?Rr("Connection","Detected buffering proxy"):t.stat===_r&&Rr("Connection","Detected no buffering proxy")}),setTimeout(function(){c.Cl()},0),c},ap),Ql=(up.prototype.Qu=function(t){this.Kl.push(t)},up.prototype.Ic=function(){window.removeEventListener("online",this.Bl),window.removeEventListener("offline",this.Ul)},up.prototype.Wl=function(){window.addEventListener("online",this.Bl),window.addEventListener("offline",this.Ul)},up.prototype.ql=function(){Rr("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(0)},up.prototype.Ql=function(){Rr("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Kl;t<e.length;t++)(0,e[t])(1)},up.Gs=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},up),$l=(sp.prototype.Qu=function(t){},sp.prototype.Ic=function(){},sp),Yl=(op.prototype.initialize=function(e){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return this.serializer=ma(e.Fl.t),this.Bh=this.jl(e),this.persistence=this.Gl(e),[4,this.persistence.start()];case 1:return t.sent(),this.zl=this.Hl(e),this.Ou=this.Jl(e),[2]}})})},op.prototype.Hl=function(t){return null},op.prototype.Jl=function(t){return qh(this.persistence,new sc,t.Yl,this.serializer)},op.prototype.Gl=function(t){return new Bl(Gl.gl,this.serializer)},op.prototype.jl=function(t){return new Yf},op.prototype.terminate=function(){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return this.zl&&this.zl.stop(),[4,this.Bh.Ic()];case 1:return t.sent(),[4,this.persistence.Ic()];case 2:return t.sent(),[2]}})})},op),Xl=(n(ip,Rl=Yl),ip.prototype.initialize=function(e){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return[4,Rl.prototype.initialize.call(this,e)];case 1:return t.sent(),[4,$h(this.Ou)];case 2:return t.sent(),[4,this.Xl.initialize(this,e)];case 3:return t.sent(),[4,kl(this.Xl.va)];case 4:return t.sent(),[4,Tf(this.Xl.$h)];case 5:return t.sent(),[2]}})})},ip.prototype.Jl=function(t){return qh(this.persistence,new sc,t.Yl,this.serializer)},ip.prototype.Hl=function(t){var e=this.persistence.Dr.cr;return new ic(e,t.di)},ip.prototype.Gl=function(t){var e=Mh(t.Fl.t,t.Fl.persistenceKey),n=void 0!==this.cacheSizeBytes?ec.er(this.cacheSizeBytes):ec.ir;return new Sh(this.synchronizeTabs,e,t.clientId,n,t.di,Ka(),Wa(),this.serializer,this.Bh,!!this.forceOwnership)},ip.prototype.jl=function(t){return new Yf},ip),Jl=(n(rp,Pl=Xl),rp.prototype.initialize=function(r){return y(this,void 0,void 0,function(){var e,n=this;return v(this,function(t){switch(t.label){case 0:return[4,Pl.prototype.initialize.call(this,r)];case 1:return t.sent(),e=this.Xl.va,this.Bh instanceof $f?(this.Bh.va={Eh:Nl.bind(null,e),Th:function(i,o,s,u){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return(e=i).Xh?(Rr("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!e.Kh.has(o))return[3,8];switch(s){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,Qh(e.Ou)];case 3:return n=t.sent(),r=Zi.ae(o,"current"===s),[4,Tl(e,n,r)];case 4:return t.sent(),[3,8];case 5:return[4,Kh(e.Ou,o,!0)];case 6:return t.sent(),bl(e,o,u),[3,8];case 7:Vr(),t.label=8;case 8:return[2]}})})}.bind(null,e),Ih:function(c,h,f){return y(this,void 0,void 0,function(){var n,e,r,i,o,s,u,a;return v(this,function(t){switch(t.label){case 0:if(!(n=xl(c)).Xh)return[3,10];e=0,r=h,t.label=1;case 1:return e<r.length?(r=r[e],n.Kh.has(r)?(Rr("SyncEngine","Adding an already active target "+r),[3,5]):[4,Hh(n.Ou,r)]):[3,6];case 2:return i=t.sent(),[4,Gh(n.Ou,i)];case 3:return o=t.sent(),[4,ll(n,Ol(i),o.targetId,!1)];case 4:t.sent(),pf(n.$h,o),t.label=5;case 5:return e++,[3,1];case 6:s=function(e){return v(this,function(t){switch(t.label){case 0:return n.Kh.has(e)?[4,Kh(n.Ou,e,!1).then(function(){df(n.$h,e),bl(n,e)}).catch(Yh)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})},u=0,a=f,t.label=7;case 7:return u<a.length?(a=a[u],[5,s(a)]):[3,10];case 8:t.sent(),t.label=9;case 9:return u++,[3,7];case 10:return[2]}})})}.bind(null,e),gc:function(t){return t.Ou.persistence.gc()}.bind(null,e),wh:function(n){return y(this,void 0,void 0,function(){var e;return v(this,function(t){return[2,Qh((e=n).Ou).then(function(t){return Tl(e,t)})]})})}.bind(null,e)},[4,this.Bh.start()]):[3,3];case 2:t.sent(),t.label=3;case 3:return[4,this.persistence.ic(function(e){return y(n,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return[4,Dl(this.Xl.va,e)];case 1:return t.sent(),this.zl&&(e&&!this.zl.lr?this.zl.start(this.Ou):e||this.zl.stop()),[2]}})})})];case 4:return t.sent(),[2]}})})},rp.prototype.jl=function(t){var e=Ka();if(!$f.Gs(e))throw new Br(Fr.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=Mh(t.Fl.t,t.Fl.persistenceKey);return new $f(e,t.di,n,t.clientId,t.Yl)},rp),Zl=(np.prototype.initialize=function(n,r){return y(this,void 0,void 0,function(){var e=this;return v(this,function(t){switch(t.label){case 0:return this.Ou?[3,2]:(this.Ou=n.Ou,this.Bh=n.Bh,this.Mu=this.Zl(r),this.$h=this.t_(r),this.Lh=this.e_(r),this.va=this.n_(r,!n.synchronizeTabs),this.Bh.pu=function(t){return yl(e.va,t,1)},this.$h.ku.s_=Al.bind(null,this.va),[4,Df(this.$h,this.va.Zh)]);case 1:t.sent(),t.label=2;case 2:return[2]}})})},np.prototype.e_=function(t){return new xf},np.prototype.Zl=function(t){var e=ma(t.Fl.t),n=(n=t.Fl,new Hl(n));return t=t.credentials,new rf(t,n,e)},np.prototype.t_=function(t){var e=this,n=this.Ou,r=this.Mu,i=t.di,o=function(t){return yl(e.va,t,0)},t=new(Ql.Gs()?Ql:$l);return new Xh(n,r,i,o,t)},np.prototype.n_=function(t,e){return function(t,e,n,r,i,o,s){o=new nl(t,e,n,r,i,o);return s&&(o.Xh=!0),o}(this.Ou,this.$h,this.Lh,this.Bh,t.Yl,t.qh,e)},np.prototype.terminate=function(){return function(n){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=n,Rr("RemoteStore","RemoteStore shutting down."),e.Bu.add(5),[4,lf(e)];case 1:return t.sent(),e.Uu.Ic(),e.Ku.set("Unknown"),[2]}})})}(this.$h)},np),tp=(ep.prototype.next=function(t){this.observer.next&&this.i_(this.observer.next,t)},ep.prototype.error=function(t){this.observer.error?this.i_(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},ep.prototype.r_=function(){this.muted=!0},ep.prototype.i_=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},ep);function ep(t){this.observer=t,this.muted=!1}function np(){}function rp(t,e){var n=this;return(n=Pl.call(this,t,e,!1)||this).Xl=t,n.cacheSizeBytes=e,n.synchronizeTabs=!0,n}function ip(t,e,n){var r=this;return(r=Rl.call(this)||this).Xl=t,r.cacheSizeBytes=e,r.forceOwnership=n,r.synchronizeTabs=!1,r}function op(){this.synchronizeTabs=!1}function sp(){}function up(){var t=this;this.Bl=function(){return t.ql()},this.Ul=function(){return t.Ql()},this.Kl=[],this.Wl()}function ap(t){var e=this;return(e=Ll.call(this,t)||this).forceLongPolling=t.forceLongPolling,e.i=t.i,e}function cp(t){this.Fl=t,this.t=t.t;var e=t.ssl?"https":"http";this.Ol=e+"://"+t.host,this.Ml="projects/"+this.t.projectId+"/databases/"+this.t.database+"/documents"}function hp(t){this.pl=t.pl,this.vl=t.vl}function fp(t){this.persistence=t,this.Rl=new Mf,this.Pl=null}function lp(t){var e=this;return(e=Cl.call(this)||this).Lo=t,e}function pp(t,e){var n=this;this.El={},this.Uo=new Ea(0),this.Qo=!1,this.Qo=!0,this.Dr=t(this),this.Yo=new jl(this),this.os=new jc,this.ss=(t=this.os,new Ul(t,function(t){return n.Dr.Tl(t)})),this.serializer=new pc(e),this.Xo=new Fl(this.serializer)}function dp(t){this.serializer=t,this.dl=new Map,this.wl=new Map}function yp(t){this.persistence=t,this.hl=new ha(Ii,Ei),this.lastRemoteSnapshotVersion=si.min(),this.highestTargetId=0,this.ll=0,this._l=new Mf,this.targetCount=0,this.fl=mh.To()}function vp(t){var e=this;return(e=Ml.call(this)||this).co=t,e}function gp(t,e){this.os=t,this.ul=e,this.docs=new Ri(hi.$),this.size=0}function mp(t,e){this.os=t,this.Dr=e,this.rs=[],this.nl=1,this.sl=new ji(Vf._a)}function wp(t,e,n){if(!n)throw new Br(Fr.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function bp(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Br(Fr.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function _p(t,e,n,r){if(!0===e&&!0===r)throw new Br(Fr.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Ip(t){if(!hi.ot(t))throw new Br(Fr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function Ep(t){if(hi.ot(t))throw new Br(Fr.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Tp(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return 20<e.length&&(e=e.substring(0,20)+"..."),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"!=typeof e)return"function"==typeof e?"a function":Vr();if(e instanceof Array)return"an array";var t=function(){if(e.constructor){var t=/function\s+([^\s(]+)\s*\(/.exec(e.constructor.toString());if(t&&1<t.length)return t[1]}return null}();return t?"a custom "+t+" object":"an object"}function Ap(t,e){if("_delegate"in t&&(t=t.o_),t instanceof e)return t;if(e.name===t.constructor.name)throw new Br(Fr.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");t=Tp(t);throw new Br(Fr.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+t)}function Np(t,e){if(e<=0)throw new Br(Fr.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var Dp,Sp=function(t){this._methodName=t},Op=(n(xp,Dp=Sp),xp.prototype.c_=function(t){if(2!==t.u_)throw 1===t.u_?t.a_(this._methodName+"() can only appear at the top level of your update data"):t.a_(this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.en.push(t.path),null},xp.prototype.isEqual=function(t){return t instanceof xp},xp);function xp(){return null!==Dp&&Dp.apply(this,arguments)||this}function kp(t,e,n){return new Ny({u_:3,h_:e.settings.h_,methodName:t._methodName,l_:n},e.t,e.serializer,e.ignoreUndefinedProperties)}var Pp,Rp,Lp,Cp,Mp=(n(Zp,Cp=Sp),Zp.prototype.c_=function(t){return new xs(t.path,new ys)},Zp.prototype.isEqual=function(t){return t instanceof Zp},Zp),Vp=(n(Jp,Lp=Sp),Jp.prototype.c_=function(t){var e=kp(this,t,!0),n=this.__.map(function(t){return Ly(t,e)}),n=new vs(n);return new xs(t.path,n)},Jp.prototype.isEqual=function(t){return this===t},Jp),Up=(n(Xp,Rp=Sp),Xp.prototype.c_=function(t){var e=kp(this,t,!0),n=this.__.map(function(t){return Ly(t,e)}),n=new _s(n);return new xs(t.path,n)},Xp.prototype.isEqual=function(t){return this===t},Xp),qp=(n(Yp,Pp=Sp),Yp.prototype.c_=function(t){var e=new As(t.serializer,Bo(t.serializer,this.f_));return new xs(t.path,e)},Yp.prototype.isEqual=function(t){return this===t},Yp),jp=(Object.defineProperty($p.prototype,"latitude",{get:function(){return this.d_},enumerable:!1,configurable:!0}),Object.defineProperty($p.prototype,"longitude",{get:function(){return this.w_},enumerable:!1,configurable:!0}),$p.prototype.isEqual=function(t){return this.d_===t.d_&&this.w_===t.w_},$p.prototype.toJSON=function(){return{latitude:this.d_,longitude:this.w_}},$p.prototype.C=function(t){return ti(this.d_,t.d_)||ti(this.w_,t.w_)},$p),Fp=(Qp.fromBase64String=function(t){try{return new Qp(Ai.fromBase64String(t))}catch(t){throw new Br(Fr.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}},Qp.fromUint8Array=function(t){return new Qp(Ai.fromUint8Array(t))},Qp.prototype.toBase64=function(){return this.E_.toBase64()},Qp.prototype.toUint8Array=function(){return this.E_.toUint8Array()},Qp.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},Qp.prototype.isEqual=function(t){return this.E_.isEqual(t.E_)},Qp),Bp=function(t){this.o_=t},zp=new Map,Gp=(Hp.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},Hp),Kp=(Object.defineProperty(Wp.prototype,"app",{get:function(){if(!this.P_)throw new Br(Fr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.P_},enumerable:!1,configurable:!0}),Object.defineProperty(Wp.prototype,"g_",{get:function(){return this.m_},enumerable:!1,configurable:!0}),Object.defineProperty(Wp.prototype,"y_",{get:function(){return void 0!==this.V_},enumerable:!1,configurable:!0}),Wp.prototype.p_=function(t){if(this.m_)throw new Br(Fr.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this.I_=new Gp(t),void 0!==t.credentials&&(this.R_=function(t){if(!t)return new zr;switch(t.type){case"gapi":var e=t.client;return Ur(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Wr(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Br(Fr.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},Wp.prototype.v_=function(){return this.I_},Wp.prototype.b_=function(){return this.m_=!0,this.I_},Wp.prototype._delete=function(){return this.V_||(this.V_=this.S_()),this.V_},Wp.prototype.S_=function(){return t=this,(e=zp.get(t))&&(Rr("ComponentProvider","Removing Datastore"),zp.delete(t),e.terminate()),Promise.resolve();var t,e},Wp);function Wp(t,e){this.T_="(lite)",this.I_=new Gp({}),this.m_=!1,t instanceof Dr?(this.A_=t,this.R_=new zr):(this.P_=t,this.A_=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Br(Fr.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dr(t.options.projectId)}(t),this.R_=new Gr(e))}function Hp(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Br(Fr.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Br(Fr.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,_p("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}function Qp(t){this.E_=t}function $p(t,e){if(!isFinite(t)||t<-90||90<t)throw new Br(Fr.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||180<e)throw new Br(Fr.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this.d_=t,this.w_=e}function Yp(t,e){var n=this;return(n=Pp.call(this,t)||this).f_=e,n}function Xp(t,e){var n=this;return(n=Rp.call(this,t)||this).__=e,n}function Jp(t,e){var n=this;return(n=Lp.call(this,t)||this).__=e,n}function Zp(){return null!==Cp&&Cp.apply(this,arguments)||this}function td(){if("undefined"==typeof Uint8Array)throw new Br(Fr.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function ed(){if("undefined"==typeof atob)throw new Br(Fr.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var nd,rd,id,od=(n(pd,id=Bp),pd.fromBase64String=function(t){return ed(),new pd(Fp.fromBase64String(t))},pd.fromUint8Array=function(t){return td(),new pd(Fp.fromUint8Array(t))},pd.prototype.toBase64=function(){return ed(),this.o_.toBase64()},pd.prototype.toUint8Array=function(){return td(),this.o_.toUint8Array()},pd.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},pd.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},pd),h=(ld.prototype.D_=function(t,e){switch(void 0===e&&(e="none"),Io(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Oo(t.integerValue||t.doubleValue);case 3:return this.C_(t.timestampValue);case 4:return this.N_(t,e);case 5:return t.stringValue;case 6:return this.x_(xo(t.bytesValue));case 7:return this.F_(t.referenceValue);case 8:return this.O_(t.geoPointValue);case 9:return this.M_(t.arrayValue,e);case 10:return this.k_(t.mapValue,e);default:throw Vr()}},ld.prototype.k_=function(t,n){var r=this,i={};return go(t.fields||{},function(t,e){i[t]=r.D_(e,n)}),i},ld.prototype.O_=function(t){return new jp(Oo(t.latitude),Oo(t.longitude))},ld.prototype.M_=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.D_(t,e)})},ld.prototype.N_=function(t,e){switch(e){case"previous":var n=function t(e){e=e.mapValue.fields.__previous_value__;return wo(e)?t(e):e}(t);return null==n?null:this.D_(n,e);case"estimate":return this.C_(bo(t));default:return null}},ld.prototype.C_=function(t){t=So(t);return new oi(t.seconds,t.nanos)},ld.prototype.L_=function(t,e){var n=ui.Y(t);Ur(fs(n));t=new Dr(n.get(1),n.get(3)),n=new hi(n.B(5));return t.isEqual(e)||Lr("Document "+n+" contains a document reference within a different database ("+t.projectId+"/"+t.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),n},ld),sd=(n(fd,rd=h),fd.prototype.x_=function(t){return new od(new Fp(t))},fd.prototype.F_=function(t){t=this.L_(t,this.firestore.A_);return Av.B_(t,this.firestore,null)},fd),ud=(Object.defineProperty(hd.prototype,"id",{get:function(){return this.Q_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(hd.prototype,"ref",{get:function(){return new Ud(this.q_,this.W_,this.Q_)},enumerable:!1,configurable:!0}),hd.prototype.exists=function(){return null!==this.K_},hd.prototype.data=function(){if(this.K_){if(this.W_){var t=new ad(this.q_,this.U_,this.Q_,this.K_,null);return this.W_.fromFirestore(t)}return this.U_.D_(this.K_.En())}},hd.prototype.get=function(t){if(this.K_){t=this.K_.data().field(dd("DocumentSnapshot.get",t));if(null!==t)return this.U_.D_(t)}},hd),ad=(n(cd,nd=ud),cd.prototype.data=function(){return nd.prototype.data.call(this)},cd);function cd(){return null!==nd&&nd.apply(this,arguments)||this}function hd(t,e,n,r,i){this.q_=t,this.U_=e,this.Q_=n,this.K_=r,this.W_=i}function fd(t){var e=this;return(e=rd.call(this)||this).firestore=t,e}function ld(){}function pd(){return null!==id&&id.apply(this,arguments)||this}function dd(t,e){return"string"==typeof e?jy(t,e):(e instanceof Bp?e.o_:e).j_}var yd,vd=(wd.prototype.isEqual=function(t){return this.j_.isEqual(t.j_)},wd),gd=(n(md,yd=Kp),md.prototype.S_=function(){return this.z_||wv(this),this.z_.terminate()},md);function md(t,e){var n=this;return(n=yd.call(this,t,e)||this).G_=new Qa,n.T_="name"in t?t.name:"[DEFAULT]",n}function wd(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Br(Fr.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this.j_=new ci(t)}function bd(n,r,i){var t=this,o=new la;return n.di.enqueue(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,3,,4]),[4,$y(n,i)];case 1:return t.sent(),[4,Yy(n,r)];case 2:return t.sent(),o.resolve(),[3,4];case 3:if(!("FirebaseError"===(t=e=t.sent()).name?t.code===Fr.FAILED_PRECONDITION||t.code===Fr.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code))throw e;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+e),o.reject(e),[3,4];case 4:return[2]}})})}).then(function(){return o.promise})}function _d(t){if(t.g_||t.y_)throw new Br(Fr.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var Id,Ed,Td=(n(Od,Ed=ud),Od.prototype.exists=function(){return Ed.prototype.exists.call(this)},Od.prototype.data=function(t){if(void 0===t&&(t={}),this.K_){if(this.W_){var e=new Ad(this.q_,this.U_,this.Q_,this.K_,this.metadata,null);return this.W_.fromFirestore(e,t)}return this.U_.D_(this.K_.En(),t.serverTimestamps)}},Od.prototype.get=function(t,e){if(void 0===e&&(e={}),this.K_){t=this.K_.data().field(dd("DocumentSnapshot.get",t));if(null!==t)return this.U_.D_(t,e.serverTimestamps)}},Od),Ad=(n(Sd,Id=Td),Sd.prototype.data=function(t){return void 0===t&&(t={}),Id.prototype.data.call(this,t)},Sd),Nd=(Object.defineProperty(Dd.prototype,"docs",{get:function(){var e=[];return this.forEach(function(t){return e.push(t)}),e},enumerable:!1,configurable:!0}),Object.defineProperty(Dd.prototype,"size",{get:function(){return this.J_.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(Dd.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),Dd.prototype.forEach=function(e,n){var r=this;this.J_.docs.forEach(function(t){e.call(n,new Ad(r.q_,r.U_,t.key,t,new Uv(r.J_.ee.has(t.key),r.J_.fromCache),r.query.W_))})},Dd.prototype.docChanges=function(t){void 0===t&&(t={});t=!!t.includeMetadataChanges;if(t&&this.J_.se)throw new Br(Fr.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this.Y_&&this.X_===t||(this.Y_=function(i,e){if(i.J_.te.W()){var n=0;return i.J_.docChanges.map(function(t){var e=new Ad(i.q_,i.U_,t.doc.key,t.doc,new Uv(i.J_.ee.has(t.doc.key),i.J_.fromCache),i.query.W_);return t.doc,{type:"added",doc:e,oldIndex:-1,newIndex:n++}})}var o=i.J_.te;return i.J_.docChanges.filter(function(t){return e||3!==t.type}).map(function(t){var e=new Ad(i.q_,i.U_,t.doc.key,t.doc,new Uv(i.J_.ee.has(t.doc.key),i.J_.fromCache),i.query.W_),n=-1,r=-1;return 0!==t.type&&(n=o.indexOf(t.doc.key),o=o.delete(t.doc.key)),1!==t.type&&(r=(o=o.add(t.doc)).indexOf(t.doc.key)),{type:function(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Vr()}}(t.type),doc:e,oldIndex:n,newIndex:r}})}(this,t),this.X_=t),this.Y_},Dd);function Dd(t,e,n,r){this.q_=t,this.U_=e,this.J_=r,this.metadata=new Uv(r.hasPendingWrites,r.fromCache),this.query=n}function Sd(){return null!==Id&&Id.apply(this,arguments)||this}function Od(t,e,n,r,i,o){var s=this;return(s=Ed.call(this,t,e,n,r,o)||this).q_=t,s.H_=t,s.metadata=i,s}function xd(t,e){return t instanceof Td&&e instanceof Td?t.q_===e.q_&&t.Q_.isEqual(e.Q_)&&(null===t.K_?null===e.K_:t.K_.isEqual(e.K_))&&t.W_===e.W_:t instanceof Nd&&e instanceof Nd&&t.q_===e.q_&&my(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t.J_.isEqual(e.J_)}var kd,Pd=(n(Rd,kd=h),Rd.prototype.x_=function(t){return new Fp(t)},Rd.prototype.F_=function(t){t=this.L_(t,this.firestore.A_);return new Ud(this.firestore,null,t)},Rd);function Rd(t){var e=this;return(e=kd.call(this)||this).firestore=t,e}function Ld(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Ap(t,Ud);var o=Ap(t.firestore,gd),s=wy(o);return e instanceof Bp&&(e=e.o_),Md(o,("string"==typeof e||e instanceof vd?Py(s,"updateDoc",t.Q_,e,n,r):ky(s,"updateDoc",t.Q_,e)).tf(t.Q_,Rs.exists(!0)))}function Cd(e){for(var n=[],t=1;t<arguments.length;t++)n[t-1]=arguments[t];e instanceof Bp&&(e=e.o_);var r={includeMetadataChanges:!1},i=0;"object"!=typeof n[i]||wa(n[i])||(r=n[i],i++);var o,s,u,a,c,h,f={includeMetadataChanges:r.includeMetadataChanges};return wa(n[i])&&(o=n[i],n[i]=null===(r=o.next)||void 0===r?void 0:r.bind(o),n[i+1]=null===(r=o.error)||void 0===r?void 0:r.bind(o),n[i+2]=null===(r=o.complete)||void 0===r?void 0:r.bind(o)),e instanceof Ud?(u=Ap(e.firestore,gd),a=mu(e.Q_.path),h={next:function(t){n[i]&&n[i](Vd(u,e,t))},error:n[i+1],complete:n[i+2]}):(s=Ap(e,qd),u=Ap(s.firestore,gd),a=s.Z_,c=new Pd(u),h={next:function(t){n[i]&&n[i](new Nd(u,c,s,t))},error:n[i+1],complete:n[i+2]},ay(e.Z_)),function(n,t,e){var r=this,i=new tp(h),o=new Cf(t,i,e);return n.di.Ri(function(){return y(r,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=Pf,[4,rv(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})}),function(){i.r_(),n.di.Ri(function(){return y(r,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=Rf,[4,rv(n)];case 1:return[2,e.apply(void 0,[t.sent(),o])]}})})})}}(mv(u),a,f)}function Md(t,e){return function(n,r){var t=this,i=new la;return n.di.Ri(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=pl,[4,nv(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(mv(t),e)}function Vd(t,e,n){var r=n.docs.get(e.Q_),i=new Pd(t);return new Td(t,i,e.Q_,r,new Uv(n.hasPendingWrites,n.fromCache),e.W_)}var Ud=(Object.defineProperty(Fd.prototype,"ef",{get:function(){return this.Q_.path},enumerable:!1,configurable:!0}),Object.defineProperty(Fd.prototype,"id",{get:function(){return this.Q_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(Fd.prototype,"path",{get:function(){return this.Q_.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(Fd.prototype,"parent",{get:function(){return new hy(this.firestore,this.W_,this.Q_.path.q())},enumerable:!1,configurable:!0}),Fd.prototype.withConverter=function(t){return new Fd(this.firestore,t,this.Q_)},Fd),qd=(jd.prototype.withConverter=function(t){return new jd(this.firestore,t,this.Z_)},jd),Ie=function(){};function jd(t,e,n){this.W_=e,this.Z_=n,this.type="query",this.firestore=t}function Fd(t,e,n){this.W_=e,this.Q_=n,this.type="document",this.firestore=t}function Bd(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){t=i[r].nf(t)}return t}var zd,Gd,Kd,Wd,Hd,Qd=(n(ry,Hd=Ie),ry.prototype.nf=function(t){var e=wy(t.firestore),e=function(t,e,n,r,i,o){if(r.tt()){if("array-contains"===i||"array-contains-any"===i)throw new Br(Fr.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+i+"' queries on FieldPath.documentId().");if("in"===i||"not-in"===i){sy(o,i);for(var s=[],u=0,a=o;u<a.length;u++){var c=a[u];s.push(oy(n,t,c))}h={arrayValue:{values:s}}}else h=oy(n,t,o)}else"in"!==i&&"not-in"!==i&&"array-contains-any"!==i||sy(o,i),h=Ry(e,"where",o,"in"===i||"not-in"===i);var h=Ru.create(r,i,h);return function(t,e){if(e.An()){var n=Iu(t);if(null!==n&&!n.isEqual(e.field))throw new Br(Fr.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");n=_u(t);null!==n&&uy(0,e.field,n)}t=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(0<=e.indexOf(i.op))return i.op}return null}(t,function(){switch(e.op){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}());if(null!==t)throw t===e.op?new Br(Fr.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter."):new Br(Fr.INVALID_ARGUMENT,"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+t.toString()+"' filters.")}(t,h),h}(t.Z_,e,t.firestore.A_,this.sf,this.rf,this.cf);return new qd(t.firestore,t.W_,(t=t.Z_,e=t.filters.concat([e]),new pu(t.path,t.collectionGroup,t.Tn.slice(),e,t.limit,t.limitType,t.startAt,t.endAt)))},ry),$d=(n(ny,Wd=Ie),ny.prototype.nf=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Br(Fr.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Br(Fr.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new ua(e,n);return e=r,null!==_u(n=t)||null!==(t=Iu(n))&&uy(0,t,e.field),r}(t.Z_,this.sf,this.uf);return new qd(t.firestore,t.W_,(t=t.Z_,e=t.Tn.concat([e]),new pu(t.path,t.collectionGroup,e,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)))},ny),Yd=(n(ey,Kd=Ie),ey.prototype.nf=function(t){return new qd(t.firestore,t.W_,Nu(t.Z_,this.af,this.hf))},ey),Xd=(n(ty,Gd=Ie),ty.prototype.nf=function(t){var e=iy(t,this.type,this.lf,this._f);return new qd(t.firestore,t.W_,(t=t.Z_,e=e,new pu(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)))},ty),Jd=(n(Zd,zd=Ie),Zd.prototype.nf=function(t){var e=iy(t,this.type,this.lf,this._f);return new qd(t.firestore,t.W_,(t=t.Z_,e=e,new pu(t.path,t.collectionGroup,t.Tn.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)))},Zd);function Zd(t,e,n){var r=this;return(r=zd.call(this)||this).type=t,r.lf=e,r._f=n,r}function ty(t,e,n){var r=this;return(r=Gd.call(this)||this).type=t,r.lf=e,r._f=n,r}function ey(t,e,n){var r=this;return(r=Kd.call(this)||this).type=t,r.af=e,r.hf=n,r}function ny(t,e){var n=this;return(n=Wd.call(this)||this).sf=t,n.uf=e,n.type="orderBy",n}function ry(t,e,n){var r=this;return(r=Hd.call(this)||this).sf=t,r.rf=e,r.cf=n,r.type="where",r}function iy(t,c,e,n){if(e[0]instanceof Bp&&(e[0]=e[0].o_),e[0]instanceof ud)return function(t,e,n,r){if(!n)throw new Br(Fr.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+c+"().");for(var i=[],o=0,s=Tu(t);o<s.length;o++){var u=s[o];if(u.field.tt())i.push(ko(e,n.key));else{var a=n.field(u.field);if(wo(a))throw new Br(Fr.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===a){u=u.field.J();throw new Br(Fr.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+u+"' (used as the orderBy) does not exist.")}i.push(a)}}return new Zu(i,r)}(t.Z_,t.firestore.A_,e[0].K_,n);var r=wy(t.firestore);return function(t,e,n,r,i,o){var s=t.Tn;if(i.length>s.length)throw new Br(Fr.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var u=[],a=0;a<i.length;a++){var c=i[a];if(s[a].field.tt()){if("string"!=typeof c)throw new Br(Fr.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!Eu(t)&&-1!==c.indexOf("/"))throw new Br(Fr.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var h=t.path.child(ui.Y(c));if(!hi.ot(h))throw new Br(Fr.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+h+"' is not because it contains an odd number of segments.");h=new hi(h);u.push(ko(e,h))}else{c=Ry(n,r,c);u.push(c)}}return new Zu(u,o)}(t.Z_,t.firestore.A_,r,c,e,n)}function oy(t,e,n){if(n instanceof Bp&&(n=n.o_),"string"==typeof n){if(""===n)throw new Br(Fr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!Eu(e)&&-1!==n.indexOf("/"))throw new Br(Fr.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");e=e.path.child(ui.Y(n));if(!hi.ot(e))throw new Br(Fr.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+e+"' is not because it has an odd number of segments ("+e.length+").");return ko(t,new hi(e))}if(n instanceof Ud)return ko(t,n.Q_);throw new Br(Fr.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Tp(n)+".")}function sy(t,e){if(!Array.isArray(t)||0===t.length)throw new Br(Fr.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(10<t.length)throw new Br(Fr.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function uy(t,e,n){if(!n.isEqual(e))throw new Br(Fr.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}function ay(t){if(bu(t)&&0===t.Tn.length)throw new Br(Fr.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var cy,hy=(n(fy,cy=qd),Object.defineProperty(fy.prototype,"id",{get:function(){return this.Z_.path.K()},enumerable:!1,configurable:!0}),Object.defineProperty(fy.prototype,"path",{get:function(){return this.Z_.path.J()},enumerable:!1,configurable:!0}),Object.defineProperty(fy.prototype,"parent",{get:function(){var t=this.ef.q();return t.W()?null:new Ud(this.firestore,null,new hi(t))},enumerable:!1,configurable:!0}),fy.prototype.withConverter=function(t){return new fy(this.firestore,t,this.ef)},fy);function fy(t,e,n){var r=this;return(r=cy.call(this,t,e,mu(n))||this).firestore=t,r.ef=n,r.type="collection",r}function ly(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t instanceof Bp&&(t=t.o_),wp("collection","path",e),t instanceof Kp){var i=ui.Y.apply(ui,s([e],n));return Ep(i),new hy(t,null,i)}if(!(t instanceof Ud||t instanceof hy))throw new Br(Fr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");e=ui.Y.apply(ui,s([t.path],n)).child(ui.Y(e));return Ep(e),new hy(t.firestore,null,e)}function py(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];if(t instanceof Bp&&(t=t.o_),1===arguments.length&&(e=Jr.D()),wp("doc","path",e),t instanceof Kp){var i=ui.Y.apply(ui,s([e],n));return Ip(i),new Ud(t,null,new hi(i))}if(!(t instanceof Ud||t instanceof hy))throw new Br(Fr.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");e=t.ef.child(ui.Y.apply(ui,s([e],n)));return Ip(e),new Ud(t.firestore,t instanceof hy?t.W_:null,new hi(e))}var dy,yy=(n(vy,dy=h),vy.prototype.x_=function(t){return new Fp(t)},vy.prototype.F_=function(t){t=this.L_(t,this.firestore.A_);return new Ud(this.firestore,null,t)},vy);function vy(t){var e=this;return(e=dy.call(this)||this).firestore=t,e}function gy(t,e){return t instanceof Bp&&(t=t.o_),e instanceof Bp&&(e=e.o_),(t instanceof Ud||t instanceof hy)&&(e instanceof Ud||e instanceof hy)&&t.firestore===e.firestore&&t.path===e.path&&t.W_===e.W_}function my(t,e){return t instanceof Bp&&(t=t.o_),e instanceof Bp&&(e=e.o_),t instanceof qd&&e instanceof qd&&t.firestore===e.firestore&&Du(t.Z_,e.Z_)&&t.W_===e.W_}function wy(t){var e=t.b_(),n=ma(t.A_);return new Dy(t.A_,!!e.ignoreUndefinedProperties,n)}var by=/^__.*__$/,_y=(Ty.prototype.tf=function(t,e){var n=[];return null!==this.en?n.push(new zs(t,this.data,this.en,e)):n.push(new Bs(t,this.data,e)),0<this.fieldTransforms.length&&n.push(new Qs(t,this.fieldTransforms)),n},Ty),Iy=(Ey.prototype.tf=function(t,e){e=[new zs(t,this.data,this.en,e)];return 0<this.fieldTransforms.length&&e.push(new Qs(t,this.fieldTransforms)),e},Ey);function Ey(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}function Ty(t,e,n){this.data=t,this.en=e,this.fieldTransforms=n}function Ay(t){switch(t){case 0:case 2:case 1:return 1;case 3:case 4:return;default:throw Vr()}}var Ny=(Object.defineProperty(Oy.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(Oy.prototype,"u_",{get:function(){return this.settings.u_},enumerable:!1,configurable:!0}),Oy.prototype.df=function(t){return new Oy(Object.assign(Object.assign({},this.settings),t),this.t,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.en)},Oy.prototype.wf=function(t){var e=null===(e=this.path)||void 0===e?void 0:e.child(t),e=this.df({path:e,l_:!1});return e.Ef(t),e},Oy.prototype.Tf=function(t){var e,t=null===(e=this.path)||void 0===e?void 0:e.child(t),t=this.df({path:t,l_:!1});return t.ff(),t},Oy.prototype.If=function(t){return this.df({path:void 0,l_:!0})},Oy.prototype.a_=function(t){return Fy(t,this.settings.methodName,this.settings.mf||!1,this.path,this.settings.h_)},Oy.prototype.contains=function(e){return void 0!==this.en.find(function(t){return e.j(t)})||void 0!==this.fieldTransforms.find(function(t){return e.j(t.field)})},Oy.prototype.ff=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Ef(this.path.get(t))},Oy.prototype.Ef=function(t){if(0===t.length)throw this.a_("Document fields must not be empty");if(Ay(this.u_)&&by.test(t))throw this.a_('Document fields cannot begin and end with "__"')},Oy),Dy=(Sy.prototype.Af=function(t,e,n,r){return void 0===r&&(r=!1),new Ny({u_:t,methodName:e,h_:n,path:ci.X(),l_:!1,mf:r},this.t,this.serializer,this.ignoreUndefinedProperties)},Sy);function Sy(t,e,n){this.t=t,this.ignoreUndefinedProperties=e,this.serializer=n||ma(t)}function Oy(t,e,n,r,i,o){this.settings=t,this.t=e,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.ff(),this.fieldTransforms=i||[],this.en=o||[]}function xy(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Af(o.merge||o.mergeFields?2:0,e,n,i);Vy("Data must be an object, but it was:",s,r);var u,a,r=Cy(r,s);if(o.merge)u=new Os(s.en),a=s.fieldTransforms;else if(o.mergeFields){for(var c=[],h=0,f=o.mergeFields;h<f.length;h++){var l=Uy(e,f[h],n);if(!s.contains(l))throw new Br(Fr.INVALID_ARGUMENT,"Field '"+l+"' is specified in your field mask but missing from your input data.");By(c,l)||c.push(l)}u=new Os(c),a=s.fieldTransforms.filter(function(t){return u.un(t.field)})}else u=null,a=s.fieldTransforms;return new _y(new eu(r),u,a)}function ky(t,r,i,e){var o=t.Af(1,r,i);Vy("Data must be an object, but it was:",o,e);var s=[],u=new nu;go(e,function(t,e){var n=jy(r,t,i);e instanceof Bp&&(e=e.o_);t=o.Tf(n);e instanceof Op?s.push(n):null!=(t=Ly(e,t))&&(s.push(n),u.set(n,t))});e=new Os(s);return new Iy(u.hn(),e,o.fieldTransforms)}function Py(t,e,n,r,i,o){var s=t.Af(1,e,n),u=[Uy(e,r,n)],a=[i];if(o.length%2!=0)throw new Br(Fr.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)u.push(Uy(e,o[c])),a.push(o[c+1]);for(var h,f,l,p=[],d=new nu,y=u.length-1;0<=y;--y){By(p,u[y])||(h=u[y],(f=a[y])instanceof Bp&&(f=f.o_),l=s.Tf(h),f instanceof Op?p.push(h):null!=(l=Ly(f,l))&&(p.push(h),d.set(h,l)))}i=new Os(p);return new Iy(d.hn(),i,s.fieldTransforms)}function Ry(t,e,n,r){return void 0===r&&(r=!1),Ly(n,t.Af(r?4:3,e))}function Ly(s,t){if(s instanceof Bp&&(s=s.o_),My(s))return Vy("Unsupported field value:",t,s),Cy(s,t);if(s instanceof Sp)return function(t,e){if(!Ay(e.u_))throw e.a_(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.a_(t._methodName+"() is not currently supported inside arrays");t=t.c_(e);t&&e.fieldTransforms.push(t)}(s,t),null;if(t.path&&t.en.push(t.path),s instanceof Array){if(t.settings.l_&&4!==t.u_)throw t.a_("Nested arrays are not supported");return function(t){for(var e=[],n=0,r=0,i=s;r<i.length;r++){var o=Ly(i[r],t.If(n));null==o&&(o={nullValue:"NULL_VALUE"}),e.push(o),n++}return{arrayValue:{values:e}}}(t)}return function(t,e){if(t instanceof Bp&&(t=t.o_),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Bo(e.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=oi.fromDate(t);return{timestampValue:zo(e.serializer,n)}}if(t instanceof oi){var r=new oi(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:zo(e.serializer,r)}}if(t instanceof jp)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Fp)return{bytesValue:Go(e.serializer,t.E_)};if(t instanceof Ud){n=e.t,r=t.firestore.A_;if(!r.isEqual(n))throw e.a_("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:Wo(t.firestore.A_||e.t,t.Q_.path)}}if(void 0===t&&e.ignoreUndefinedProperties)return null;throw e.a_("Unsupported field value: "+Tp(t))}(s,t)}function Cy(t,n){var r={};return mo(t)?n.path&&0<n.path.length&&n.en.push(n.path):go(t,function(t,e){e=Ly(e,n.wf(t));null!=e&&(r[t]=e)}),{mapValue:{fields:r}}}function My(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof oi||t instanceof jp||t instanceof Fp||t instanceof Ud||t instanceof Sp)}function Vy(t,e,n){if(!My(n)||("object"!=typeof(r=n)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r))){n=Tp(n);throw"an object"===n?e.a_(t+" a custom object"):e.a_(t+" "+n)}var r}function Uy(t,e,n){if(e instanceof Bp&&(e=e.o_),e instanceof vd)return e.j_;if("string"==typeof e)return jy(t,e);throw Fy("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var qy=new RegExp("[~\\*/\\[\\]]");function jy(e,n,r){if(0<=n.search(qy))throw Fy("Invalid field path ("+n+"). Paths must not contain '~', '*', '/', '[', or ']'",e,!1,void 0,r);try{return(new(vd.bind.apply(vd,s([void 0],n.split("."))))).j_}catch(t){throw Fy("Invalid field path ("+n+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",e,!1,void 0,r)}}function Fy(t,e,n,r,i){var o=r&&!r.W(),s=void 0!==i,e="Function "+e+"() called with invalid data";n&&(e+=" (via `toFirestore()`)");n="";return(o||s)&&(n+=" (found",o&&(n+=" in field "+r),s&&(n+=" in document "+i),n+=")"),new Br(Fr.INVALID_ARGUMENT,(e+=". ")+t+n)}function By(t,e){return t.some(function(t){return t.isEqual(e)})}var zy=(Qy.prototype.Vf=function(r){return y(this,void 0,void 0,function(){var e,n=this;return v(this,function(t){switch(t.label){case 0:if(this.pf(),0<this.mutations.length)throw new Br(Fr.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(s,u){return y(this,void 0,void 0,function(){var n,e,r,i,o;return v(this,function(t){switch(t.label){case 0:return e=Jo((n=s).serializer)+"/documents",r={documents:u.map(function(t){return Qo(n.serializer,t)})},[4,n.Vu("BatchGetDocuments",e,r)];case 1:return r=t.sent(),i=new Map,r.forEach(function(t){var e,t=(e=n.serializer,"found"in(t=t)?function(t,e){Ur(!!e.found),e.found.name,e.found.updateTime;var n=$o(t,e.found.name),t=Ko(e.found.updateTime),e=new eu({mapValue:{fields:e.found.fields}});return new hu(n,t,e,{})}(e,t):"missing"in t?function(t,e){Ur(!!e.missing),Ur(!!e.readTime);t=$o(t,e.missing),e=Ko(e.readTime);return new fu(t,e)}(e,t):Vr());i.set(t.key.toString(),t)}),o=[],[2,(u.forEach(function(t){t=i.get(t.toString());Ur(!!t),o.push(t)}),o)]}})})}(this.Mu,r)];case 1:return[2,((e=t.sent()).forEach(function(t){t instanceof fu||t instanceof hu?n.vf(t):Vr()}),e)]}})})},Qy.prototype.set=function(t,e){this.write(e.tf(t,this.rn(t))),this.yf.add(t.toString())},Qy.prototype.update=function(t,e){try{this.write(e.tf(t,this.bf(t)))}catch(t){this.gf=t}this.yf.add(t.toString())},Qy.prototype.delete=function(t){this.write([new Zs(t,this.rn(t))]),this.yf.add(t.toString())},Qy.prototype.commit=function(){return y(this,void 0,void 0,function(){var e,n=this;return v(this,function(t){switch(t.label){case 0:if(this.pf(),this.gf)throw this.gf;return e=this.Rf,this.mutations.forEach(function(t){e.delete(t.key.toString())}),e.forEach(function(t,e){e=hi.st(e);n.mutations.push(new tu(e,n.rn(e)))}),[4,function(i,o){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return n=Jo((e=i).serializer)+"/documents",r={writes:o.map(function(t){return es(e.serializer,t)})},[4,e.yu("Commit",n,r)];case 1:return t.sent(),[2]}})})}(this.Mu,this.mutations)];case 1:return t.sent(),this.Pf=!0,[2]}})})},Qy.prototype.vf=function(t){var e;if(t instanceof hu)e=t.version;else{if(!(t instanceof fu))throw Vr();e=si.min()}var n=this.Rf.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Br(Fr.ABORTED,"Document version changed between two reads.")}else this.Rf.set(t.key.toString(),e)},Qy.prototype.rn=function(t){var e=this.Rf.get(t.toString());return!this.yf.has(t.toString())&&e?Rs.updateTime(e):Rs.on()},Qy.prototype.bf=function(t){var e=this.Rf.get(t.toString());if(this.yf.has(t.toString())||!e)return Rs.exists(!0);if(e.isEqual(si.min()))throw new Br(Fr.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Rs.updateTime(e)},Qy.prototype.write=function(t){this.pf(),this.mutations=this.mutations.concat(t)},Qy.prototype.pf=function(){},Qy),Gy=(Hy.prototype.run=function(){this.Df()},Hy.prototype.Df=function(){var t=this;this.Si.Bs(function(){return y(t,void 0,void 0,function(){var e,n,r=this;return v(this,function(t){return e=new zy(this.Mu),(n=this.Cf(e))&&n.then(function(t){r.di.Ri(function(){return e.commit().then(function(){r.Ti.resolve(t)}).catch(function(t){r.Nf(t)})})}).catch(function(t){r.Nf(t)}),[2]})})})},Hy.prototype.Cf=function(t){try{var e=this.updateFunction(t);return!gi(e)&&e.catch&&e.then?e:(this.Ti.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.Ti.reject(t),null}},Hy.prototype.Nf=function(t){var e=this;0<this.Sf&&this.xf(t)?(--this.Sf,this.di.Ri(function(){return e.Df(),Promise.resolve()})):this.Ti.reject(t)},Hy.prototype.xf=function(t){if("FirebaseError"!==t.name)return!1;t=t.code;return"aborted"===t||"failed-precondition"===t||!ki(t)},Hy),Ky=(Wy.prototype.getConfiguration=function(){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return[4,this.g.promise];case 1:return[2,(t.sent(),{di:this.di,Fl:this.Fl,clientId:this.clientId,credentials:this.credentials,Yl:this.user,qh:100})]}})})},Wy.prototype.Of=function(t){var e=this;this.Ff=t,this.g.promise.then(function(){return e.Ff(e.user)})},Wy.prototype.Mf=function(){if(this.di.Ci)throw new Br(Fr.FAILED_PRECONDITION,"The client has already been terminated.")},Wy.prototype.terminate=function(){var t=this;this.di.Oi();var n=new la;return this.di.Ni(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,5,,6]),this.kf?[4,this.kf.terminate()]:[3,2];case 1:t.sent(),t.label=2;case 2:return this.$f?[4,this.$f.terminate()]:[3,4];case 3:t.sent(),t.label=4;case 4:return this.credentials.R(),n.resolve(),[3,6];case 5:return e=t.sent(),e=Xa(e,"Failed to shutdown persistence"),n.reject(e),[3,6];case 6:return[2]}})})}),n.promise},Wy);function Wy(t,e,n){var r=this;this.credentials=t,this.di=e,this.Fl=n,this.user=Sr.UNAUTHENTICATED,this.clientId=Jr.D(),this.Ff=function(){},this.g=new la,this.credentials.A(function(t){Rr("FirestoreClient","Received user=",t.uid),r.user.isEqual(t)||(r.user=t,r.Ff(t)),r.g.resolve()})}function Hy(t,e,n,r){this.di=t,this.Mu=e,this.updateFunction=n,this.Ti=r,this.Sf=5,this.Si=new Oa(this.di,"transaction_retry")}function Qy(t){this.Mu=t,this.Rf=new Map,this.mutations=[],this.Pf=!1,this.gf=null,this.yf=new Set}function $y(r,i){return y(this,void 0,void 0,function(){var e,n=this;return v(this,function(t){switch(t.label){case 0:return r.di.Li(),Rr("FirestoreClient","Initializing OfflineComponentProvider"),[4,r.getConfiguration()];case 1:return e=t.sent(),[4,i.initialize(e)];case 2:return t.sent(),r.Of(function(e){return r.di.Mi(function(){return y(n,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return[4,jh(i.Ou,e)];case 1:return t.sent(),[2]}})})})}),i.persistence.rc(function(){return r.terminate()}),r.$f=i,[2]}})})}function Yy(r,i){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return r.di.Li(),[4,Xy(r)];case 1:return e=t.sent(),Rr("FirestoreClient","Initializing OnlineComponentProvider"),[4,r.getConfiguration()];case 2:return n=t.sent(),[4,i.initialize(e,n)];case 3:return t.sent(),r.Of(function(t){return r.di.Mi(function(){return function(r,i){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return(e=r).di.Li(),Rr("RemoteStore","RemoteStore received new credentials"),n=wf(e),e.Bu.add(3),[4,lf(e)];case 1:return t.sent(),n&&e.Ku.set("Unknown"),[4,e.ku.s_(i)];case 2:return t.sent(),e.Bu.delete(3),[4,ff(e)];case 3:return t.sent(),[2]}})})}(i.$h,t)})}),r.kf=i,[2]}})})}function Xy(e){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e.$f?[3,2]:(Rr("FirestoreClient","Using default OfflineComponentProvider"),[4,$y(e,new Yl)]);case 1:t.sent(),t.label=2;case 2:return[2,e.$f]}})})}function Jy(e){return y(this,void 0,void 0,function(){return v(this,function(t){switch(t.label){case 0:return e.kf?[3,2]:(Rr("FirestoreClient","Using default OnlineComponentProvider"),[4,Yy(e,new Zl)]);case 1:t.sent(),t.label=2;case 2:return[2,e.kf]}})})}function Zy(t){return Xy(t).then(function(t){return t.persistence})}function tv(t){return Xy(t).then(function(t){return t.Ou})}function ev(t){return Jy(t).then(function(t){return t.$h})}function nv(t){return Jy(t).then(function(t){return t.va})}function rv(r){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return[4,Jy(r)];case 1:return e=t.sent(),[2,((n=e.Lh).ta=function(s,u){return y(this,void 0,void 0,function(){var e,n,r,i,o;return v(this,function(t){switch(t.label){case 0:return e=xl(s),(o=e.Qh.get(u))?(n=o.targetId,e.Bh.Ha(n),r=o.view.Mh(),[3,4]):[3,1];case 1:return[4,Gh(e.Ou,Au(u))];case 2:return i=t.sent(),o=e.Bh.Ha(i.targetId),n=i.targetId,[4,ll(e,u,n,"current"===o)];case 3:r=t.sent(),e.Zh&&pf(e.$h,i),t.label=4;case 4:return[2,r]}})})}.bind(null,e.va),n.sa=function(i,o){return y(this,void 0,void 0,function(){var e,n,r;return v(this,function(t){switch(t.label){case 0:return n=(e=i).Qh.get(o),1<(r=e.Kh.get(n.targetId)).length?[2,(e.Kh.set(n.targetId,r.filter(function(t){return!Du(t,o)})),void e.Qh.delete(o))]:e.Zh?(e.Bh.Ya(n.targetId),e.Bh.Ka(n.targetId)?[3,2]:[4,Kh(e.Ou,n.targetId,!1).then(function(){e.Bh.Za(n.targetId),df(e.$h,n.targetId),bl(e,n.targetId)}).catch(Yh)]):[3,3];case 1:t.sent(),t.label=2;case 2:return[3,5];case 3:return bl(e,n.targetId),[4,Kh(e.Ou,n.targetId,!0)];case 4:t.sent(),t.label=5;case 5:return[2]}})})}.bind(null,e.va),n)]}})})}function iv(n,r,i){var t=this;void 0===i&&(i={});var o=new la;return n.di.Ri(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(n,r,i,o,s){var t=new tp({next:function(t){r.Ri(function(){return Rf(n,u)});var e=t.docs.has(i);!e&&t.fromCache?s.reject(new Br(Fr.UNAVAILABLE,"Failed to get document because the client is offline.")):e&&t.fromCache&&o&&"server"===o.source?s.reject(new Br(Fr.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):s.resolve(t)},error:function(t){return s.reject(t)}}),u=new Cf(mu(i.path),t,{includeMetadataChanges:!0,ha:!0});return Pf(n,u)},[4,rv(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.di,r,i,o])]}})})}),o.promise}function ov(n,r,i){var t=this;void 0===i&&(i={});var o=new la;return n.di.Ri(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(e,n,t,r,i){var o=new tp({next:function(t){n.Ri(function(){return Rf(e,s)}),t.fromCache&&"server"===r.source?i.reject(new Br(Fr.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(t)},error:function(t){return i.reject(t)}}),s=new Cf(t,o,{includeMetadataChanges:!0,ha:!0});return Pf(e,s)},[4,rv(n)];case 1:return[2,e.apply(void 0,[t.sent(),n.di,r,i,o])]}})})}),o.promise}var sv=(uv.prototype.set=function(t,e,n){this.Qf();t=av(t,this.q_),e=Zv(t.W_,e,n),n=xy(this.Uf,"WriteBatch.set",t.Q_,e,null!==t.W_,n);return this.Bf=this.Bf.concat(n.tf(t.Q_,Rs.on())),this},uv.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this.Qf();t=av(t,this.q_);return e instanceof Bp&&(e=e.o_),e="string"==typeof e||e instanceof vd?Py(this.Uf,"WriteBatch.update",t.Q_,e,n,r):ky(this.Uf,"WriteBatch.update",t.Q_,e),this.Bf=this.Bf.concat(e.tf(t.Q_,Rs.exists(!0))),this},uv.prototype.delete=function(t){this.Qf();t=av(t,this.q_);return this.Bf=this.Bf.concat(new Zs(t.Q_,Rs.on())),this},uv.prototype.commit=function(){return this.Qf(),this.qf=!0,0<this.Bf.length?this.Lf(this.Bf):Promise.resolve()},uv.prototype.Qf=function(){if(this.qf)throw new Br(Fr.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},uv);function uv(t,e){this.q_=t,this.Lf=e,this.Bf=[],this.qf=!1,this.Uf=wy(t)}function av(t,e){if(t instanceof Bp&&(t=t.o_),t.firestore!==e)throw new Br(Fr.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var cv,hv,fv=(gv.prototype.get=function(t){var e=this,n=av(t,this.q_),r=new yy(this.q_);return this.Kf.Vf([n.Q_]).then(function(t){if(!t||1!==t.length)return Vr();t=t[0];if(t instanceof fu)return new ud(e.q_,r,n.Q_,null,n.W_);if(t instanceof hu)return new ud(e.q_,r,t.key,t,n.W_);throw Vr()})},gv.prototype.set=function(t,e,n){t=av(t,this.q_),e=Zv(t.W_,e,n),n=xy(this.Uf,"Transaction.set",t.Q_,e,null!==t.W_,n);return this.Kf.set(t.Q_,n),this},gv.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=av(t,this.q_);return e instanceof Bp&&(e=e.o_),e="string"==typeof e||e instanceof vd?Py(this.Uf,"Transaction.update",t.Q_,e,n,r):ky(this.Uf,"Transaction.update",t.Q_,e),this.Kf.update(t.Q_,e),this},gv.prototype.delete=function(t){t=av(t,this.q_);return this.Kf.delete(t.Q_),this},n(vv,hv=gv),vv.prototype.get=function(t){var e=this,n=av(t,this.q_),r=new Pd(this.q_);return hv.prototype.get.call(this,t).then(function(t){return new Td(e.q_,r,n.Q_,t.K_,new Uv(!1,!1),n.W_)})},vv),lv=(yv.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){_d(t=Ap(t,gd));var n=mv(t),r=t.b_(),t=new Zl;return bd(n,t,new Xl(t,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t.o_,{forceOwnership:e})},yv.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){_d(t=Ap(t,gd));var e=mv(t),n=t.b_(),t=new Zl;return bd(e,t,new Jl(t,n.cacheSizeBytes))}(t.o_)},yv.prototype.clearIndexedDbPersistence=function(t){return function(n){var t=this;if(n.g_&&!n.y_)throw new Br(Fr.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var r=new la;return n.G_.Ni(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,function(n){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return xa.Gs()?(e=n+"main",[4,xa.delete(e)]):[2,Promise.resolve()];case 1:return t.sent(),[2]}})})}(Mh(n.A_,n.T_))];case 1:return t.sent(),r.resolve(),[3,3];case 2:return e=t.sent(),r.reject(e),[3,3];case 3:return[2]}})})}),r.promise}(t.o_)},yv),pv=(n(dv,cv=Bp),Object.defineProperty(dv.prototype,"A_",{get:function(){return this.o_.A_},enumerable:!1,configurable:!0}),dv.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this.o_.v_()),t)).merge,this.o_.p_(t)},dv.prototype.useEmulator=function(t,e){"firestore.googleapis.com"!==this.o_.v_().host&&Cr("Host has been set in both settings() and useEmulator(), emulator host will be used"),this.settings({host:t+":"+e,ssl:!1,merge:!0})},dv.prototype.enableNetwork=function(){return function(r){var t=this;return r.di.enqueue(function(){return y(t,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return[4,Zy(r)];case 1:return e=t.sent(),[4,ev(r)];case 2:return n=t.sent(),[2,(e.oc(!0),(t=n).Bu.delete(0),ff(t))]}})})})}(mv(Ap(this.o_,gd)))},dv.prototype.disableNetwork=function(){return function(r){var t=this;return r.di.enqueue(function(){return y(t,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return[4,Zy(r)];case 1:return e=t.sent(),[4,ev(r)];case 2:return n=t.sent(),[2,(e.oc(!1),function(n){return y(this,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return(e=n).Bu.add(0),[4,lf(e)];case 1:return t.sent(),e.Ku.set("Offline"),[2]}})})}(n))]}})})})}(mv(Ap(this.o_,gd)))},dv.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&_p("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.Wf.enableMultiTabIndexedDbPersistence(this):this.Wf.enableIndexedDbPersistence(this,n)},dv.prototype.clearPersistence=function(){return this.Wf.clearIndexedDbPersistence(this)},dv.prototype.terminate=function(){return this.app._removeServiceInstance("firestore"),this.app._removeServiceInstance("firestore-exp"),this.o_._delete()},dv.prototype.waitForPendingWrites=function(){return function(n){var t=this,r=new la;return n.di.Ri(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=gl,[4,nv(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),r.promise}(mv(Ap(this.o_,gd)))},dv.prototype.onSnapshotsInSync=function(t){return e=this.o_,t=t,function(n,t){var e=this,r=new tp(t);return n.di.Ri(function(){return y(e,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Zu.add(e),e.next()},[4,rv(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})}),function(){r.r_(),n.di.Ri(function(){return y(e,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(t,e){t.Zu.delete(e)},[4,rv(n)];case 1:return[2,e.apply(void 0,[t.sent(),r])]}})})})}}(mv(Ap(e,gd)),wa(t)?t:{next:t});var e},Object.defineProperty(dv.prototype,"app",{get:function(){if(!this.jf)throw new Br(Fr.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.jf},enumerable:!1,configurable:!0}),dv.prototype.collection=function(t){try{return new Gv(this,ly(this.o_,t))}catch(t){throw Ov(t,"collection()","Firestore.collection()")}},dv.prototype.doc=function(t){try{return new Av(this,py(this.o_,t))}catch(t){throw Ov(t,"doc()","Firestore.doc()")}},dv.prototype.collectionGroup=function(t){try{return new Fv(this,function(t,e){if(t=Ap(t,Kp),wp("collectionGroup","collection id",e),0<=e.indexOf("/"))throw new Br(Fr.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new qd(t,null,(e=e,new pu(ui.X(),e)))}(this.o_,t))}catch(t){throw Ov(t,"collectionGroup()","Firestore.collectionGroup()")}},dv.prototype.runTransaction=function(e){var n,r=this;return function(n,r){var t=this,i=new la;return n.di.Ri(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return[4,Jy(n).then(function(t){return t.Mu})];case 1:return e=t.sent(),new Gy(n.di,e,r,i).run(),[2]}})})}),i.promise}(mv(n=this.o_),function(t){return t=new fv(n,t),e(new Ev(r,t))})},dv.prototype.batch=function(){var e=this;return mv(this.o_),new Tv(new sv(this.o_,function(t){return Md(e.o_,t)}))},dv);function dv(t,e,n){var r=this;return(r=cv.call(this,e)||this).Wf=n,r.INTERNAL={delete:function(){return r.terminate()}},t instanceof Dr||(r.jf=t),r}function yv(){}function vv(t,e){var n=this;return(n=hv.call(this,t,e)||this).q_=t,n}function gv(t,e){this.q_=t,this.Kf=e,this.Uf=wy(t)}function mv(t){return t.z_||wv(t),t.z_.Mf(),t.z_}function wv(t){var e,n,r=t.b_(),r=(e=t.A_,n=t.T_,new Nr(e,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling));t.z_=new Ky(t.R_,t.G_,r)}var bv,_v,Iv,Ev=(n(Sv,Iv=Bp),Sv.prototype.get=function(t){var e=this,t=Jv(t);return this.o_.get(t).then(function(t){return new qv(e.q_,t)})},Sv.prototype.set=function(t,e,n){t=Jv(t);return n?(bp("Transaction.set",n),this.o_.set(t,e,n)):this.o_.set(t,e),this},Sv.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=Jv(t);return 2===arguments.length?this.o_.update(o,e):(t=this.o_).update.apply(t,s([o,e,n],r)),this},Sv.prototype.delete=function(t){t=Jv(t);return this.o_.delete(t),this},Sv),Tv=(n(Dv,_v=Bp),Dv.prototype.set=function(t,e,n){t=Jv(t);return n?(bp("WriteBatch.set",n),this.o_.set(t,e,n)):this.o_.set(t,e),this},Dv.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o=Jv(t);return 2===arguments.length?this.o_.update(o,e):(t=this.o_).update.apply(t,s([o,e,n],r)),this},Dv.prototype.delete=function(t){t=Jv(t);return this.o_.delete(t),this},Dv.prototype.commit=function(){return this.o_.commit()},Dv),Av=(n(Nv,bv=Bp),Nv.Gf=function(t,e,n){if(t.length%2!=0)throw new Br(Fr.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.J()+" has "+t.length);return new Nv(e,new Ud(e.o_,n,new hi(t)))},Nv.B_=function(t,e,n){return new Nv(e,new Ud(e.o_,n,t))},Object.defineProperty(Nv.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(Nv.prototype,"parent",{get:function(){return new Gv(this.firestore,this.o_.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(Nv.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),Nv.prototype.collection=function(t){try{return new Gv(this.firestore,ly(this.o_,t))}catch(t){throw Ov(t,"collection()","DocumentReference.collection()")}},Nv.prototype.isEqual=function(t){return t instanceof Bp&&(t=t.o_),t instanceof Ud&&gy(this.o_,t)},Nv.prototype.set=function(t,e){e=bp("DocumentReference.set",e);try{return function(t,e,n){t=Ap(t,Ud);var r=Ap(t.firestore,gd),e=Zv(t.W_,e,n);return Md(r,xy(wy(r),"setDoc",t.Q_,e,null!==t.W_,n).tf(t.Q_,Rs.on()))}(this.o_,t,e)}catch(t){throw Ov(t,"setDoc()","DocumentReference.set()")}},Nv.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?Ld(this.o_,t):Ld.apply(void 0,s([this.o_,t,e],n))}catch(t){throw Ov(t,"updateDoc()","DocumentReference.update()")}},Nv.prototype.delete=function(){return Md(Ap((t=this.o_).firestore,gd),[new Zs(t.Q_,Rs.on())]);var t},Nv.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=xv(t),i=kv(t,function(t){return new qv(e.firestore,new Td(e.firestore.o_,e.U_,t.Q_,t.K_,t.metadata,e.o_.W_))});return Cd(this.o_,r,i)},Nv.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=Ap(e,Ud);var n=Ap(e.firestore,gd),t=mv(n),r=new Pd(n);return function(n,r){var t=this,i=new la;return n.di.Ri(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(i,o,s){return y(this,void 0,void 0,function(){var r;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,(e=o,(n=i).persistence.runTransaction("read document","readonly",function(t){return n.Bc.cs(t,e)}))];case 1:return(r=t.sent())instanceof hu?s.resolve(r):r instanceof fu?s.resolve(null):s.reject(new Br(Fr.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=t.sent(),r=Xa(r,"Failed to get document '"+o+" from cache"),s.reject(r),[3,3];case 3:return[2]}var e,n})})},[4,tv(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e.Q_).then(function(t){return new Td(n,r,e.Q_,t,new Uv(t instanceof hu&&t.an,!0),e.W_)})}:"server"===(null==t?void 0:t.source)?function(e){e=Ap(e,Ud);var n=Ap(e.firestore,gd);return iv(mv(n),e.Q_,{source:"server"}).then(function(t){return Vd(n,e,t)})}:function(e){e=Ap(e,Ud);var n=Ap(e.firestore,gd);return iv(mv(n),e.Q_).then(function(t){return Vd(n,e,t)})})(this.o_).then(function(t){return new qv(e.firestore,new Td(e.firestore.o_,e.U_,t.Q_,t.K_,t.metadata,e.o_.W_))})},Nv.prototype.withConverter=function(t){return new Nv(this.firestore,this.o_.withConverter(t))},Nv);function Nv(t,e){var n=this;return(n=bv.call(this,e)||this).firestore=t,n.U_=new sd(t),n}function Dv(){return null!==_v&&_v.apply(this,arguments)||this}function Sv(t,e){var n=this;return(n=Iv.call(this,e)||this).q_=t,n}function Ov(t,e,n){return t.message=t.message.replace(e,n),t}function xv(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!wa(r))return r}return{}}function kv(t,e){var n;return{next:function(t){n.next&&n.next(e(t))},error:null===(t=(n=wa(t[0])?t[0]:wa(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===t?void 0:t.bind(n),complete:null===(t=n.complete)||void 0===t?void 0:t.bind(n)}}var Pv,Rv,Lv,Cv,Mv,Vv,Uv=(Xv.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},Xv),qv=(n(Yv,Vv=Bp),Object.defineProperty(Yv.prototype,"ref",{get:function(){return new Av(this.q_,this.o_.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(Yv.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(Yv.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(Yv.prototype,"exists",{get:function(){return this.o_.exists()},enumerable:!1,configurable:!0}),Yv.prototype.data=function(t){return this.o_.data(t)},Yv.prototype.get=function(t,e){return this.o_.get(t,e)},Yv.prototype.isEqual=function(t){return xd(this.o_,t.o_)},Yv),jv=(n($v,Mv=qv),$v.prototype.data=function(t){return this.o_.data(t)},$v),Fv=(n(Qv,Cv=Bp),Qv.prototype.where=function(t,e,n){try{return new Qv(this.firestore,Bd(this.o_,(r=n,i=e,o=dd("where",t),new Qd(o,i,r))))}catch(t){throw Ov(t,/(orderBy|where)\(\)/,"Query.$1()")}var r,i,o},Qv.prototype.orderBy=function(n,t){try{return new Qv(this.firestore,Bd(this.o_,function(t){void 0===t&&(t="asc");var e=t,t=dd("orderBy",n);return new $d(t,e)}(t)))}catch(n){throw Ov(n,/(orderBy|where)\(\)/,"Query.$1()")}},Qv.prototype.limit=function(t){try{return new Qv(this.firestore,Bd(this.o_,(Np("limit",e=t),new Yd("limit",e,"F"))))}catch(t){throw Ov(t,"limit()","Query.limit()")}var e},Qv.prototype.limitToLast=function(t){try{return new Qv(this.firestore,Bd(this.o_,(Np("limitToLast",e=t),new Yd("limitToLast",e,"L"))))}catch(t){throw Ov(t,"limitToLast()","Query.limitToLast()")}var e},Qv.prototype.startAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new Qv(this.firestore,Bd(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Xd("startAt",t,!0)}.apply(void 0,t)))}catch(t){throw Ov(t,"startAt()","Query.startAt()")}},Qv.prototype.startAfter=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new Qv(this.firestore,Bd(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Xd("startAfter",t,!1)}.apply(void 0,t)))}catch(t){throw Ov(t,"startAfter()","Query.startAfter()")}},Qv.prototype.endBefore=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new Qv(this.firestore,Bd(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jd("endBefore",t,!0)}.apply(void 0,t)))}catch(t){throw Ov(t,"endBefore()","Query.endBefore()")}},Qv.prototype.endAt=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];try{return new Qv(this.firestore,Bd(this.o_,function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Jd("endAt",t,!1)}.apply(void 0,t)))}catch(t){throw Ov(t,"endAt()","Query.endAt()")}},Qv.prototype.isEqual=function(t){return my(this.o_,t.o_)},Qv.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(e){e=Ap(e,qd);var n=Ap(e.firestore,gd),t=mv(n),r=new Pd(n);return function(n,r){var t=this,i=new la;return n.di.Ri(function(){return y(t,void 0,void 0,function(){var e;return v(this,function(t){switch(t.label){case 0:return e=function(r,i,o){return y(this,void 0,void 0,function(){var e,n;return v(this,function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,Wh(r,i,!0)];case 1:return n=t.sent(),e=new Zf(i,n.Kc),n=e.bh(n.documents),n=e.Zn(n,!1),o.resolve(n.snapshot),[3,3];case 2:return n=t.sent(),n=Xa(n,"Failed to execute query '"+i+" against cache"),o.reject(n),[3,3];case 3:return[2]}})})},[4,tv(n)];case 1:return[2,e.apply(void 0,[t.sent(),r,i])]}})})}),i.promise}(t,e.Z_).then(function(t){return new Nd(n,r,e,t)})}:"server"===(null==t?void 0:t.source)?function(e){e=Ap(e,qd);var n=Ap(e.firestore,gd),t=mv(n),r=new Pd(n);return ov(t,e.Z_,{source:"server"}).then(function(t){return new Nd(n,r,e,t)})}:function(e){e=Ap(e,qd);var n=Ap(e.firestore,gd),t=mv(n),r=new Pd(n);return ay(e.Z_),ov(t,e.Z_).then(function(t){return new Nd(n,r,e,t)})})(this.o_).then(function(t){return new zv(e.firestore,new Nd(e.firestore.o_,e.U_,e.o_,t.J_))})},Qv.prototype.onSnapshot=function(){for(var e=this,t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=xv(t),i=kv(t,function(t){return new zv(e.firestore,new Nd(e.firestore.o_,e.U_,e.o_,t.J_))});return Cd(this.o_,r,i)},Qv.prototype.withConverter=function(t){return new Qv(this.firestore,this.o_.withConverter(t))},Qv),Bv=(n(Hv,Lv=Bp),Object.defineProperty(Hv.prototype,"type",{get:function(){return this.o_.type},enumerable:!1,configurable:!0}),Object.defineProperty(Hv.prototype,"doc",{get:function(){return new jv(this.q_,this.o_.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(Hv.prototype,"oldIndex",{get:function(){return this.o_.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(Hv.prototype,"newIndex",{get:function(){return this.o_.newIndex},enumerable:!1,configurable:!0}),Hv),zv=(n(Wv,Rv=Bp),Object.defineProperty(Wv.prototype,"query",{get:function(){return new Fv(this.q_,this.o_.query)},enumerable:!1,configurable:!0}),Object.defineProperty(Wv.prototype,"metadata",{get:function(){return this.o_.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(Wv.prototype,"size",{get:function(){return this.o_.size},enumerable:!1,configurable:!0}),Object.defineProperty(Wv.prototype,"empty",{get:function(){return this.o_.empty},enumerable:!1,configurable:!0}),Object.defineProperty(Wv.prototype,"docs",{get:function(){var e=this;return this.o_.docs.map(function(t){return new jv(e.q_,t)})},enumerable:!1,configurable:!0}),Wv.prototype.docChanges=function(t){var e=this;return this.o_.docChanges(t).map(function(t){return new Bv(e.q_,t)})},Wv.prototype.forEach=function(e,n){var r=this;this.o_.forEach(function(t){e.call(n,new jv(r.q_,t))})},Wv.prototype.isEqual=function(t){return xd(this.o_,t.o_)},Wv),Gv=(n(Kv,Pv=Fv),Object.defineProperty(Kv.prototype,"id",{get:function(){return this.o_.id},enumerable:!1,configurable:!0}),Object.defineProperty(Kv.prototype,"path",{get:function(){return this.o_.path},enumerable:!1,configurable:!0}),Object.defineProperty(Kv.prototype,"parent",{get:function(){var t=this.o_.parent;return t?new Av(this.firestore,t):null},enumerable:!1,configurable:!0}),Kv.prototype.doc=function(t){try{return new Av(this.firestore,void 0===t?py(this.o_):py(this.o_,t))}catch(t){throw Ov(t,"doc()","CollectionReference.doc()")}},Kv.prototype.add=function(t){var e,n,r,i=this;return e=this.o_,n=t,t=Ap(e.firestore,gd),r=py(e),n=Zv(e.W_,n),Md(t,xy(wy(e.firestore),"addDoc",r.Q_,n,null!==e.W_,{}).tf(r.Q_,Rs.exists(!1))).then(function(){return r}).then(function(t){return new Av(i.firestore,t)})},Kv.prototype.isEqual=function(t){return gy(this.o_,t.o_)},Kv.prototype.withConverter=function(t){return new Kv(this.firestore,this.o_.withConverter(t))},Kv);function Kv(t,e){var n=this;return(n=Pv.call(this,t,e)||this).firestore=t,n.o_=e,n}function Wv(t,e){var n=this;return(n=Rv.call(this,e)||this).q_=t,n}function Hv(t,e){var n=this;return(n=Lv.call(this,e)||this).q_=t,n}function Qv(t,e){var n=this;return(n=Cv.call(this,e)||this).firestore=t,n.U_=new sd(t),n}function $v(){return null!==Mv&&Mv.apply(this,arguments)||this}function Yv(t,e){var n=this;return(n=Vv.call(this,e)||this).q_=t,n}function Xv(t,e){this.hasPendingWrites=t,this.fromCache=e}function Jv(t){return t instanceof Bp&&(t=t.o_),Ap(t,Ud)}function Zv(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var tg,eg,ng,Ie=(n(og,eg=Bp),og.documentId=function(){return new og(ci.et().J())},og.prototype.isEqual=function(t){return t instanceof Bp&&(t=t.o_),t instanceof vd&&this.o_.j_.isEqual(t.j_)},og),h=(n(ig,tg=Bp),ig.serverTimestamp=function(){var t=new Mp("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new ig(t)},ig.delete=function(){var t=new Op("deleteField");return t._methodName="FieldValue.delete",new ig(t)},ig.arrayUnion=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Vp("arrayUnion",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayUnion",new ig(n)},ig.arrayRemove=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Up("arrayRemove",t)}.apply(void 0,t);return n._methodName="FieldValue.arrayRemove",new ig(n)},ig.increment=function(t){t=new qp("increment",t);return t._methodName="FieldValue.increment",new ig(t)},ig.prototype.isEqual=function(t){return this.o_.isEqual(t.o_)},ig),rg={Firestore:pv,GeoPoint:jp,Timestamp:oi,Blob:od,Transaction:Ev,WriteBatch:Tv,DocumentReference:Av,DocumentSnapshot:qv,Query:Fv,QueryDocumentSnapshot:jv,QuerySnapshot:zv,CollectionReference:Gv,FieldPath:Ie,FieldValue:h,setLogLevel:function(t){kr.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};function ig(){return null!==tg&&tg.apply(this,arguments)||this}function og(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return eg.call(this,new(vd.bind.apply(vd,s([void 0],t))))||this}(ng=e.default).INTERNAL.registerComponent(new Tr("firestore",function(t){return e=t.getProvider("app").getImmediate(),t=t.getProvider("auth-internal"),new pv(e,new gd(e,t),new lv);var e},"PUBLIC").setServiceProps(Object.assign({},rg))),ng.registerVersion("@firebase/firestore","2.0.5")}).apply(this,arguments)}catch(t){throw console.error(t),new Error("Cannot instantiate firebase-firestore.js - be sure to load firebase-app.js first.")}});
//# sourceMappingURL=firebase-firestore.js.map
